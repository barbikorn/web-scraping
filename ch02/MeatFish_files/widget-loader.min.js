/*!
 * ude-1.25.3
 * 
 * 24/7 Customer, Inc. Confidential, Do Not Distribute. This is an
 * unpublished, proprietary work which is fully protected under
 * copyright law. This code may only be used pursuant to a valid
 * license from 24/7 Customer, Inc. http://www.247-inc.com
 */!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=".",n(n.s=703)}({10:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SECURITY:{FRAME_IN_FRAME:"frame-in-frame",THIRD_PARTY_FRAME:"third-party-frame"},IFRAME_POST_MESSAGE:{SET_IFRAME_CSS:"SET_SN_IFRAME_CSS",SET_IFRAME_VIEWPORT:"SET_VIEWPORT",GET_BODY_CSS:"GET_BODY_CSS",SET_BODY_CSS:"SET_BODY_CSS"},IFRAME_INBOUND_MESSAGE:{MESSAGE_SOURCE:"_247_",RESP_GET_BODY_CSS:"RESP_GET_BODY_CSS"},IFRAME_BODY:"IFRAME_BODY"}},107:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=f(n(12)),o=f(n(3)),u=f(n(15)),s=f(n(6)),l=f(n(9)),d=f(n(24)),c=f(n(181));function f(e){return e&&e.__esModule?e:{default:e}}var p=!1,v=void 0,h=void 0,E=void 0,_=void 0,g={};var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(e){var t=this;if(!p){v=e.storage,o.default.isObject(v,"storage"),o.default.isFunction(v.get,"storage.get"),o.default.isFunction(v.set,"storage.set");try{this._sessionStorage=new c.default("sessionStorage",r.default.TAB_STORAGE_KEY)}catch(e){this._sessionStorage={store:{},getAll:function(){return t._sessionStorage.store},set:function(e,n){t._sessionStorage.store[e]=n}}}h=r.default.STORAGE_KEY_NAMES.TAB_SESSION,E=r.default.STORAGE_KEY_NAMES.TAB_PREFIX,this.isExistingTab=!1,_=this._getTabId(),this._onStoreUpdate=e.onStoreUpdate,this.tab={set:function(e,n){return t._set(e,n,r.default.TAB_SESSION_KEY)},get:function(e){return t._get(e,r.default.TAB_SESSION_KEY)}},this.browser={set:function(e,n){return t._set(e,n,r.default.BROWSER_SESSION_KEY)},get:function(e){return t._get(e,r.default.BROWSER_SESSION_KEY)}},v.addStorageListener(function(e){try{var t=e.newValue,n=e.oldValue;if(t[r.default.SOURCE]===t[this.getTabId()])return;Object.keys(t).length>0&&(this._notifyListeners(n,t),this._onStoreUpdate(t))}catch(e){}}.bind(this));var n=e.activeSession;this._checkAndInitWorkflowSession(r.default.CHAT_SESSION_KEY),this._checkAndInitWorkflowSession(r.default.VA_SESSION_KEY),this._checkAndInitWorkflowSession(r.default.MESSAGING_SESSION_KEY);var a=this.browser.get(r.default.PRECHAT_DATA_KEYS.ACTIVE_SESSION);n&&n!==a&&!e.interLobEnabled&&(this.removeSessionData(),this.browser.set(r.default.PRECHAT_DATA_KEYS.ACTIVE_SESSION,n)),p=!0}}},{key:"_checkAndInitWorkflowSession",value:function(e){var t,n,a,i=this.browser.get(e);if(l.default.isUndefinedorNull(i)){var r=(a={},(n=e)in(t={})?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t);this.browser.set(r)}}},{key:"_getTabId",value:function(){var e=void 0;try{var t=this._sessionStorage.getAll();(e=l.default.get(["id"],t))&&e.indexOf(E)>=0?this.isExistingTab=!0:(e=E+d.default.get(5),this._sessionStorage.set("id",e))}catch(e){}return e}},{key:"_getData",value:function(e){return e===r.default.TAB_SESSION_KEY?v.get(_):e===r.default.BROWSER_SESSION_KEY?v.get(h):v.get(e)}},{key:"_setData",value:function(e,t){var n=e,a=void 0;t===r.default.BROWSER_SESSION_KEY?a=h:t===r.default.TAB_SESSION_KEY&&(a=_);var i={tabId:_};n.syncCustomStorage&&(i.syncCustomStorage=!0,delete n.syncCustomStorage),v.set(a,n,i)}},{key:"removeSessionData",value:function(e){v.remove(h,e)}},{key:"_get",value:function(e,t){var n=this._getData(t);return e?n?n[e]:void 0:n}},{key:"_set",value:function(e,t,n){if("object"!==(void 0===e?"undefined":a(e))){var i={};i[e]=t,this._setData(i,n)}else this._setData(e,n)}},{key:"addListener",value:function(e,t){o.default.isFunction(t);var n=g[e]?g[e]:[];n.push(t),g[e]=n}},{key:"removeListener",value:function(e,t){if(o.default.isFunction(t),g[e]){var n=g[e];g[e]=n.splice(n.indexOf(t),1)}}},{key:"_notifyListeners",value:function(e,t){var n=this;if(Object.keys(e).length>0){var a=(0,s.default)({},e[h],e[_]),i=(0,s.default)({},t[h],t[_]);Object.keys(g).map(function(e){return n._diff(a,i,e)})}else{var r=(0,s.default)({},t[h],t[_]);Object.keys(g).map(function(e){return r[e]&&n._notify(r[e],e),0})}}},{key:"_diff",value:function(e,t,n){var i=void 0,r=void 0;if(n.indexOf(".")>-1?(i=u.default.getObjectReference(n,e),r=u.default.getObjectReference(n,t)):(i=e[n],r=t[n]),i&&r)if(Array.isArray(i)){if(!u.default.arrayDeepEquals(i,r))return this._notify(r,n)}else{if("object"===(void 0===i?"undefined":a(i)))return this._diff(i,r,n);if(i!==r)return this._notify(r,n)}else if(i||r)return this._notify(r,n);return 0}},{key:"_notify",value:function(e,t){g[t]&&g[t].map(function(n){return n(t,e)})}},{key:"getTabId",value:function(){return _}},{key:"getSource",value:function(){return this._getData(r.default.SOURCE)}}]),e}();t.default=new I},11:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},110:function(e,t,n){var a=n(10),i=n(70),r=n(17)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),a(t)&&null===(t=t[r])&&(t=void 0)),void 0===t?Array:t}},116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=o(n(6)),r=o(n(44));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=e;return t&&t.widgets&&(t.widgets=s(t.widgets)),t}function s(e){var t=e;return t.forEach(function(e){switch(e.type){case"listinput":e.inputtype&&(e.inputType=e.inputType||e.inputtype,delete e.inputtype),e.boxcolor&&(e.optionColor=e.optionColor||e.boxcolor,delete e.boxcolor),e.options=e.options||e.boxes,delete e.boxes,e.options.forEach(function(e){e.imgsrc&&(e.imgSrc=e.imgSrc||e.imgsrc,delete e.imgsrc)});break;case"text":e.number&&r.default.isString(e.number)&&(e.number=parseInt(e.number,10));break;case"panel":e.widgets&&r.default.isArray(e.widgets)&&(e.widgets=s(e.widgets))}}),t}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"transformPage",value:function(e){return u(e)}},{key:"transform",value:function(e){var t,n,a,o=(0,i.default)({},e);o.workflowConfig&&(o.workflowConfig=(t=o.workflowConfig,n={},t.messaging&&(n.messaging=t.messaging),t.va&&(n.va=t.va),t.chat&&(n.chat=t.chat),t.assistAccountId&&(n.chat={}),t.vaApiKey&&(n.va={}),Object.keys(t).forEach(function(e){e.indexOf("assist")>-1&&"chat"!==e&&(n.chat[e]=t[e]),e.indexOf("va")>-1&&"va"!==e&&(n.va[e]=t[e])}),n)),o.windowPosition&&(o.windowPosition="left"===(a=o.windowPosition)?"bottomleft":"right"===a?"bottomright":a);var l,d,c,f,p,v,h,E,_=function(e){if(!1===e.branding)return!1;if(e.branding&&!1===e.branding.type)return!1;if(!1===e.brandingType)return!1;if(void 0!==e.brandingType){var t={};return t.type=e.brandingType,t.logoUrl=e.brandingLogoUrl,t.avatarUrl=e.brandingAvatarUrl,t.agentDesc=e.brandingAgentDesc,t}return e.branding}(o);return _?o.branding=_:delete o.branding,e.buttonFgColor&&(o.secondaryFgColor=e.buttonFgColor,o.tertiaryFgColor=e.buttonFgColor,delete o.buttonFgColor),o.headerBorderColor&&(o.header=(0,i.default)({},o.header,(l=o.headerBorderColor,(d={}).borderColor=l,d)),delete o.headerBorderColor),o.windowFontFamily&&(o.fontFamily=o.windowFontFamily,delete o.windowFontFamily),o.borderRadius&&(o.borderRadius=(c=o.borderRadius,"string"==typeof(f=c)&&(f=parseInt(c,10)),f)),o.frontendsService&&(o.frontendsService=(p=o.frontendsService,(v=(0,i.default)({},p)).services&&(v.opts=(0,i.default)({},v.services),delete v.services),v)),o.audioNotify&&o.audioNotify.message&&o.audioNotify.message.mp3&&(o.notifications={audio:{message:o.audioNotify.message.mp3,started:o.audioNotify.message.mp3,reconciled:o.audioNotify.message.mp3}},delete o.audioNotify),o.i18n&&o.i18n.uiStrings&&(o.i18n.uiStrings=(h=o.i18n.uiStrings,E=h,Object.keys(h).forEach(function(e){Object.keys(h[e]).forEach(function(t){E[e][t]=E[e][t].replace(/(\{\{)(.*?)(\}\})/gm,"%{$2}")})}),E)),o=function(e){var t=e;return["prechat","busy","offline","waiting"].forEach(function(e){t[e]&&t[e].widgets&&(t[e].widgets=s(t[e].widgets))}),["postchat","vaSurvey"].forEach(function(e){t.dialog&&t.dialog[e]&&t.dialog[e].widgets&&(t.dialog[e].widgets=s(t.dialog[e].widgets))}),t.cards&&t.cards.forEach(function(e){r.default.isArray(e.pages)&&e.pages.forEach(function(e){e=u(e)})}),t}(o)}}]),e}();t.default=new l},12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={TFS_HIDE_COBROWSE_ID:"tfs_hide_cobrowse",TFS_CONTAINER_ID:"tfs_container",TFS_CONTAINER_ROOT_ID:"tfs_container_root",TFS_CONTAINER_ROOT_PRE_ID:"tfs_container_root_pre",TFS_DRAG_ID:"tfs_drag",TFS_OVERLAY_ID:"tfs_overlay",TFS_IFRAME_ID:"tfs_interaction_iframe",TFS_SCRIPT_ID:"tfs-js-iframe-async",APPLE_SCRIPT_ID:"tfs-js-abc",TFS_RENDERER_SCRIPT_ID:"tfs-js-renderer",VISITOR_SESSION_ID:"visitorSessionId",INTERACTION_ID:"interactionId",CHAT:"chat",QUEUE:"queue",CHAT_STATUS:"chatStatus",TAB_SESSION_KEY:"tab-session-key",BROWSER_SESSION_KEY:"browser-session-key",PREVIOUS_WINDOW_NAME:"previous-window-name",LAST_UPDATED_TIME:"ts",SOURCE:"source",CARDS_RESOURCE_NAME:"cards.js",CARDS_MIN_RESOURCE_NAME:"cards.min.js",WIDGET_LOADER_ID:"widget-loader",XD_SCRIPT_RESOURCE_NAME:"xd.js",XD_SCRIPT_MIN_RESOURCE_NAME:"xd.min.js",REQUIRED_KEYS:["app.context.queue","app.context.accountId","chat.visitorSessionId","chat.domainAliases","chat.startTime","va.turnsId","va.noInput","va.poller","va.vaSurveyCompleted","messaging.userTokenId","messaging.pollInterval","widgetLoaded","initialWorkflow","reload","displayMode","asid","appId"],WORKFLOW:"workflow",PRECHAT_DATA_KEYS:{ACTIVE_SESSION:"asid",RULE_ID:"sc",APP_INTERACTION_ID:"appInteractionId",RULE_CATEGORY:"rc",VISITOR_ID:"vi"},STORE_UPDATE:"STORE_UPDATE",STORE_DELETE:"STORE_DELETE",DISPLAY_MODE:{FULLSCREEN:"fullscreen",FLOATING:"floating",NONE:"none"},FRAME_VIEW:{INPAGE:"inpage",POPUP:"popup"},WIDGET_STATE:{WIDGET_LOADING:"widgetLoading",WIDGET_LOADED:"widgetLoaded",CHAT_REQUESTED:"chatRequested",CHAT_CONNECTING:"chatConnecting",CHAT_RECONCILING:"chatReconciling",CHAT_STARTED:"chatStarted",CHAT_INTERACTIVE:"chatInteractive",CHAT_ENDED:"chatEnded",CHAT_TRANSFERRED:"chatTransferred",VA_STARTED:"vaStarted",VA_ESCALATE:"vaEscalatedToChat",VA_SURVEY_COMPLETED:"vaSurveyCompleted",VA_TERMINATE:"vaTerminated",MINIMIZED:"minimized",MAXIMIZED:"maximized",WIDGET_CLOSED:"widgetClosed"},ORIENTATIONS:{LANDSCAPE:"landscape",PORTRAIT:"portrait"},JOURNEY:"urls",WIDGET_LOADED:"widgetLoaded",INITIAL_WORKFLOW:"initialWorkflow",INITIATOR:"initiator",SHOW_ON_RELOAD:"reload",DISPLAY_MODE_KEY:"displayMode",CONTENT_PATH:"content",UDE_CONFIG_JSON:"config.json",CONFIG_APP_ID:"appId",TAB_STORAGE_KEY:"tfs-tab",APP_SESSION_KEY:"app",CHAT_SESSION_KEY:"chat",VA_SESSION_KEY:"va",CARDS_SESSION_KEY:"cards",MESSAGING_SESSION_KEY:"messaging",XD_COMMANDS:{INITIALIZE:"init",INITIALIZE_ERROR:"init-error",SET:"set",GET:"get",REMOVE:"remove",UPDATE:"update"},ERROR_CODES:{LOCALSTORAGE_UNAVAILABLE:"LOCALSTORAGE_UNAVAILABLE"},TRACK_PLATFORMS:{chat:"CHAT",va:"VIRTUAL_AGENT"},STATE_CHANGE_EVENT:"stateChange",POSITION:{TOP_LEFT:"topleft",TOP_RIGHT:"topright",BOTTOM_LEFT:"bottomleft",BOTTOM_RIGHT:"bottomright"},INITIAL_STATE:"initialState",IS_RECONCILED:"isReconciled",IFRAME_READY:"iframeReady",VA_TURNS_ID_KEY:"va.turnsId",VISITOR_SESSION_ID_KEY:"chat.visitorSessionId",DOMAIN_ALIASES_KEY:"chat.domainAliases",DEFAULT_CONFIG:"default",USER_LOGIN:"login",USER_PROFILE:"userProfile",MAX_KEYBOARD_HEIGHT:{LANDSCAPE:[{MIN_SCREEN_HEIGHT:600,MAX_SCREEN_HEIGHT:850,KEYBOARD_HEIGHT:400},{MIN_SCREEN_HEIGHT:851,MAX_SCREEN_HEIGHT:1100,KEYBOARD_HEIGHT:475}],PORTRAIT:[{MIN_SCREEN_HEIGHT:800,MAX_SCREEN_HEIGHT:1150,KEYBOARD_HEIGHT:315},{MIN_SCREEN_HEIGHT:1151,MAX_SCREEN_HEIGHT:1500,KEYBOARD_HEIGHT:380}]},STYLE_STATE:{MAXIMIZED:"maximized",MINIMIZED:"minimized",CARD:"card",PLUSCARD:"pluscard",HIDDEN:"hidden"},STYLE_TRANSITION:{IMMEDIATE:"immediate",SCROLL:"scroll",RESIZE:"resize"},STORAGE_TYPES:{LOCALSTORAGE:"localstorage",CUSTOM:"custom",XD:"xd"},STORAGE_KEY_NAMES:{USER_SESSION:"tfs-user-session",TAB_SESSION:"tfs-session",TAB_PREFIX:"tfs-tab-"}}},121:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=d(n(3)),r=d(n(61)),o=d(n(33)),u=d(n(6)),s=d(n(68)),l=d(n(681));function d(e){return e&&e.__esModule?e:{default:e}}var c=!1,f=!1,p=(new Date).getTime(),v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"init",value:function(e,t,n){var a=this;i.default.notEmpty(e),i.default.isObject(t),i.default.notEmpty(t.baseUrl),i.default.notEmpty(t.apiKey),i.default.isObject(n),this.loggerConfig=t.opts.logger,this.loggerConfig&&(i.default.isObject(this.loggerConfig),i.default.isNumber(this.loggerConfig.level),i.default.isNumber(this.loggerConfig.flushTrigger)),this._basePath=[t.baseUrl,"clients",e,"applications"].join("/"),this._extraData=n,this._apiKey=t.apiKey,this._flushTrigger=this.loggerConfig.flushTrigger,this._logLevel=this.loggerConfig.level,this._interactions=[],window.addEventListener("beforeunload",function(){a._interactions.length>0&&a.logFlush()}),f=!0}},{key:"setAppId",value:function(e){i.default.notEmpty(e),this._appId=e,c=!0}},{key:"setAppInteractionId",value:function(e){i.default.notEmpty(e),this._extraData.appInteractionId=e}},{key:"unsetAppInteractionId",value:function(){delete this._extraData.appInteractionId}},{key:"logInteraction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(c&&f){var n=e,a=n.logLevel;if(i.default.isNumber(a),a){if(a<this._logLevel)return}else;var r={version:"ude-1.25.3",tsOffset:(new Date).getTime()-p,time:l.default.formatDate(new Date),tabVisible:s.default.documentHasFocus()};n.logLevel=o.default.LOG_LEVEL_STRING[a],n.logData=(0,u.default)({},this._extraData,n.logData,r),this._interactions.push(n),(t||this._interactions.length>=this._flushTrigger)&&this.logFlush()}}},{key:"logFlush",value:function(){var e=this._interactions;this._interactions=[];var t=this._basePath+"/"+this._appId+"/interactions";h.makeRequest("post",t,{"Content-Type":"application/json; charset=utf-8",Authorization:this._apiKey},JSON.stringify(e),function(e){},function(e){e.response&&e.response.status})}}]),e}(),h=new r.default;t.default=new v},122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"isPopup",value:function(){return window._tfs&&window._tfs.isPopup}},{key:"getWindowParams",value:function(){var e=!1;try{var t=atob(window.name.replace(/_a/g,"+").replace(/_b/g,"/").replace(/_c/g,"="));e=JSON.parse(t)}catch(e){}return e}},{key:"generateSecureWindowName",value:function(e){var t=!1;try{var n=JSON.stringify(e);t=btoa(n).replace(/\+/g,"_a").replace(/\//g,"_b").replace(/=/g,"_c")}catch(e){}return t}}]),e}();t.default=new i},123:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=o(n(106)),r=o(n(9));function o(e){return e&&e.__esModule?e:{default:e}}var u=void 0,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"init",value:function(e){this.isFullScreen=e,this.isFullScreen&&(this.sendMessage(i.default.IFRAME_POST_MESSAGE.GET_BODY_CSS),window.addEventListener("message",this._onInboundMessageReceived.bind(this)))}},{key:"_onInboundMessageReceived",value:function(e){var t=r.default.get(["data"],e);if(!r.default.isUndefinedorNull(t)){try{t=JSON.parse(t)}catch(e){return}if(t.msgSrc===i.default.IFRAME_INBOUND_MESSAGE.MESSAGE_SOURCE)switch(t.msg){case i.default.IFRAME_INBOUND_MESSAGE.RESP_GET_BODY_CSS:u=t.css||{}}}}},{key:"sendMessage",value:function(e,t,n){switch(e){case i.default.IFRAME_POST_MESSAGE.SET_IFRAME_CSS:parent.postMessage(JSON.stringify({msg:e,css:t,clean:n}),"*");break;case i.default.IFRAME_POST_MESSAGE.SET_IFRAME_VIEWPORT:parent.postMessage(JSON.stringify({msg:e,content:t}),"*");break;case i.default.IFRAME_POST_MESSAGE.GET_BODY_CSS:parent.postMessage(JSON.stringify({msg:e}),"*");break;case i.default.IFRAME_POST_MESSAGE.SET_BODY_CSS:this.isFullScreen&&(t.isMaximized?parent.postMessage(JSON.stringify({msg:e,css:t.css,clean:n}),"*"):parent.postMessage(JSON.stringify({msg:e,css:u,clean:n}),"*"))}}}]),e}();t.default=new s},127:function(e,t,n){var a=n(31),i=n(26),r=n(50),o=n(22);e.exports=function(e,t,n,u,s){a(t);var l=i(e),d=r(l),c=o(l.length),f=s?c-1:0,p=s?-1:1;if(n<2)for(;;){if(f in d){u=d[f],f+=p;break}if(f+=p,s?f<0:c<=f)throw TypeError("Reduce of empty array with no initial value")}for(;s?f>=0:c>f;f+=p)f in d&&(u=t(u,d[f],f,l));return u}},13:function(e,t,n){var a=n(10);e.exports=function(e){if(!a(e))throw TypeError(e+" is not an object!");return e}},14:function(e,t,n){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){},o=window;var u=function(e){if(!o&&"object"===a(n)&&n.exports)return{ieVersion:-1,safariVersion:-1,chromeVersion:-1,isMobileSafari:!1,isAndroidTablet:!1,isAndroid:!1,isIpad:!1,isTablet:!1,iosVersion:-1,isPhone:!1,getDevice:"unknown"};var t=/.*Trident.*rv:(\d+)/,i=/Edge\/(\d+)\./,r=function(){var n,a,r=function(){var e=3,t=document.createElement("div"),n=void 0;do{e+=1,t.innerHTML="\x3c!--[if gt IE "+e+"]><i></i><![endif]--\x3e",n=t.getElementsByTagName("i")}while(n[0]);return e>4?e:void 0}();return r||(o.ActiveXObject?10:(n=void 0,(a=t.exec(e))&&(n=parseInt(a[1],10)),(a=i.exec(e))&&(n=parseInt(a[1],10)),n))}(),u=void 0,s=void 0;/Safari\/([0-9.]+)/.test(e)&&/Version\/([0-9.]+)/.test(e)&&(u=RegExp.$1),/Chrome\/([0-9.]+)/.test(e)&&(s=RegExp.$1,u=void 0),r&&(document.documentElement.className+=" ie"+r);var l=-1!==e.indexOf("AppleWebKit")&&e.match(/(iPod|iPhone|iPad)/),d=-1!==e.indexOf("Android"),c=d&&-1===e.indexOf("Mobile"),f=l&&"iPad"===l[0],p=c||f,v=(d||l)&&!p,h=e.match(/(Macintosh)/),E=e.match(/OS (\d+)_(\d+)_?(\d+)?/),_=l&&E&&E.length>1?parseInt(E[1],10):0,g=function(e){return!!e};return{ieVersion:r,safariVersion:u,chromeVersion:s,isMobileSafari:g(l),isAndroidTablet:c,isAndroid:d,isIpad:g(f),isTablet:g(p),iosVersion:_,isPhone:g(v),isMac:g(h),getDevice:function(){var e="desktop";return v&&(e="phone"),p&&(e="tablet"),e}}},s=function(e){function t(e){i(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.message=e,n.name="InvalidCharacterError",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();t.default=new function t(){return i(this,t),o&&function(){if(!o.location.origin){var t=o.location.port,n="";t&&"80"!==t&&"443"!==t&&(n=":"+t),o.location.origin=o.location.protocol+"//"+o.location.hostname+n}o.console||(o.console={log:r,debug:r,warn:r,error:r}),o.onbeforeunload||(o.onbeforeunload=r),document.head||(document.head=document.getElementsByTagName("head")[0]),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});
// @license https://github.com/inexorabletash/polyfill/blob/master/LICENSE.md
var a=e.Element?"Element":"HTMLElement";if(!("dataset"in document.createElement("span"))&&a in e&&e[a].prototype&&Object.defineProperty&&Object.defineProperty(e[a].prototype,"dataset",{get:function(){for(var e=Object.create(null),t=0;t<this.attributes.length;++t){var n=this.attributes[t];n.specified&&"data-"===n.name.substring(0,5)&&function(t,n){var a=n.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()});e[a]=t.getAttribute("data-"+n),Object.defineProperty(e,a,{get:function(){return t.getAttribute("data-"+n)},set:function(e){t.setAttribute("data-"+n,e)}})}(this,n.name.substring(5))}return e}}),"function"!=typeof o.CustomEvent){var i=function(e,t){var n=t||{bubbles:!1,cancelable:!1,detail:void 0},a=document.createEvent("CustomEvent");return a.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),a};i.prototype=o.Event.prototype,o.CustomEvent=i}if(!o.atob&&!o.btoa){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.btoa=function(e){for(var t=String(e),n=void 0,a=void 0,i=0,r=u,o="";t.charAt(0|i)||(r="=",i%1);o+=r.charAt(63&n>>8-i%1*8)){if((a=t.charCodeAt(i+=.75))>255)throw new s("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|a}return o},o.atob=function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new s("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,a,i=0,r=0,o="";a=t.charAt(r++);~a&&(n=i%4?64*n+a:a,i++%4)?o+=String.fromCharCode(255&n>>(-2*i&6)):0)a=u.indexOf(a);return o}}}(),u(o.navigator.userAgent)}}).call(t,n(42),n(85)(e))},147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CONFIG_API_ACTION:{PRECHAT_SUBMIT:"prechatSubmit",CHAT_TRANSFERRED:"chatTransferred",CHAT_CONNECTING:"chatConnecting",CHAT_RECONCILING:"chatReconciling",WIDGET_LOADING:"widgetLoading"}}},15:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(43),o=(a=r)&&a.__esModule?a:{default:a};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"lpad",value:function(e,t,n){var a=n||"0",i=""+e;return i.length>=t?i:new Array(t-i.length+1).join(a)+i}},{key:"trigger",value:function(e,t){if("createEvent"in document){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)}else e.fireEvent("on"+t)}},{key:"openWindow",value:function(e,t,n){var a=o.default.normalizeUrl(e);window.open(a,t,n)}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"isBlank",value:function(e){return!this.isString(e)||0===e.length}},{key:"arrayDeepEquals",value:function(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}},{key:"setValueWithPath",value:function(e,t,n,a){var i=n.split(t);i.reduce(function(e,t,n){var r=e;return n<i.length-1?r[t]=r[t]||{}:r[t]=a,r[t]},e)}},{key:"noop",value:function(){}},{key:"getObjectReference",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e)return t;for(var n=t,a=e.split("."),i=0;i<a.length;i+=1)if(!(n=n[a[i]]))return;return n}},{key:"getFunctionReference",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{var a=e.split("."),i=a.pop(),r=this.getObjectReference(a.join("."),t),o=r[i];if("function"!=typeof o)return;return n?o.bind(r):o}catch(e){}}}]),e}();t.default=new u},152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=f(n(6)),r=f(n(21)),o=f(n(7)),u=f(n(123)),s=f(n(9)),l=f(n(14)),d=f(n(12)),c=f(n(106));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._parentBody=void 0,this._parentBodyStyle="",this._initialized=!1}return a(e,[{key:"init",value:function(e){this._parentBody=e.frameInFrame?document.body:parent.document.body,l.default.isMobileSafari||(this._initialized=!0),this._initialized||(this._parentBodyStyle=this._parentBody.hasAttribute("style")?this._parentBody.getAttribute("style"):"",this._initialized=!0),this._securityRestrictions=e}},{key:"setStyle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._securityRestrictions.frameInFrame){u.default.sendMessage(c.default.IFRAME_POST_MESSAGE.SET_IFRAME_CSS,t,n);r.default.setStyle(e,{height:"100%",width:"100%"})}else r.default.setStyle(e,t,n)}},{key:"redrawWidget",value:function(e,t){l.default.isMobileSafari&&l.default.iosVersion<=8&&r.default.redrawElement(e,(0,i.default)({},t,{bottom:"1px"}),t)}},{key:"changeBodyStyle",value:function(e){if(e===c.default.IFRAME_BODY&&document.body&&document.body.setAttribute("style","overflow: hidden"),l.default.isMobileSafari&&!l.default.isTablet)if(e===d.default.WIDGET_STATE.MAXIMIZED){if(this._parentBody){var t="position:fixed;display:block;height:100%;width:100%;height:100vh;width:100vw;";this._securityRestrictions.frameInFrame&&u.default.sendMessage(c.default.IFRAME_POST_MESSAGE.SET_BODY_CSS,{css:t,isMaximized:!0},!0),this._parentBody.setAttribute("style",t)}r.default.getOrientation()===d.default.ORIENTATIONS.PORTRAIT&&o.default.requestTimeout(this.scrollWindowOnTopOfKeyboard.bind(this),100)}else s.default.isUndefinedorNull(this._parentBody)||this._parentBody.setAttribute("style",this._parentBodyStyle),this._securityRestrictions.frameInFrame&&u.default.sendMessage(c.default.IFRAME_POST_MESSAGE.SET_BODY_CSS,{},!0)}},{key:"scrollWindowOnTopOfKeyboard",value:function(){this._securityRestrictions.frameInFrame?window.scrollTo(0,this._parentBody.clientHeight-this._parentBody.scrollTop):parent.window.scrollTo(0,this._parentBody.clientHeight-this._parentBody.scrollTop)}}]),e}();t.default=new p},153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=O(n(12)),r=O(n(19)),o=O(n(33)),u=O(n(152)),s=O(n(15)),l=O(n(6)),d=O(n(122)),c=O(n(9)),f=O(n(154)),p=O(n(14)),v=O(n(107)),h=O(n(121)),E=O(n(386)),_=O(n(79)),g=O(n(338)),I=O(n(686)),y=O(n(396)),T=O(n(339)),m=O(n(28)),S=O(n(7)),b=O(n(3)),A=O(n(20));function O(e){return e&&e.__esModule?e:{default:e}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=!1,k=void 0,R=!1,N=!1,D=window,M=void 0,L=void 0,P="default",x={},F=void 0,U=void 0,B={app:{},va:{},messaging:{}},j=[];function Y(e){var t=!1;return N&&(T.default.send(r.default.CONTEXT,e),t=!0),t}function G(e){e.preventDefault()}function H(){var e,t=w({},i.default.WIDGET_LOADED,!1);d.default.isPopup()&&k===i.default.STORAGE_TYPES.CUSTOM&&(t=(0,l.default)({},t,(w(e={},i.default.SHOW_ON_RELOAD,!1),w(e,"syncCustomStorage",!0),e)));v.default.browser.set(t)}function V(){var e={messaging:{brandUserId:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",userTokenId:"",pollInterval:""}};v.default.browser.set(e),T.default.checkIntercom()?T.default.send(r.default.INTERACTION,e):B=(0,l.default)({},B,e)}D.addEventListener("touchstart",function e(){!C||p.default.isTablet||p.default.isPhone||(h.default.logInteraction({logLevel:o.default.LOG_LEVEL.INFO,message:o.default.LOG_EVENTS.SYSTEM_DEBUG,logData:{action:"USER_TOUCH_DETECTED_ON_DESKTOP"}},!0),D.removeEventListener("touchstart",e))},!1);var W=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"init",value:function(e){var t=this;if(!C){L=e.onStateChange,U=e.metaData,P=e.appId,k=e.storageType;var n=e.windowName,a=_.default.get(P);if(y.default.init({metaData:U,securityRestrictions:e.securityRestrictions}),I.default.init({metaData:U,storageType:k}),d.default.isPopup()||v.default.addListener(i.default.WIDGET_LOADED,function(e,n){var a=!!n;g.default.setInteractionActive(a),a||t.cleanUp(),u.default.changeBodyStyle(),f.default.alter(!1)}),!d.default.isPopup()||p.default.isTablet||p.default.isPhone||v.default.addListener(i.default.DISPLAY_MODE_KEY,function(e,n){c.default.isEmptyorNull(n)&&t.closePopupView()}),v.default.browser.get(i.default.SHOW_ON_RELOAD)){var r=!1,o=v.default.browser.get(i.default.CHAT_SESSION_KEY),l=!1;if(a.apis.forceEndInteraction){var h=s.default.getFunctionReference(a.apis.forceEndInteraction);l=!!h&&h()}l&&!o&&(v.default.removeSessionData(),v.default.browser.set(i.default.WIDGET_LOADED,!1),v.default.browser.set(i.default.SHOW_ON_RELOAD,!1),r=!0),d.default.isPopup()&&(B.app.isPopup=!0,D.addEventListener("beforeunload",G),D.addEventListener("unload",H),M=d.default.getWindowParams(),D.name=n),r||this.reconcileWidget()}else d.default.isPopup()?(B.app.isPopup=!0,D.addEventListener("beforeunload",G),D.addEventListener("unload",H),M=d.default.getWindowParams(),y.default.start(P,"",M.overrideConfig,F),D.name=n):v.default.browser.set(i.default.WIDGET_LOADED,!1);C=!0}}},{key:"startInteraction",value:function(e,t,n){if(C){P=e,x=n,v.default.tab.set(i.default.INITIATOR,!0);var a=_.default.get(e);d.default.isPopup()||!a.popupWindow.initial||p.default.isTablet||p.default.isPhone?y.default.start(P,t,n,F):I.default.start(P,n)}}},{key:"sendSystemMessage",value:function(e){var t=!1;return N&&(T.default.send(r.default.SYSTEMMSG,e),t=!0),t}},{key:"sendContext",value:function(e){Y(e)}},{key:"isWidgetLoaded",value:function(){return!!v.default.browser.get(i.default.WIDGET_LOADED)}},{key:"updateState",value:function(e){if(e[i.default.SOURCE]!==v.default.getTabId()&&T.default.checkIntercom()){var t=(0,l.default)({},e[i.default.STORAGE_KEY_NAMES.TAB_SESSION],e[v.default.getTabId()]);T.default.send(r.default.INTERACTION,t)}}},{key:"isWidgetReconciled",value:function(){return R}},{key:"getInitialState",value:function(){return B}},{key:"resetInitialState",value:function(){B={app:{},va:{},messaging:{}}}},{key:"update",value:function(e,t){switch(e){case i.default.INITIAL_STATE:B=(0,l.default)({},B,t);break;case i.default.IS_RECONCILED:R=t;break;case i.default.IFRAME_READY:(N=t)&&this.onIframeReady()}}},{key:"onIframeReady",value:function(){var e,t,n,a=_.default.get(P);if(R){!function(e){if(!d.default.isPopup()){var t=void 0;p.default.isPhone?t=!0:v.default.isExistingTab||(t=!e),c.default.isUndefinedorNull(t)||(B.app.minimized=t,v.default.tab.set({app:{minimized:t}}))}}(!!a.forceMaximizeInNewTab);var r=v.default.tab.get(i.default.INITIATOR);(!r||r&&a.popupWindow.initial)&&(e=v.default.browser.get(i.default.VA_SESSION_KEY)||{},t=e.poller,n=e.turnsId,!t&&n&&(B.va.poller=!0,v.default.browser.set({va:{poller:!0}})))}var o=v.default.tab.get(i.default.APP_SESSION_KEY);o&&!0===o.minimized?this.handleStateChange({widgetState:i.default.WIDGET_STATE.MINIMIZED}):this.handleStateChange({widgetState:i.default.WIDGET_STATE.MAXIMIZED})}},{key:"sendInitData",value:function(){var e=_.default.get(P),t=m.default.getContext(),n=v.default.browser.get(i.default.MESSAGING_SESSION_KEY);T.default.send(r.default.CONFIG,{config:e,context:t}),T.default.send(r.default.EXTENSIBLE_LISTENERS,{listeners:j}),R&&(B=(0,l.default)({},B,v.default.browser.get(),v.default.tab.get())),n&&(B=(0,l.default)({},B,{messaging:n})),d.default.isPopup()?B.app.storageType=M.storageType:(B.app.storageType=k,B.app.popupWindowConfig=I.default.getPopupWindowConfig(P,x)),T.default.send(r.default.INTERACTION,B)}},{key:"handleStateChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(e.widgetState){case i.default.WIDGET_STATE.CHAT_STARTED:Y(w({},i.default.JOURNEY,E.default.getJourneyEncoded()))}try{L(e),D.dispatchEvent(new CustomEvent(i.default.STATE_CHANGE_EVENT,{detail:e}))}catch(e){}}},{key:"onCustomCardAction",value:function(e){b.default.notEmpty(e.id,"data.id"),b.default.notEmpty(e.name,"data.name");var t=_.default.get(P),n=s.default.getFunctionReference(t.apis.onCustomCardAction);n||this.sendCustomCardResponse(e.id,e.name,!1,{}),n(e.id,e.name,{})}},{key:"login",value:function(e){e&&V(e.trim())}},{key:"logout",value:function(){V()}},{key:"getSessionContext",value:function(){var e=v.default.browser.get(i.default.CHAT_SESSION_KEY),t={};e&&(t[i.default.INTERACTION_ID]=e[i.default.INTERACTION_ID],t[i.default.VISITOR_SESSION_ID]=e[i.default.VISITOR_SESSION_ID]);var n=m.default.getContext()[i.default.PRECHAT_DATA_KEYS.APP_INTERACTION_ID];return n&&(t[i.default.PRECHAT_DATA_KEYS.APP_INTERACTION_ID]=n),t}},{key:"setUserProfile",value:function(e){e&&v.default.browser.set(i.default.USER_PROFILE,e)}},{key:"setParentElement",value:function(e){b.default.isObject(e,"parentElement"),F=e}},{key:"sendCustomCardResponse",value:function(e,t,n,a){T.default.checkIntercom()&&T.default.send(r.default.CARD,{id:e,cardName:t,isSuccess:n,responseData:a,cardState:A.default.CARD_STATE.PROCESS,type:A.default.CARD_TYPES.CUSTOM})}},{key:"addExtensibleListener",value:function(e){j=e}},{key:"dispatchAction",value:function(e,t){T.default.checkIntercom()&&T.default.send(r.default.DISPATCH_ACTION,{actionName:e,actionData:t})}},{key:"cleanUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.default.noop;C&&(y.default.stop(),I.default.resetPopupWindow(),v.default.browser.set(i.default.SHOW_ON_RELOAD,!1),v.default.browser.set(i.default.DISPLAY_MODE_KEY,""),v.default.browser.set(i.default.INITIAL_WORKFLOW,""),v.default.tab.set(i.default.INITIATOR,!1),v.default.removeSessionData([i.default.CONFIG_APP_ID,i.default.APP_SESSION_KEY,i.default.CHAT_SESSION_KEY,i.default.VA_SESSION_KEY,i.default.CARDS_SESSION_KEY]),this.update(i.default.IFRAME_READY,!1),this.update(i.default.IS_RECONCILED,!1),_.default.reset(P),T.default.clear(),S.default.requestTimeout(e,300))}},{key:"reconcileWidget",value:function(){if(!R){R=!0;var e={},t=v.default.browser.get(i.default.INITIAL_WORKFLOW);t&&(e.workflow=t);var n=m.default.getContext(),a=n&&n.dockId?n.dockId:"";y.default.start(P,a,e,F)}}},{key:"hideInpageView",value:function(){v.default.browser.set(i.default.DISPLAY_MODE_KEY,i.default.DISPLAY_MODE.NONE),y.default.updateState(i.default.STYLE_STATE.HIDDEN)}},{key:"showInpageView",value:function(){v.default.browser.set(i.default.DISPLAY_MODE_KEY,"");var e=v.default.tab.get(i.default.APP_SESSION_KEY);e&&e.minimized?y.default.updateState(i.default.STYLE_STATE.MINIMIZED):y.default.updateState(i.default.STYLE_STATE.MAXIMIZED)}},{key:"closePopupView",value:function(){D.removeEventListener("beforeunload",G),D.removeEventListener("unload",H),D.close()}}]),e}();t.default=new W},154:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=o(n(106)),r=o(n(123));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._chatVpContent="shrink-to-fit=no,width=device-width,height=device-height,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no",this._oldVpContent="",this._viewport=void 0,this._initialized=!1}return a(e,[{key:"init",value:function(e){var t=document;if(p&&!this._initialized){var n=t.head||t.getElementsByTagName("head")[0];this._viewport=t.querySelector("meta[name=viewport]"),this._viewport?this._oldVpContent=this._viewport.content:(this._viewport=t.createElement("meta"),this._viewport.name="viewport",this._viewport.content="",n.appendChild(this._viewport)),this._securityRestrictions=e,this._initialized=!0}}},{key:"alter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._initialized&&(this._viewport.content=e?this._chatVpContent:this._oldVpContent,this._securityRestrictions.frameInFrame&&r.default.sendMessage(i.default.IFRAME_POST_MESSAGE.SET_IFRAME_VIEWPORT,this._viewport.content))}}]),e}(),s=window.navigator.userAgent,l=-1!==s.indexOf("AppleWebKit")&&s.match(/(iPod|iPhone|iPad)/),d=-1!==s.indexOf("Android"),c=d&&-1===s.indexOf("Mobile"),f=l&&"iPad"===l[0],p=(d||l)&&!(c||f);t.default=new u},155:function(e,t,n){"use strict";var a=n(2),i=n(127);a(a.P+a.F*!n(41)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},156:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(n(390)),i=u(n(393)),r=u(n(394)),o=u(n(15));function u(e){return e&&e.__esModule?e:{default:e}}t.default={parseConfig:function(e){var t={};return Object.keys(e).map(function(n){return function e(t,n,a){var i=t,r=!1,o=n.match(/(.+?)\.(.*)/),u=void 0,s=void 0;o?(u=o[1],s=o[2]):(u=n,r=!0);var l=u.match(/(.+?)\$(\d+)/),d=void 0,c=void 0;return l?(d=l[1],c=parseInt(l[2],10)):d=u,"number"==typeof c?(i[d]=i[d]||[],r?(i[d][c]=a,i):(i[d][c]=i[d][c]||{},e(i[d][c],s,a),i)):r?(i[n]=a,i):(i[d]=i[d]||{},e(i[d],s,a))}(t,n,e[n])}),t},getTemplate:function(e){return{generic:a.default,"client-managed":i.default,direct:r.default}[e]||o.default.getFunctionReference(e,void 0,!1)}}},158:function(e,t,n){n(155),e.exports=n(16).Array.reduce},16:function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=s(n(68)),r=s(n(21)),o=s(n(7)),u=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioContainer=r.default.createElement("div",{style:"display: none"}),"complete"!==document.readyState?o.default.requestTimeout(function(){d.body.appendChild(t.audioContainer)},100):d.body.appendChild(this.audioContainer)}return a(e,[{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.default.notEmpty(e,"AudioNotification::id"),!c[e]&&(c[e]=r.default.createElement("audio",{preload:"auto",controls:"false",hidden:"true"},[r.default.createElement("source",{src:t.mp3,type:"audio/mpeg"})]),this.audioContainer.appendChild(c[e]),!0)}},{key:"deregister",value:function(e){return u.default.notEmpty(e,"AudioNotification::id"),!!c[e]&&(c[e].parentNode.removeChild(c[e]),delete c[e],!0)}},{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!c[e])return!1;if(t||i.default.documentHasFocus()){try{c[e].play()}catch(e){return!1}return!0}return!1}},{key:"volume",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return!!c[e]&&(c[e].volume=t,!0)}},{key:"mute",value:function(e){return this.volume(e,0)}},{key:"unmute",value:function(e){return this.volume(e)}},{key:"destroy",value:function(){this.audioContainer.parentNode.removeChild(this.audioContainer)}}]),e}(),d=document,c={};t.default=new l},17:function(e,t,n){var a=n(62)("wks"),i=n(46),r=n(8).Symbol,o="function"==typeof r;(e.exports=function(e){return a[e]||(a[e]=o&&r[e]||(o?r:i)("Symbol."+e))}).store=a},18:function(e,t,n){e.exports=!n(11)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=p(n(3)),r=p(n(12)),o=p(n(44)),u=p(n(9)),s=p(n(6)),l=p(n(14)),d=p(n(99)),c=p(n(7)),f=p(n(184));function p(e){return e&&e.__esModule?e:{default:e}}var v=["localStorage","sessionStorage"],h=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),-1===v.indexOf(t))throw new Error("WebStorage: "+t+" is not supported");if(this._storeName=t,this._store=window[t],this._storageKey=n,!this.isStorageAvailable())throw new Error(r.default.ERROR_CODES.LOCALSTORAGE_UNAVAILABLE);this._storeExists()||this._initialize()}return a(e,[{key:"_storeExists",value:function(){return!!this._store.getItem(this._storageKey)}},{key:"_initialize",value:function(){var e={};e[r.default.LAST_UPDATED_TIME]=(new Date).getTime(),this._store.setItem(this._storageKey,d.default.encode(JSON.stringify(e)))}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.default.notEmpty(e,"WebStorage: set key");var a=this.getAll()||{};if(this._pollOldValue=a,o.default.isObject(t))a[e]||(a[e]={}),a[e]=(0,s.default)({},a[e],t);else if(o.default.isString(t)||o.default.isArray(t))a[e]=t;else{if(!o.default.isBoolean(t)&&!o.default.isNumber(t))throw new Error('WebStorage::set type-mismatch for "'+t+'", expecting object, string, boolean, array or number');a[e]=t.toString()}a[r.default.LAST_UPDATED_TIME]=(new Date).getTime(),n.tabId&&(a[r.default.SOURCE]=n.tabId),this._store.setItem(this._storageKey,d.default.encode(JSON.stringify(a)))}},{key:"getAll",value:function(){var e=void 0,t=this._store.getItem(this._storageKey);if(t)try{e=JSON.parse(d.default.decode(t))}catch(e){}return e}},{key:"get",value:function(e){return i.default.notEmpty(e,"WebStorage: key"),this.getAll()[e]}},{key:"remove",value:function(e,t){var n=this.getAll()||{};t&&t.length>0?n[e]=u.default.removeSpecificKeys(n[e],t):n[e]={},this._store.setItem(this._storageKey,d.default.encode(JSON.stringify(n)))}},{key:"addStorageListener",value:function(e){var t=this;l.default.ieVersion&&9!==l.default.isVersion?this._pollForStorage(e):window.addEventListener("storage",function(n){if(n.key===t._storageKey)try{var a=JSON.parse(d.default.decode(n.oldValue))||{},i=JSON.parse(d.default.decode(n.newValue))||{};e({key:t._storageKey,oldValue:a,newValue:i})}catch(e){}})}},{key:"_pollForStorage",value:function(e){var t=this;c.default.requestTimeout(function(){try{t._store.setItem("tfs-ie11","1"),t._store.removeItem("tfs-ie11"),JSON.stringify(t._pollOldValue)!==JSON.stringify(t.getAll())&&(e({newValue:t.getAll()||{},oldValue:t._pollOldValue||{},key:t._storageKey}),t._pollOldValue=t.getAll())}catch(e){}t._pollForStorage(e)},500)}},{key:"isStorageAvailable",value:function(){var e=f.default[this._storeName];return e}}]),e}();t.default=h},184:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=!1;try{var n=window[e];n.setItem("testLS","works");var a=n.getItem("testLS");n.removeItem("testLS"),t="works"===a}catch(e){}return t};t.default={localStorage:a("localStorage"),sessionStorage:a("sessionStorage")}},19:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={STYLE:"style",READY:"ready",INTERACTION:"interaction",CONFIG:"config",CONTEXT:"context",SYSTEMMSG:"systemmsg",DESTROY:"destroy",STATE_CHANGE:"state_change",TRACK_INTERACTION:"track_interaction",TRACK_EVENT:"track_event",TRACK:{PRE_CHAT_SHOWN:"prechatShown",PRE_CHAT_SUBMIT:"prechatSubmit",EXIT_SURVEY_SHOWN:"exitSurveyShown",EXIT_SURVEY_SUBMIT:"exitSurveySubmit",CARD_INVITED:"cardInvited",CARD_SHOWN:"cardAccepted",CARD_SUBMITTED:"cardSubmitted",QUEUE_AFTER_HOURS:"queueAfterHours"},CARD:"card",NOTIFICATION:"notification",COBROWSE:"cobrowse",EXTENSIBLE_LISTENERS:"extensible_listeners",DISPATCH_ACTION:"dispatchAction",SHOW_INPAGE_VIEW:"showInpageView",HIDE_INPAGE_VIEW:"hideInpageView"}},2:function(e,t,n){var a=n(8),i=n(16),r=n(29),o=n(36),u=n(34),s=function(e,t,n){var l,d,c,f,p=e&s.F,v=e&s.G,h=e&s.S,E=e&s.P,_=e&s.B,g=v?a:h?a[t]||(a[t]={}):(a[t]||{}).prototype,I=v?i:i[t]||(i[t]={}),y=I.prototype||(I.prototype={});for(l in v&&(n=t),n)c=((d=!p&&g&&void 0!==g[l])?g:n)[l],f=_&&d?u(c,a):E&&"function"==typeof c?u(Function.call,c):c,g&&o(g,l,c,e&s.U),I[l]!=c&&r(I,l,f),E&&y[l]!=c&&(y[l]=c)};a.core=i,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},20:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ACTIONS:{SEND:"send",SAVE:"save",CLOSE:"close"},CARD_STATE:{NONE:"none",SHOWING:"showing",OPEN:"open",PROCESS:"process",SUBMIT:"submit",CANCEL:"cancel",CLOSING:"closing",CLOSE:"close",ERROR:"error",SUBMIT_ERROR:"submit_error",SUBMIT_SUCCESS:"submit_success"},CARD_TYPES:{SLIDING:"sliding",OVERLAY:"overlay",INLINE:"inline",SLIDINGPLUS:"slidingplus",CUSTOM:"custom"},CARD_ACTIONS:{PREVIOUS:"previous",NEXT:"next",INIT:"init"},DEFAULT_PAGE_INDEX:-1}},21:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=c(n(12)),o=c(n(14)),u=c(n(3)),s=c(n(7)),l=c(n(6)),d=c(n(9));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"trim",value:function(e){return e.replace(/^\s+|\s+$/g,"")}},{key:"addStylesheet",value:function(e,t){u.default.notEmpty(e,"addStylesheet id"),u.default.notEmpty(t,"addStylesheet cssText");var n=this.createElement("style",{id:e,type:"text/css"});try{n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),document.head.appendChild(n)}catch(e){}return n}},{key:"get",value:function(e){return document.getElementById(e)}},{key:"createElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=document.createElement(e);return Object.keys(t).map(function(e){return a.setAttribute(e,t[e]),0}),"string"==typeof n?a.innerHTML=n:n.map(function(e){return a.appendChild(e)}),a}},{key:"removeElement",value:function(e){var t=e;"string"==typeof t&&(t=this.get(t)),t&&t.parentNode.removeChild(t)}},{key:"addClass",value:function(e,t){var n=this.trim(t),a=e;a&&("string"==typeof a&&(a=this.get(a)),a.classList?a.classList.add(n):a.className+=" "+n)}},{key:"removeClass",value:function(e,t){var n=this.trim(t),a=e;a&&("string"==typeof a&&(a=this.get(a)),a.classList?a.classList.remove(t):a.className=a.className.replace(new RegExp("(^|\\b)(\\s*)"+n.split(" ").join("(\\s*)|(\\s*)")+"(\\s*)(\\b|$)","g")," "))}},{key:"hasClass",value:function(e,t){var n=this.trim(t),a=e;return"string"==typeof a&&(a=this.get(a)),a.classList?a.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(a.className)}},{key:"hasSelector",value:function(e,t){return("string"==typeof e?this.createElement("div",void 0,e):e).querySelectorAll(t).length>0}},{key:"hide",value:function(e){var t=e;"string"==typeof t&&(t=this.get(t)),t.style.display="none"}},{key:"show",value:function(e){var t=e;"string"==typeof t&&(t=this.get(t)),t.style.display="block"}},{key:"getStyle",value:function(e,t){return window.getComputedStyle(e)[t]}},{key:"set",value:function(e,t,n){e&&"string"==typeof t&&"string"==typeof n&&(e.style[t]=n)}},{key:"setStyle",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e)switch(i&&e.setAttribute("style",""),void 0===t?"undefined":a(t)){case"object":Object.keys(t).map(function(a){return Object.prototype.hasOwnProperty.call(t,a)&&n.set(e,a,t[a]),0});break;case"string":e.setAttribute("style",e.style.cssText+t)}}},{key:"injectScript",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments[2],a=this,i=arguments[3],r=arguments[4];u.default.notEmpty(e,"injectScript url"),u.default.isNotUndefinedOrNull(n.head,"document.head");var o=!1;if(this.get(i.id))t("success");else{var d=this.createElement("script",(0,l.default)({},i,{async:!0,src:e,type:"text/javascript"}));n.head.appendChild(d);var c=void 0;d.onreadystatechange=function(){o||a.readyState&&"loaded"!==a.readyState&&"complete"!==a.readyState||(o=!0,c&&s.default.clearRequestTimeout(c),t("success"),d.onreadystatechange=null)},d.onload=function(){o||a.readyState&&"loaded"!==a.readyState&&"complete"!==a.readyState||(o=!0,c&&s.default.clearRequestTimeout(c),t("success"),d.onload=null)},d.onerror=function(){d.onreadystatechange=null,d.onload=null,c&&s.default.clearRequestTimeout(c),t("error")},r&&(c=s.default.requestTimeout(function(){d.onreadystatechange=null,d.onload=null,t("timeout")},r))}}},{key:"reduceTags",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];u.default.isArray(t,"reduceTags allowedTags"),u.default.isObject(n,"reduceTags allowedAttributes"),u.default.isArray(a,"reduceTags purgeTags");var i=this.createElement("div",{},e).childNodes,r=[];if(i.length>0)for(var o=0;o<i.length;o+=1){var s=i[o],l=s.nodeName.toLowerCase();if((s=Array.isArray(n[l])?this.removeAttrs(s,n[l]):this.removeAttrs(s,[])).hasChildNodes()&&-1===a.indexOf(l))if(1===s.childNodes.length&&"#text"===s.childNodes[0].nodeName)t.indexOf(l)>-1?r.push(s.outerHTML):r.push(s.textContent);else{var d=s.innerHTML.indexOf("<"),c="";d>0&&(c=s.innerHTML.substr(0,d),s.innerHTML=s.innerHTML.substr(d));var f,p=s.innerHTML.lastIndexOf(">");f=s.innerHTML.substr(p+1),s.innerHTML=s.innerHTML.substr(0,p+1),t.indexOf(l)>-1?(s.innerHTML=c+this.reduceTags(s.innerHTML,t,n,a)+f,r.push(s.outerHTML)):r.push(c+this.reduceTags(s.innerHTML,t,n,a)+f)}else{var v=l;-1===a.indexOf(v)&&(t.indexOf(v)>-1?r.push(s.outerHTML):r.push(s.textContent))}}else r.push(e);return r.join(" ").trim()}},{key:"removeAttrs",value:function(e,t){var n=e;if(n.attributes)for(var a=n.attributes,i=a.length-1;i>=0;i-=1)-1===t.indexOf(a[i].name)&&n.removeAttribute(a[i].name);return n}},{key:"removeCSSProp",value:function(e,t){var n=e.match(/([^\s{]+?(?=:))(:\s)([^;]*);/g),a="";return n&&n.forEach(function(e){var n=e.split(":")[0];t.indexOf(n)>-1&&(a+=e)}),a}},{key:"fixAnchorTarget",value:function(e){var t=this.createElement("div",{},e),n=t.getElementsByTagName("a"),a=void 0;if(n.length>0){for(var i=0;i<n.length;i+=1){var r=n[i].getAttribute("target");d.default.isEmptyorNull(r)&&n[i].setAttribute("target","_blank")}a=t.innerHTML}else a=e;return a}},{key:"filterAttrOfTag",value:function(e,t,n){var a=this,i=this.createElement("div",{},e),r=i.getElementsByTagName(t),o=[],u=[].slice.call(r);return 0===u.length?{residueContent:i.innerHTML}:(u.map(function(e){var t={};return n.map(function(n){var a=d.default.isEmptyorNull(e.getAttribute(n))?e.getAttribute(n):e.getAttribute(n).trim();return t[n]=d.default.isEmptyorNull(e.dataset)||d.default.isEmptyorNull(e.dataset[n])?a:e.dataset[n].trim(),0}),t.innerHTML=e.innerHTML.trim(),o.push(t),a.removeElement(e),0}),{residueContent:o.length>0&&""===i.textContent.trim()&&0===i.getElementsByTagName("img").length?void 0:i.innerHTML,tagAttributes:o})}},{key:"redrawElement",value:function(e,t,n){var a=this;return e?(this.setStyle(e,t),s.default.requestTimeout(function(){a.setStyle(e,n)},40),0):0}},{key:"getOrientation",value:function(){switch(o.default.isMobileSafari?Math.abs(window.orientation):screen.width>screen.height?90:0){case 90:return r.default.ORIENTATIONS.LANDSCAPE;default:return r.default.ORIENTATIONS.PORTRAIT}}},{key:"getScreenDimensions",value:function(){var e=void 0,t=void 0;return this.getOrientation()===r.default.ORIENTATIONS.PORTRAIT?(t=screen.height>screen.width?screen.height:screen.width,e=screen.height>screen.width?screen.width:screen.height):(t=screen.height>screen.width?screen.width:screen.height,e=screen.height>screen.width?screen.height:screen.width),{width:e,height:t}}},{key:"getKeyboardHeight",value:function(){var e=this.getOrientation(),t=Object.keys(r.default.ORIENTATIONS).reduce(function(t,n){return e===r.default.ORIENTATIONS[n]?n:t}),n=window.innerHeight;if(o.default.isIpad){var a=r.default.MAX_KEYBOARD_HEIGHT[t].filter(function(e){return n>=e.MIN_SCREEN_HEIGHT&&n<=e.MAX_SCREEN_HEIGHT});if(a.length)return a[0].KEYBOARD_HEIGHT}return 0}},{key:"matches",value:function(e,t){for(var n=(e.document||e.ownerDocument).querySelectorAll(t),a=n.length;a>=0&&n.item(a)!==e;)a-=1;return a>-1}}]),e}();t.default=new f},22:function(e,t,n){var a=n(40),i=Math.min;e.exports=function(e){return e>0?i(a(e),9007199254740991):0}},24:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"uuid",value:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return(""+e()+e()+"-"+e()+"-4"+e().substr(0,3)+"-"+e()+"-"+e()+e()+e()).toLowerCase()}},{key:"get",value:function(e){for(var t="abcdefghijklmnopqrstuvwxyz0123456789",n="",a=0,i=t.length;a<e;a+=1)n+=t.substr(0|Math.random()*i,1);return n}}]),e}();t.default=new i},25:function(e,t,n){var a=n(13),i=n(92),r=n(47),o=Object.defineProperty;t.f=n(18)?Object.defineProperty:function(e,t,n){if(a(e),t=r(t,!0),a(n),i)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},26:function(e,t,n){var a=n(39);e.exports=function(e){return Object(a(e))}},28:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=o(n(6)),r=o(n(9));function o(e){return e&&e.__esModule?e:{default:e}}var u={chat:["visitorSessionId","interactionId"],va:["turnsId"]},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialContext={},this.queuedContext=void 0}return a(e,[{key:"_listenChange",value:function(e){var t=this,n={};Object.keys(u).forEach(function(a){u[a].forEach(function(i){t.props[a]&&e[i]!==t.props[a][i]&&(n[i]=t.props[a][i])})}),Object.keys(n).length>0&&this.refreshContext(n)}},{key:"subscribe",value:function(e){var t=this;this.store=e,this.store.subscribe(function(){var e=r.default.get(["props"],t,void 0),n=r.default.get(["app","context"],e,{});t.props=t.store.getState(),e&&e.controller.performStateSync&&!t.props.controller.performStateSync&&"REFRESH_CONTEXT"!==e.logger.actionType&&t.refreshContext(),t._listenChange(n)})}},{key:"getContext",value:function(){return this.store&&this.props?this.props.app.context:this.initialContext}},{key:"refreshContext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.queuedContext||r.default.get(["props","app","context"],this,this.initialContext),a=(0,i.default)({},n,e),o=r.default.get(["props","controller","performStateSync"],this,!1);this.store?o?this.queuedContext=a:(this.queuedContext=void 0,this.store.dispatch({type:"REFRESH_CONTEXT",context:a})):this.initialContext=a,t()}}]),e}();t.default=new s},29:function(e,t,n){var a=n(25),i=n(55);e.exports=n(18)?function(e,t,n){return a.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(44),u=(a=o)&&a.__esModule?a:{default:a};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"assert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"assert failed";e||function(e){throw new Error(e)}(t)}},{key:"isObject",value:function(e,t){var n=t?t+" is not an object":"object expected";this.assert(u.default.isObject(e),n)}},{key:"isUndefinedOrNull",value:function(e,t){var n=t?t+" is not undefined or null":"undefined or null expected";this.assert(void 0===e||null===e,n)}},{key:"isNotUndefinedOrNull",value:function(e,t){var n=t?t+" is undefined or null":"undefined or null not expected";this.assert(void 0!==e&&null!==e,n)}},{key:"isBoolean",value:function(e,t){var n=t?t+" is not a boolean":"boolean expected";this.assert(u.default.isBoolean(e),n)}},{key:"isFunction",value:function(e,t){var n=t?t+" is not a function":"function expected";this.assert(u.default.isFunction(e),n)}},{key:"isNumber",value:function(e,t){var n=t?t+" is not a number":"number expected";this.assert(u.default.isNumber(e),n)}},{key:"notEmpty",value:function(e,t){var n=t?t+" is not a string or is empty":"non-empty string expected";this.assert(u.default.isString(e)&&!l.test(e),n)}},{key:"instanceOf",value:function(e,t,n){var a=n?"expected instance of "+n:"unexpected instance type";this.assert(e instanceof t,a)}},{key:"isScalar",value:function(e,t){var n=void 0===e?"undefined":i(e),a=(t?t+" ":"")+"must be string, number, or boolean";this.assert("string"===n||"number"===n||"boolean"===n,a),"string"===n&&this.notEmpty(e,t)}},{key:"isArray",value:function(e,t){var n=t?t+" is not an array":"array expected";this.assert(Array.isArray(e),n)}}]),e}(),l=/^\s*$/;t.default=new s},301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={workflow:"chat",workflowConfig:{},appId:"default",primaryColor:"#EF8822",primaryFgColor:"#FFFFFF",header:{borderColor:void 0},secondaryColor:"#EF8822",secondaryFgColor:"#FFFFFF",tertiaryColor:"#727272",tertiaryFgColor:"#FFFFFF",windowHeight:530,windowWidth:330,windowOffset:35,windowPosition:"bottomright",windowTitle:"Chat support",windowName:"frontends",fontFamily:"'Helvetica Neue', Helvetica, Arial, sans-serif",minimizedDock:{customDocks:[],desktop:{offsetX:0,offsetY:0},phone:{offsetX:0,offsetY:0},tablet:{offsetX:0,offsetY:0}},popupWindow:{initial:!1,byUser:!1,windowWidth:450,windowHeight:680,windowPosition:"topleft"},surveyEndpoint:"",quickReply:{display:"horizontal",fgColor:void 0},notifications:{audio:{message:"",reconciled:"",started:""},visual:{message:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==",reconciled:"",started:""}},toastMessage:{duration:3e3,showClose:!0},scrollFromBottom:!0,legalese:[],timeFormat:"%l:%M %p",maxUserMessageLength:1500,useDefaultQueueForNewChat:!1,timestampDisplayInterval:12e4,showPoweredBy247:!0,showAbout247:!0,typingNotificationTimeout:15e3,forceCrossOrigin:!0,forceMaximizeInNewTab:!1,nonInteractiveChat:{showSurvey:!1,showTranscript:!1,showStartNewChat:!0},interactiveChat:{showSurvey:!0,showTranscript:!0,showStartNewChat:!0},branding:{type:"none",bgColor:"#EEEEEE",static:!1,logoUrl:"",logoOffset:0,avatarUrl:""},messageBgColor:{user:"#FFFFFF",agent:"#FFFFFF",va:"#FFFFFF",notification:"#5595E5"},messageFgColor:{user:"#333333",agent:"#333333",va:"#333333",system:"#9B9B9B",typing:"#999999",notification:"#FFFFFF"},messageBorderColor:{user:"#CCCCCC",agent:"#CCCCCC",va:"#CCCCCC"},loaderColor:"#BBBBBB",footerBgColor:"#FAFAFA",borderRadius:5,maskVisitorMessages:!0,maskWiredMessages:!0,maskMessagePatterns:[{patternStr:"((?:(?:4\\d{3})|(?:5[1-5]\\d{2})|6(?:011|5[0-9]{2}))(?:-?|\\s?)(?:\\d{4}(?:-?|\\s?)){3}|(?:3[4,7]\\d{2})(?:-?|\\s?)\\d{6}(?:-?|\\s?)\\d{5})",patternFlags:"gm",replaceStr:" --CREDITCARD-- "},{patternStr:"((?!666|000)[0-8][0-9\\_]{2}\\-(?!00)[0-9\\_]{2}\\-(?!0000)[0-9\\_]{4})",patternFlags:"gm",replaceStr:" --SSN-- "}],sendButtonIcon:!1,showMessageAvatar:!1,securityRestrictions:[],i18n:{locale:"auto",uiStrings:{}},prechatData:{},icons:{statusAvailable:"",statusBusy:"",statusChat:"",statusOffline:"",fileUpload:"",sendIcon:"",agentAvatar:"",vaAvatar:""},prechat:void 0,offline:{showCountdown:!0,usePrimaryColor:!1,a11yLive:!0,widgets:[{type:"text",description:"OFFLINE_DESCRIPTION",name:"offline",textAlign:"center"},{type:"hr",name:"busy-hr"},{type:"text",name:"offline-hours",description:"CHAT_HOURS",fgColor:"#9A9A9A",textAlign:"center"},{type:"text",name:"offline-monday-to-friday",title:"MONDAY_TO_FRIDAY",description:"MONDAY_TO_FRIDAY_TEXT",fgColor:"#9A9A9A",textAlign:"center"},{type:"text",name:"offline-saturdays",title:"SATURDAYS",description:"SATURDAYS_TEXT",fgColor:"#9A9A9A",textAlign:"center"},{type:"text",name:"offline-sundays",title:"SUNDAYS",description:"SUNDAYS_TEXT",fgColor:"#9A9A9A",textAlign:"center"}]},busy:{a11yLive:!0,usePrimaryColor:!1,widgets:[{type:"text",description:"BUSY_DESCRIPTION",name:"busy",textAlign:"center"},{type:"hr",name:"busy-hr"},{type:"text",name:"busy-hours",description:"CHAT_HOURS",fgColor:"#9A9A9A",textAlign:"center"},{type:"text",name:"busy-monday-to-friday",title:"MONDAY_TO_FRIDAY",description:"MONDAY_TO_FRIDAY_TEXT",fgColor:"#9A9A9A",textAlign:"center"},{type:"text",name:"busy-saturdays",title:"SATURDAYS",description:"SATURDAYS_TEXT",fgColor:"#9A9A9A",textAlign:"center"},{type:"text",name:"busy-sundays",title:"SUNDAYS",description:"SUNDAYS_TEXT",fgColor:"#9A9A9A",textAlign:"center"}]},waiting:{showWaitTime:!0,a11yLive:!0,widgets:[]},cards:[],postchatPromo:"",dialog:{postchat:{title:"CHAT_SURVEY_TITLE",widgets:[{type:"rating",description:"CHAT_SURVEY_CSAT",name:"csat",ratingStyle:"csat"},{type:"rating",description:"CHAT_SURVEY_NPS",name:"nps",ratingStyle:"nps",highText:"Absolutely",lowText:"No way"},{type:"textarea",name:"textarea",textareaPlaceholder:"CHAT_SURVEY_TEXT"},{type:"button",name:"cancel",label:"CHAT_ACTION_CANCEL",colspan:6,buttonType:"cancel"},{type:"button",name:"submit",label:"CHAT_SURVEY_ACTION",colspan:6,buttonType:"submit"}]},vaSurvey:{title:"CHAT_SURVEY_TITLE",widgets:[{type:"rating",description:"CHAT_SURVEY_CSAT",name:"csat",ratingStyle:"csat"},{type:"rating",description:"CHAT_SURVEY_NPS",name:"nps",ratingStyle:"nps",highText:"Absolutely",lowText:"No way"},{type:"textarea",name:"textarea",textareaPlaceholder:"CHAT_SURVEY_TEXT"},{type:"button",name:"cancel",label:"CHAT_ACTION_CANCEL",colspan:6,buttonType:"cancel"},{type:"button",name:"submit",label:"CHAT_SURVEY_ACTION",colspan:6,buttonType:"submit"}]}},supportHours:[{queue:"default",sunday:[{start:"0000",end:"2359"}],monday:[{start:"0000",end:"2359"}],tuesday:[{start:"0000",end:"2359"}],wednesday:[{start:"0000",end:"2359"}],thursday:[{start:"0000",end:"2359"}],friday:[{start:"0000",end:"2359"}],saturday:[{start:"0000",end:"2359"}],timeZoneOffset:0}],invites:[],disableBackgroundInvite:!1,appleBusinessChat:{enabled:!1,scriptUrl:"https://static.cdn-apple.com/businesschat/start-chat-button/1/index.js",businessId:"",theme:"light",intentId:"",groupId:""},frontendsService:{baseUrl:"https://api.247-inc.net/v1/frontends",apiKey:"UYXHhmVoZK7dDHXcoHVGBSYUwumZWnhd",opts:{configuration:!1,logger:{level:400,flushTrigger:20}}},events:{ignoreList:["queueAfterHours","caCheckFail","cardInvited","cardAccepted","cardSubmitted"]},journey:{maxUrls:5,maxUrlsLength:1500,autoPush:!0},apis:{onStateChange:"onStateChange",onTrackEvent:"SN.trackEvent",getData:"SN.getData",setData:"SN.setData",forceEndInteraction:"forceEndInteraction",onCustomCardAction:"onCustomCardAction"},fileupload:{imgRes:1024,imgQuality:.5,maxFileSizeInKb:500,minOriginalFileSizeInKb:2,maxOriginalFileSizeInKb:5e4,showCancel:!0},cobrowse:{timeout:6e5}}},302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={PRE_RENDER_LOADING:"Loading",PRE_RENDER_CLOSE:"Close",PRE_RENDER_TIMEOUT:"Still loading, but taking longer than usual",PRE_RENDER_FAILED_TITLE:"Loading failed",PRE_RENDER_FAILED_DESC:"Something went wrong. Make sure your Internet is up and running and reload this page."}},31:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUCKETS:["a","b"],KEY_MAP:[{key:"chat.visitorSessionId",length:45,type:"string",short:"a",bucket:"a"},{key:"chat.stackName",length:1,type:"string",short:"b",bucket:"a"},{key:"chat.stackNodesStart",length:2,type:"number",short:"c",bucket:"a"},{key:"chat.stackNodesEnd",length:2,type:"number",short:"d",bucket:"a"},{key:"va.turnsId",length:36,type:"string",short:"e",bucket:"a"},{key:"va.noInput",short:"f",length:1,type:"boolean",bucket:"a"},{key:"va.poller",short:"g",length:1,type:"boolean",bucket:"a"},{key:"va.vaSurveyCompleted",length:1,type:"boolean",short:"h",bucket:"a"},{key:"messaging.userTokenId",length:64,type:"string",short:"i",bucket:"a"},{key:"messaging.pollInterval",length:6,type:"number",short:"j",bucket:"a"},{key:"cards.currentCardId",length:45,type:"string",short:"k",bucket:"a"},{key:"widgetLoaded",length:1,type:"boolean",short:"l",bucket:"a"},{key:"initialWorkflow",length:9,type:"string",short:"m",bucket:"a"},{key:"reload",length:1,type:"boolean",short:"n",bucket:"a"},{key:"displayMode",length:10,type:"string",short:"o",bucket:"a"},{key:"asid",length:3,type:"string",short:"p",bucket:"a"},{key:"appId",length:40,type:"string",short:"q",bucket:"a"},{key:"notificationOptIn",length:1,type:"boolean",short:"r",bucket:"a"},{key:"chat.interactionId",length:45,type:"string",short:"s",bucket:"a"},{key:"vi",length:36,type:"string",short:"a",bucket:"b"},{key:"app.context.queue",length:80,type:"string",short:"b",bucket:"b"},{key:"app.context.accountId",length:40,type:"string",short:"c",bucket:"b"},{key:"app.context.appInteractionId",length:36,type:"string",short:"d",bucket:"b"},{key:"app.context.rc",length:40,type:"string",short:"e",bucket:"b"},{key:"app.context.sc",length:40,type:"string",short:"f",bucket:"b"},{key:"app.context.dockId",length:40,type:"string",short:"g",bucket:"b"},{key:"cards.submittedCards.0",length:45,type:"string",short:"h",bucket:"b"},{key:"cards.submittedCards.1",length:45,type:"string",short:"i",bucket:"b"}],STIMULI_KEYS:["visitorSessionId","turnsId","userTokenId","currentCardId","submittedCards"]}},313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(3),o=(a=r)&&a.__esModule?a:{default:a};var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this._initialized=!1,this._listeners=[]}return i(e,[{key:"send",value:function(e){this._initialized&&this._destinationWindow.postMessage(JSON.stringify(e),this._getOrigin())}},{key:"init",value:function(e){this._initialized||(o.default.isObject(e),o.default.isObject(e.dest),o.default.notEmpty(e.origin),this._destinationWindow=e.dest,this._locationOrigin=e.origin,this._onMessageBound=this._onMessage.bind(this),s.addEventListener("message",this._onMessageBound),this._initialized=!0)}},{key:"_onMessage",value:function(e){if(e.origin===this._getOrigin())try{this._notify(JSON.parse(e.data))}catch(e){}}},{key:"_notify",value:function(e){return this._listeners.map(function(t){return t.apply(null,[e]),0}),0}},{key:"_getOrigin",value:function(){return this._locationOrigin||window.location.origin}},{key:"clear",value:function(){this._initialized=!1,s.removeEventListener("message",this._onMessageBound),this._listeners.splice(0,this._listeners.length)}},{key:"addListener",value:function(e){this._listeners.push(e)}}]),e}(),s=window;t.default=u},33:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={LOG_LEVEL:{DEBUG:100,INFO:200,WARN:300,ERROR:400},LOG_LEVEL_STRING:{100:"DEBUG",200:"INFO",300:"WARN",400:"ERROR"},LOG_EVENTS:{SESSION_UPDATE:"user.session.update",USER_ACTION:"user.action",WINDOW_ERROR:"window.error",SYSTEM_DEBUG:"system.debug",SYSTEM_ERROR:"system.error",CONFIG_ERROR:"config.error",PAGE_INIT:"page.init"},MAX_ERROR_MESSAGE_LENGTH:100,TIME_FORMAT:"%F %T.%L %z"}},336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=p(n(12)),r=p(n(6)),o=p(n(181)),u=p(n(14)),s=p(n(9)),l=p(n(680)),d=p(n(685)),c=p(n(44)),f=p(n(122));function p(e){return e&&e.__esModule?e:{default:e}}var v={},h=!1,E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"init",value:function(e){var t=this;if(!h){this._initCallback=e.initCallback,this._storageKey=(e.clientId||"default")+"||"+i.default.STORAGE_KEY_NAMES.USER_SESSION,this._useCustomStorage=!!u.default.safariVersion,this._sessionKey=i.default.STORAGE_KEY_NAMES.TAB_SESSION,this._getData=e.getData,this._setData=e.setData,this._forceCrossOrigin=e.forceCrossOrigin,this._storageType=void 0,this._store=void 0,this._storageTypeReasons=[],this._listeners=[],this._storageTypeReasons.push("FORCE_CROSS_ORIGIN_"+this._forceCrossOrigin.toString().toUpperCase());var n=function(e,n){t._store=n,t._storageType=e,h=!0,t._initCallback(t)};f.default.isPopup()&&f.default.getWindowParams()&&f.default.getWindowParams().storageType===i.default.STORAGE_TYPES.CUSTOM?this._createCustomStorage(n):this._forceCrossOrigin?u.default.safariVersion?this._createCustomStorage(n):this._store=new d.default(n,function(e){t._storageTypeReasons.push(e),t._createCustomStorage(n)},function(e){var n=e;h||Object.keys(n).forEach(function(e){v[e]=(0,r.default)({},v[e],n[e])}),n.oldValue&&!Object.keys(n.oldValue).length&&(n.oldValue=v),c.default.isObject(n.newValue)&&Object.keys(n.newValue).forEach(function(e){v[e]=n.newValue[e]});for(var a=0;a<t._listeners.length;a+=1)t._listeners[a].call(t,n)},{storageKey:this._storageKey,sessionKey:this._sessionKey,path:e.xdPath}):this._createStorage(n)}}},{key:"_createStorage",value:function(e){var t=void 0;try{var n=(t=new o.default("localStorage",this._storageKey)).getAll();v[this._sessionKey]=(0,r.default)({},v[this._sessionKey],n[this._sessionKey]),this.addStorageListener=function(e){t.addStorageListener(e)},e(i.default.STORAGE_TYPES.LOCALSTORAGE,t)}catch(t){this._createCustomStorage(e)?this._storageTypeReasons.push("XDLOCALSTORAGE_SETSTORE_ERROR"):this._storageTypeReasons.push("XDLOCALSTORAGE_NOSTORE")}}},{key:"_createCustomStorage",value:function(e){var t=this,n=void 0;return!(!this._getData||!this._setData)&&((n=new l.default({getData:this._getData,setData:this._setData})).get(function(a){v[t._sessionKey]=(0,r.default)({},v[t._sessionKey],a),e(i.default.STORAGE_TYPES.CUSTOM,n)}),!0)}},{key:"getStorageTypeReasons",value:function(){return this._storageTypeReasons.join(",")}},{key:"getStorageType",value:function(){return this._storageType}},{key:"get",value:function(e){return v[e]}},{key:"set",value:function(e,t,n){switch(this._storageType){case i.default.STORAGE_TYPES.CUSTOM:n.syncCustomStorage&&this._store.set((0,r.default)({},v[this._sessionKey],t));break;case i.default.STORAGE_TYPES.XD:case i.default.STORAGE_TYPES.LOCALSTORAGE:this._store.set(e,t,n)}v[e]=(0,r.default)({},v[e],t),v[i.default.SOURCE]=n.tabId}},{key:"addStorageListener",value:function(e){this._listeners.push(e)}},{key:"remove",value:function(e,t){switch(t&&t.length>0?v[e]=s.default.removeSpecificKeys(v[e],t):v[e]={},this._storageType){case i.default.STORAGE_TYPES.CUSTOM:this._store.set((0,r.default)({},v[this._sessionKey]));break;case i.default.STORAGE_TYPES.XD:case i.default.STORAGE_TYPES.LOCALSTORAGE:this._store.remove(e,t)}}}]),e}();t.default=new E},337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=d(n(15)),o=d(n(6)),u=d(n(12)),s=d(n(28)),l=d(n(3));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"configure",value:function(e){this._onTrackEvent=e.onTrackEvent,this._logger=e.logger,this._channelSessionId=e.channelSessionId,this._ignoreEvents=e.events.ignoreList,this._onTrackEvent||(this._onTrackEvent=r.default.noop)}},{key:"exitSurveyShown",value:function(e){var t=this.exitSurveys(e);return t.name="OnlineScreenLoadEvent",t}},{key:"exitSurveySubmit",value:function(e){var t=this.exitSurveys(e),n=e.formData||{};return t.name="OnlineSurveySubmitEvent",t.questionsAndAnswers=Object.keys(n).map(function(e){return{question:e,answer:n[e]}}),t}},{key:"exitSurveys",value:function(e){l.default.notEmpty(e.interactionId,"Tracker.exitSurveys - interactionId"),l.default.notEmpty(e.queue,"Tracker.exitSurveys - queue"),l.default.notEmpty(e.ruleId,"Tracker.exitSurveys - ruleId"),l.default.notEmpty(e.ruleCategory,"Tracker.exitSurveys - ruleCategory");var t=this.commons();return t.screenType="SURVEY",t.targetChannelType="WEB",t.optSharedSessionId=e.interactionId,t.platform=e.platform,t.source=e.source,(0,o.default)(t,{clientKey:e.clientKey,Queue:e.queue,RuleId:e.ruleId,inviteType:"b"===e.ruleCategory?"BUTTON":"PROACTIVE"}),t}},{key:"prechatShown",value:function(){var e=this.commons();return e.name="OnlineScreenLoadEvent",e.screenType="PRECHAT",e.targetChannelType="WEB",e}},{key:"prechatSubmit",value:function(e){var t=this.commons(),n=e.formData||{};return t.name="OnlineSurveySubmitEvent",t.screenType="PRECHAT",t.targetChannelType="WEB",n.skill&&(t.Skill=n.skill),n.queue&&(t.Queue=n.queue),t.questionsAndAnswers=Object.keys(n).map(function(e){return{question:e,answer:n[e]}}),t}},{key:"cardInvited",value:function(e){var t=this.cards(e);return t.treatmentName="activeCardSent",t}},{key:"cardAccepted",value:function(e){var t=this.cards(e);return(0,o.default)(t,{treatmentName:"activeCardViewed",userAction:"BUTTON_CLICKED",userResponse:"ACCEPTED"}),t}},{key:"cardSubmitted",value:function(e){var t=this.cards(e);return(0,o.default)(t,{treatmentName:"activeCardSubmitted",userAction:"BUTTON_CLICKED",outcome:"COMPLETE"}),t}},{key:"cards",value:function(e){l.default.notEmpty(e.workflow,"Tracker.cards - workflow"),l.default.notEmpty(e.name,"Tracker.cards - name");var t=e.workflow,n=e.name,a=u.default.TRACK_PLATFORMS[t];return this.treatment({platform:a,invitation:{invitePageID:n}})}},{key:"inviteOffered",value:function(e){var t=this.invites(e);return t.name="OnlineInvitationOfferEvent",t}},{key:"inviteAccepted",value:function(e){var t=this.invites(e);return t.name="OnlineInvitationResponseEvent",t.response="ACCEPTED",t}},{key:"inviteDeclined",value:function(e){var t=this.invites(e);return t.name="OnlineInvitationResponseEvent",t.response="DECLINED",t}},{key:"inviteIgnored",value:function(e){var t=this.invites(e);return t.name="OnlineInvitationResponseEvent",t.response="IGNORED",t}},{key:"sessionEngaged",value:function(){var e=this.commons();return e.name="OnlineSessionEngageEvent",e}},{key:"visitorIdChanged",value:function(e){return a({},e,{name:"VISITOR_ID_CHANGED"})}},{key:"queueAfterHours",value:function(e){return a({},this.application(e),{appInfo:"queueAfterHours"})}},{key:"caCheckFail",value:function(e){return a({},this.application(e),{appInfo:"caCheckFail"})}},{key:"application",value:function(e){var t={name:"Application",channel:"OMNICHANNEL",platform:"CHAT",source:"UDE",appEntity:"TIE_FRONTEND",appAction:"CHAT_SESSION_CHECK"};return(0,o.default)(t,e),t}},{key:"invites",value:function(e){var t=this.commons(),n=e.appInteractionId,a=e.ruleId,i=e.inviteId,r=(e.triggerAppId,e.state),u=e.queue,s=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["appInteractionId","ruleId","inviteId","triggerAppId","state","queue"]);return l.default.notEmpty(n,"In Tracker.Invites appInteractionId"),l.default.notEmpty(a,"In Tracker.Invites ruleId"),l.default.notEmpty(i,"In Tracker.Invites inviteId"),l.default.notEmpty(r,"In Tracker.Invites state"),l.default.notEmpty(u,"In Tracker.Invites queue"),(0,o.default)(t,{appInteractionId:n,RuleId:a,inviteId:i,inviteType:"maximized"===r?"PROACTIVE":"BUTTON",Queue:u,targetChannelType:"ONLINE"},s),t}},{key:"commons",value:function(){return{appInteractionId:s.default.getContext()[u.default.PRECHAT_DATA_KEYS.APP_INTERACTION_ID]}}},{key:"treatment",value:function(e){return(0,o.default)({name:"Treatment",channel:"OMNICHANNEL",source:"UDE",treatmentCategory:"INVITE",invitation:{inviteType:"CARD",targetChannel:"WEB"}},e)}},{key:"logTrackEvent",value:function(e){var t=this[e.event](e.eventData),n=t.name;delete t.name;try{this._onTrackEvent(n,r.default.noop,t)}catch(e){throw new Error("onTrackEvent API: "+(e.message||e))}}},{key:"log",value:function(e){if(!(this._ignoreEvents.indexOf(e.event)>-1))try{this.logTrackEvent(e)}catch(e){this._logger({errorMsg:e.message||e,errorStack:e.stack})}}}]),e}();t.default=new c},338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=h(n(3)),r=h(n(14)),o=h(n(79)),u=h(n(387)),s=h(n(337)),l=h(n(6)),d=h(n(123)),c=h(n(153)),f=h(n(121)),p=h(n(28)),v=h(n(9));function h(e){return e&&e.__esModule?e:{default:e}}function E(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function _(e){var t=e.appInteractionId,n=e.ruleId,a=e.queue,i=e.state,r=e.inviteId,o=(e.triggerAppId,e.trackingId),u=e.appId,s=e.dockId,d=E(e,["appInteractionId","ruleId","queue","state","inviteId","triggerAppId","trackingId","appId","dockId"]),f={chat:{assistQueue:a}},v=(0,l.default)({},{appInteractionId:t,sc:n,queue:a,rc:"maximized"===i?"p":"b",btnName:r,btnTyp:r,trackingId:o},d),h={workflowConfig:f};p.default.refreshContext(v),c.default.startInteraction(u,s,h)}var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"init",value:function(e){var t=e.onStateChange,n=e.securityRestrictions,a=e.appleBusinessChat,i=e.disableBackgroundInvite,o=E(e,["onStateChange","securityRestrictions","appleBusinessChat","disableBackgroundInvite"]),l="desktop";r.default.isPhone&&(l="phone"),r.default.isTablet&&(l="tablet");var c=void 0;n.frameInFrame&&(c=d.default.sendMessage);var p=s.default.log.bind(s.default);u.default.init(o,{startInteraction:_,logEvent:p,device:l,onStateChange:t,appleBusinessChat:a,disableBackgroundInvite:i,fifMessageSender:c,trackInteraction:f.default.logInteraction.bind(f.default)})}},{key:"triggerInvite",value:function(e,t){var n=o.default.get(e);v.default.isUndefinedorNull(t)?c.default.startInteraction(e):u.default.triggerInvite({appId:e,invites:n.invites,supportHours:n.supportHours,workflowConfig:n.workflowConfig.chat||{}},t)}},{key:"removeInvite",value:function(e){u.default.removeInvite(e)}},{key:"setInteractionActive",value:function(e){i.default.isBoolean(e,"InviteInterface: status"),u.default.setInteractionActive(e)}}]),e}();t.default=g},339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=y(n(153)),r=y(n(396)),o=y(n(152)),u=y(n(688)),s=y(n(12)),l=y(n(19)),d=y(n(20)),c=y(n(63)),f=y(n(313)),p=y(n(107)),v=y(n(337)),h=y(n(121)),E=y(n(21)),_=y(n(7)),g=y(n(154)),I=y(n(9));function y(e){return e&&e.__esModule?e:{default:e}}var T=void 0;function m(e){var t=e,n=t._data;switch(t._name){case l.default.STYLE:r.default.updateState(n),o.default.changeBodyStyle(n),g.default.alter(n===s.default.WIDGET_STATE.MAXIMIZED);break;case l.default.READY:i.default.update(s.default.IFRAME_READY,!0),i.default.sendInitData();break;case l.default.INTERACTION:n.action&&n.action===s.default.STORE_UPDATE?n.type&&(n.type===s.default.BROWSER_SESSION_KEY?p.default.browser.set(n.interactionData):n.type===s.default.TAB_SESSION_KEY&&p.default.tab.set(n.interactionData)):n.action&&n.action===s.default.STORE_DELETE&&(p.default.removeSessionData(n.interactionData),n.showWidgetOnReload||p.default.browser.set(s.default.SHOW_ON_RELOAD,!1));break;case l.default.CONFIG:break;case l.default.STATE_CHANGE:i.default.handleStateChange(n);break;case l.default.TRACK_INTERACTION:h.default.logInteraction(n,n.forceFlush);break;case l.default.TRACK_EVENT:v.default.log(n,function(e,t){});break;case l.default.NOTIFICATION:r.default.widgetNotification(n);break;case l.default.DESTROY:p.default.browser.set(s.default.WIDGET_LOADED,!1),r.default.updateState(s.default.STYLE_STATE.HIDDEN),i.default.resetInitialState(),_.default.requestTimeout(function(){i.default.cleanUp()},1e3);break;case l.default.CARD:switch(n.cardState){case d.default.CARD_STATE.SHOWING:var a=void 0;n.cardType===d.default.CARD_TYPES.SLIDINGPLUS?a=s.default.STYLE_STATE.PLUSCARD:n.cardType===d.default.CARD_TYPES.SLIDING&&(a=s.default.STYLE_STATE.CARD),I.default.isUndefinedorNull(a)||r.default.updateState(a,!0),S.send(l.default.CARD,{cardState:d.default.CARD_STATE.OPEN});break;case d.default.CARD_STATE.OPEN:n.cardType===d.default.CARD_TYPES.CUSTOM&&i.default.onCustomCardAction(n);break;case d.default.CARD_STATE.CLOSING:r.default.updateState(s.default.STYLE_STATE.MAXIMIZED,!0),S.send(l.default.CARD,{cardState:d.default.CARD_STATE.CLOSE})}break;case l.default.COBROWSE:switch(n.state){case c.default.STATES.INITIALIZING:E.default.injectScript(n.url,function(e){"timeout"===e||"error"===e||u.default.cobrowseCreateSession(n.mode,n.timeout,n.uiStrings)},document,{id:"tfs-screenshare-js"},3e4);break;case c.default.COMMANDS.AGENT_CLOSE:u.default.disconnectCobrowse();break;case c.default.STATES.JOINED:u.default.resumeCobrowse({cobrowseId:n.cobrowseId,mode:n.mode,url:n.url,uiStrings:n.uiStrings})}break;case l.default.HIDE_INPAGE_VIEW:i.default.hideInpageView();break;case l.default.SHOW_INPAGE_VIEW:i.default.showInpageView()}}var S=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"send",value:function(e,t){T.send({_name:e,_data:t})}},{key:"clear",value:function(){T&&T.clear()}},{key:"checkIntercom",value:function(){return!!T}},{key:"initIntercom",value:function(e,t){(T=new f.default("parent")).init({origin:e,dest:t}),T.addListener(m)}}]),e}());t.default=S},34:function(e,t,n){var a=n(31);e.exports=function(e,t,n){if(a(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,a){return e.call(t,n,a)};case 3:return function(n,a,i){return e.call(t,n,a,i)}}return function(){return e.apply(t,arguments)}}},35:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},36:function(e,t,n){var a=n(8),i=n(29),r=n(37),o=n(46)("src"),u=Function.toString,s=(""+u).split("toString");n(16).inspectSource=function(e){return u.call(e)},(e.exports=function(e,t,n,u){var l="function"==typeof n;l&&(r(n,"name")||i(n,"name",t)),e[t]!==n&&(l&&(r(n,o)||i(n,o,e[t]?""+e[t]:s.join(String(t)))),e===a?e[t]=n:u?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||u.call(this)})},37:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},38:function(e,t,n){var a=n(34),i=n(50),r=n(26),o=n(22),u=n(83);e.exports=function(e,t){var n=1==e,s=2==e,l=3==e,d=4==e,c=6==e,f=5==e||c,p=t||u;return function(t,u,v){for(var h,E,_=r(t),g=i(_),I=a(u,v,3),y=o(g.length),T=0,m=n?p(t,y):s?p(t,0):void 0;y>T;T++)if((f||T in g)&&(E=I(h=g[T],T,_),e))if(n)m[T]=E;else if(E)switch(e){case 3:return!0;case 5:return h;case 6:return T;case 2:m.push(h)}else if(d)return!1;return c?-1:l||d?d:m}}},385:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(7),o=(a=r)&&a.__esModule?a:{default:a};var u=window,s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sourceOrigin=t.origin,this._destinationWindow=t.destinationWindow,this._listener=t.listener,u.addEventListener("message",function(e){return n._listener(e)},!1)}return i(e,[{key:"sendMessage",value:function(e){var t=this;e&&o.default.requestTimeout(function(){t._destinationWindow.postMessage(e,t._sourceOrigin)},1)}}]),e}();t.default=s},386:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=o(n(107)),r=o(n(12));function o(e){return e&&e.__esModule?e:{default:e}}var u=window,s=10,l=void 0,d=void 0,c=!1,f=void 0;function p(){try{var e=JSON.stringify(f);i.default.browser.set(r.default.JOURNEY,e)}catch(e){}}function v(e,t){var n=i.default.getTabId(),a=(new Date).getTime();for(f.unshift({title:e,url:t,time:1,loadts:a,tabId:n});f.length>l;)f.pop();p()}function h(){var e=f[0];if(e){var t=e.time;e.tabId===i.default.getTabId()&&(f[0].time=t+s,p())}}var E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"init",value:function(e,t,n){if(!c){l=e.maxUrls,d=e.maxUrlsLength;try{f=JSON.parse(i.default.browser.get(r.default.JOURNEY))}catch(e){f=[]}if(i.default.addListener(r.default.JOURNEY,function(e,t){try{t&&(f=JSON.parse(t))}catch(e){}}),e.autoPush)if(t.frameInFrame&&n)try{var a=JSON.parse(decodeURIComponent(n)||"{}");a&&a.title&&a.url&&v(a.title,a.url)}catch(e){}else v(u.document.title,u.location.href);c=!0,u.setInterval(h,1e3*s)}}},{key:"pushUrl",value:function(e,t){c&&v(e,t)}},{key:"getJourneyEncoded",value:function(e){var t=e||f.map(function(e){e.tabId;return function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["tabId"])}),n=void 0,a=void 0;if(t){try{n=encodeURIComponent(JSON.stringify(t)),a=encodeURI(n)}catch(e){return}return a.length<=d?n:(t.pop(),this.getJourneyEncoded(t))}}}]),e}();t.default=new E},387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=p(n(388)),r=p(n(91)),o=p(n(156)),u=p(n(21)),s=p(n(15)),l=p(n(6)),d=p(n(68)),c=p(n(3)),f=p(n(33));function p(e){return e&&e.__esModule?e:{default:e}}var v=!1,h=void 0,E=void 0,_=[],g={proactive:r.default.STATE.MAXIMIZED,button:r.default.STATE.MINIMIZED};function I(e){var t=e;return t.state=t.state||t.type,delete t.type,g[t.state]&&(t.state=g[t.state]),t.inviteId=t.inviteId||t.triggerAppId,delete t.triggerAppId,t}function y(e){for(var t=_,n=0;n<t.length;n+=1){var a=t[n];if(a&&a.getInviteId()===e)return{invite:a,index:n}}return{invite:void 0,index:-1}}function T(e,t){c.default.notEmpty(e,"inviteId");var n=y(e),a=n.invite,i=n.index;return c.default.assert(i>-1,"Invite doesn't exist"),!!a.destructor(t)&&(_[i]=void 0,!0)}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"init",value:function(e,t){v||(h=t,this._supportHours=e.supportHours,u.default.addStylesheet(r.default.LOADER_CSS_ID,r.default.LOADER_CSS),v=!0)}},{key:"triggerInvite",value:function(e,t){if(v&&t){I(t);var n=t.inviteId,a=t.state,u=y(n).invite;if(u){if(u.getState()===r.default.STATE.MAXIMIZED)return void h.trackInteraction({logLevel:f.default.LOG_LEVEL.INFO,message:f.default.LOG_EVENTS.SYSTEM_ERROR,logData:{action:r.default.TRACK_INTERACTION.INVITE_ALREADY_MAXIMIZED,inviteId:n}},!0);this.removeInvite(t)}var c,p=function(e,t){var n=t.inviteId,a={},i={};a.engaged=E;for(var r=0;r<e.length;r+=1)if(e[r]&&e[r].inviteId===n){i=e[r];break}return(0,l.default)(a,i,t),a}(e.invites||[],t),g=d.default.documentHasFocus();p.queue||(p.queue=t.fallbackQueue||e.workflowConfig.assistQueue),p.appId=e.appId,p.device=h.device,p.appleBusinessChat=h.appleBusinessChat,p.workflowConfig=e.workflowConfig,p.tabVisibleOnTrigger=g;try{var m=o.default.getTemplate(p.template),S=e.supportHours||this._supportHours;if(h.disableBackgroundInvite&&a===r.default.STATE.MAXIMIZED&&!g)return void h.trackInteraction({logLevel:f.default.LOG_LEVEL.INFO,message:f.default.LOG_EVENTS.SYSTEM_ERROR,logData:{action:r.default.TRACK_INTERACTION.INVITE_PAGE_BACKGROUND}},!0);var b=new i.default({config:p,template:m,supportHours:S,apis:(c=s.default.noop,{startInteraction:h.startInteraction,removeInvite:T,logEvent:h.logEvent,fifMessageSender:h.fifMessageSender||c,onStateChange:h.onStateChange||c,trackInteraction:h.trackInteraction||c})});_.push(b)}catch(e){var A=e.message||e;h.trackInteraction({logLevel:f.default.LOG_LEVEL.INFO,message:f.default.LOG_EVENTS.SYSTEM_ERROR,logData:{action:r.default.TRACK_INTERACTION.INVITE_INITIALIZATION_ERROR,inviteId:n,state:a,errorMsg:A,errorStack:e.stack}},!0)}}}},{key:"setInteractionActive",value:function(e){var t;c.default.isBoolean(e,"setInteractionActive:active"),E=e,t=function(t){return t.stimulus(r.default.STIMULI_TYPE.INTERACTION,e)},_.forEach(function(e){return e&&t(e)})}},{key:"removeInvite",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};I(e);var t=e.inviteId,n=e.force;try{return T(t,n)}catch(e){return!1}}}]),e}();t.default=new m},388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=c(n(389)),r=c(n(91)),o=c(n(24)),u=c(n(6)),s=c(n(89)),l=c(n(7)),d=c(n(33));function c(e){return e&&e.__esModule?e:{default:e}}var f=r.default.STATE,p="-",v=[f.MAXIMIZED,f.MINIMIZED];function h(e,t,n,a){return e[e.device+"."+t+"."+n]||e[t+"."+n]||e[""+n]||a}var E=function(){function e(t){var n=this,a=t.config,o=t.template,u=t.apis,l=t.supportHours;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._desiredState=a.state,this._inviteId=a.inviteId,this._caqueue=a.queue,this._caskill=a.skill,this._engaged=a.engaged,this._dockId=a.dockId,this._appInteractionId="",this._caTrueOnce=!1,this._caChecked=!1,this._stateChangedByAction=!1,this._caPoller=void 0,this._trackingId="",this._apis=u,this._ruleId=a.ruleId,this._appId=a.appId,this._tabVisibleOnTrigger=a.tabVisibleOnTrigger,this._trackAction(r.default.TRACK_INTERACTION.INVITE_REQUESTED),this._assistAvailability=new i.default(a.workflowConfig),this._invite=new o(a,function(e,t){e.split(p).map(function(e){return n.stimulus(r.default.STIMULI_TYPE.ACTION,e,t)})},u.fifMessageSender),this._caMap={},Object.keys(f).map(function(e){var t=f[e];return n._caMap[t]=h(a,t,"caType",r.default.AVAILABILITY_CHECK.NONE),0}),this._supportHours=new s.default(l,this._caqueue),this._preCheckSupportHours=h(a,a.state,"preCheckSupportHours","false"),this._pollInterval=a.pollInterval,this._pollDuration=a.pollDuration,this._checkAndLogAfterHours(),this._requestStateUpdate()}return a(e,[{key:"_checkAndLogAfterHours",value:function(){this._supportHours.isWithinSupportHours()||this._track(r.default.EVENT.QUEUE_AFTER_HOURS,this._getInviteMetadata({}))}},{key:"_requestStateUpdate",value:function(){var e,t,n,a,i,r,o,u=this,s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._caTrueOnce=!1,this._caChecked=!1,this._caType=this._caMap[this._desiredState],this._stopAvailabilityPoller(),this._pollInterval&&this._pollDuration&&(this._caPoller=(e=this._invokeAvailabilityCheck.bind(this),t=function(){return!u._engaged},n=parseInt(this._pollInterval,10),a=parseInt(this._pollDuration,10),i=!1,r=l.default.requestInterval(function(){if(t()&&!i){var r=a-n;l.default.requestTimeout(function(){o()},r),i=!0}e()},n),{clear:o=function(){l.default.clearRequestInterval(r)}})),s&&this._invokeAvailabilityCheck()}},{key:"_stopAvailabilityPoller",value:function(){this._caPoller&&this._caPoller.clear()}},{key:"_invokeAvailabilityCheck",value:function(){if(this._engaged)this.stimulus(r.default.STIMULI_TYPE.INTERACTION,!0);else if("true"!==this._preCheckSupportHours||this._supportHours.isWithinSupportHours()){switch(this._caType){case r.default.AVAILABILITY_CHECK.NONE:this.stimulus(r.default.STIMULI_TYPE.AVAILABILITY,!0,{});break;case r.default.AVAILABILITY_CHECK.REPEAT:this._checkAvailability();break;case r.default.AVAILABILITY_CHECK.ONCE:this._caChecked||this._checkAvailability();break;case r.default.AVAILABILITY_CHECK.TILL_AVAILABLE:this._caTrueOnce||this._checkAvailability()}this._caChecked=!0}else this.stimulus(r.default.STIMULI_TYPE.AVAILABILITY,!1,{})}},{key:"_trackAction",value:function(e){var t=this._state||this._desiredState;this._apis.trackInteraction({logLevel:d.default.LOG_LEVEL.INFO,message:d.default.LOG_EVENTS.USER_ACTION,logData:{action:e,inviteId:this._inviteId,appInteractionId:this._appInteractionId,state:t,tabVisibleOnTrigger:this._tabVisibleOnTrigger}},t===r.default.STATE.MAXIMIZED)}},{key:"stimulus",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(e+"_"+t){case r.default.STIMULI.AGENT_AVAILABLE:if(!this._engaged){var a=!this._caTrueOnce&&!this._stateChangedByAction;this._stateChangedByAction=!1,this._setState(this._desiredState,a),this._trackingId=n.trackingId||"",this._caTrueOnce||(this._caTrueOnce=!0)}break;case r.default.STIMULI.AGENT_UNAVAILABLE:if(!this._engaged)this._supportHours.isWithinSupportHours()?(this._setState(f.BUSY),this._track(r.default.EVENT.CA_CHECK_FAIL,this._getInviteMetadata({}))):this._setState(f.OFFLINE);break;case r.default.STIMULI.INTERACTION_STARTED:this._engaged=!0,this._setState(f.ENGAGED);break;case r.default.STIMULI.INTERACTION_ENDED:this._engaged=!1,this._requestStateUpdate();break;case r.default.STIMULI.INVITE_OFFERED:this._appInteractionId=o.default.uuid(),this._track(r.default.EVENT.INVITE_OFFERED,this._getInviteMetadata(n.event)),this._trackAction(r.default.TRACK_INTERACTION.INVITE_OFFERED);break;case r.default.STIMULI.INVITE_ACCEPTED:this._track(r.default.EVENT.INVITE_ACCEPTED,this._getInviteMetadata(n.event)),this._apis.startInteraction(this._getInviteMetadata(n.interaction)),this._trackAction(r.default.TRACK_INTERACTION.INVITE_ACCEPTED);break;case r.default.STIMULI.INVITE_DECLINED:this._track(r.default.EVENT.INVITE_DECLINED,this._getInviteMetadata(n.event)),this._trackAction(r.default.TRACK_INTERACTION.INVITE_DECLINED);break;case r.default.STIMULI.INVITE_IGNORED:this._track(r.default.EVENT.INVITE_IGNORED,this._getInviteMetadata(n.event)),this._trackAction(r.default.TRACK_INTERACTION.INVITE_IGNORED);break;case r.default.STIMULI.INVITE_REMOVED:this._apis.removeInvite(this.getInviteId());break;case r.default.STIMULI.INVITE_MINIMIZED:this._desiredState=r.default.STATE.MINIMIZED,this._state=void 0,this._engaged||(this._setState(f.MINIMIZED,!0),this._stateChangedByAction=!0),this._requestStateUpdate(!1)}}},{key:"getState",value:function(){return this._state}},{key:"getInviteId",value:function(){return this._inviteId}},{key:"_checkAvailability",value:function(){this._assistAvailability.check(this._caqueue,this._caskill,this.stimulus.bind(this,r.default.STIMULI_TYPE.AVAILABILITY)),this._apis.trackInteraction({logLevel:d.default.LOG_LEVEL.INFO,message:d.default.LOG_EVENTS.USER_ACTION,logData:{action:r.default.TRACK_INTERACTION.AVAILABILITY_CHECK}})}},{key:"_track",value:function(e,t){this._apis.logEvent({event:e,eventData:t})}},{key:"_getInviteMetadata",value:function(e){var t=(0,u.default)({},{queue:this._caqueue,ruleId:this._ruleId,state:this._state,appInteractionId:this._appInteractionId,triggerAppId:this._inviteId,inviteId:this._inviteId,trackingId:this._trackingId,appId:this._appId,dockId:this._dockId},e);return this._caskill&&!t.skill&&(t.skill=this._caskill),t}},{key:"_handleStateChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.inviteId=this._inviteId,this._apis.onStateChange(e)}},{key:"_setState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._invite&&this._state!==e){var n=void 0;try{n=this._invite.setState(e,t)}catch(t){var a=t.message||t;return void this._apis.trackInteraction({logLevel:d.default.LOG_LEVEL.INFO,message:d.default.LOG_EVENTS.SYSTEM_ERROR,logData:{action:r.default.TRACK_INTERACTION.INVITE_SET_STATE_ERROR,inviteId:this._inviteId,state:e,errorMsg:a,errorStack:t.stack}},!0)}this._state!==n&&this._handleStateChange({inviteState:n}),this._state=n}}},{key:"destructor",value:function(){if(!(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&v.indexOf(this._state)>=0)return!1;this._stopAvailabilityPoller();try{this._invite.destructor()}catch(e){}return this._invite=void 0,!0}}]),e}();t.default=E},389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=u(n(24)),r=u(n(3)),o=u(n(21));function u(e){return e&&e.__esModule?e:{default:e}}var s=window,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._chatConfig=t,this._trackingIdMap={}}return a(e,[{key:"check",value:function(e,t,n){this._makeServerCall(e,t,n)}},{key:"getTrackingId",value:function(e){return this._trackingIdMap[e]}},{key:"_makeServerCall",value:function(e,t,n){var a=this._getCallbackName("_tfs_"),i=this._chatConfig,r=i.overrideCaStatus,u=i.overrideQueue,l=e;u&&(l=u);var d=this._getResponseHandler(a,l,n);if(s[a]=d,r){var c={data:{caStatus:r}};"true"===r&&(c.data.trackingId="DEBUG01$12345"),d(c)}else o.default.injectScript(this._getURL(a,l,t),function(e){},document,{id:a},3e4)}},{key:"_getCallbackName",value:function(e){return e+i.default.get(10)}},{key:"_getResponseHandler",value:function(e,t,n){var a=this;return function(i){var r="false",o=void 0;i&&i.data&&(i.data.caStatus&&(r=i.data.caStatus),(o=i.data.trackingId)&&(a._trackingIdMap[t]=o));var u=document.getElementById(e);u&&u.parentNode.removeChild(u);try{delete s[e]}catch(t){s[e]=void 0}n(r,{trackingId:o})}}},{key:"_getURL",value:function(e,t,n){r.default.notEmpty(e,"callback name"),r.default.notEmpty(t,"queue");var a=this._chatConfig,i=a.assistCAEndpoint+"/rest/checkAvailability?",o={queueId:t,accountId:a.assistAccountId,jsonp:e};n&&(o.skillId=n);var u=this.getTrackingId(t);return u&&(o.trackingId=u),i+Object.keys(o).map(function(e){return e+"="+o[e]}).join("&")}}]),e}();t.default=l},39:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},390:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=_(n(391)),r=_(n(91)),o=_(n(106)),u=_(n(156)),s=_(n(21)),l=_(n(7)),d=_(n(154)),c=_(n(6)),f=_(n(3)),p=_(n(15)),v=_(n(169)),h=_(n(392)),E=_(n(14));function _(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=document,T=void 0,m={},S=/^tooltip(-(.+))?/;function b(){return"undefined"!=typeof AppleBusinessChat&&AppleBusinessChat.isSupported()}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e){if(Array.isArray(e))return e.map(function(e,n){return A(e,t,n)});var a=y.createElement(t.tag),o=""+r.default.INVITE_PREFIX+t.inviteId+"_";if(a.id=""+o+t.name+n,e.css&&s.default.setStyle(a,e.css,!0),e.text&&(a.innerHTML=e.text),e.tooltip&&S.test(e.action)){var u=e.action.match(S)[2]?e.action.match(S)[2].split("-"):["click","hover","focus"];new O(a,e.tooltip,a.id,u)}if(e.action&&t.signal&&!S.test(e.action))new h.default(a).on("tap",function(){var n=e.action,a=e.queue,i=e.skill,r={event:{},interaction:{}};a&&(r.event.queue=a,r.interaction.queue=a),i&&(r.event.skill=i,r.interaction.skill=i),t.signal(n,r)});if(e.attributes&&Object.keys(e.attributes).map(function(t){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return a.setAttribute(n,e.attributes[t]),0}),Array.isArray(e.animate)&&e.animate.map(function(e){var t=e.property,n=e.unit,r=e.from,o=e.to,u=e.duration,s=e.easing;return i.default.animateCSS(a,t,n,parseInt(r,10),parseInt(o,10),parseInt(u,10),s),0}),e.audio){var d=parseInt(e.audio.delay,10)||0,c=e.audio.name;v.default.register(c,e.audio),l.default.requestTimeout(function(){return v.default.play(c,!0)},d)}return t.parent&&t.parent.appendChild(a),a}}var O=function(){function e(t,n,a,i){var r=this;g(this,e),this.element=t,this.config=n,this.inviteId=a,this.tooltipElement=void 0,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),i.forEach(function(e){switch(e){case"hover":r._handle("mouseover","mouseout");break;case"click":r._handle("click","focusout");break;case"focus":r._handle("focusin","focusout")}})}return a(e,[{key:"_showTooltip",value:function(){if(!this.tooltipElement){var e=this.config,t=this.inviteId,n=A(e.container,{name:"tooltip_container",tag:"div",inviteId:t});A(e.before,{name:"tooltip_before",tag:"div",parent:n,inviteId:t}),A(e.content,{name:"tooltip_content",tag:"div",parent:n,inviteId:t}),A(e.after,{name:"tooltip_after",tag:"div",parent:n,inviteId:t}),this.tooltipElement=n,this.element.parentNode.appendChild(n)}}},{key:"_hideTooltip",value:function(){this.tooltipElement&&(this.tooltipElement.parentNode.removeChild(this.tooltipElement),this.tooltipElement=void 0)}},{key:"_handle",value:function(e,t){var n=this;this.element.addEventListener(e,function(){return n._showTooltip()}),this.element.addEventListener(t,function(){return n._hideTooltip()})}}]),e}(),w=function(){function e(t,n,a){g(this,e),this._config=u.default.parseConfig(t),this._signal=n,t.appleBusinessChat&&(m=t.appleBusinessChat),T=a}return a(e,[{key:"_clearTimeout",value:function(){this._timeout&&l.default.clearRequestTimeout(this._timeout)}},{key:"setState",value:function(e,t){f.default.notEmpty(e,"GenericInviteTemplate: state"),f.default.isBoolean(t,"GenericInviteTemplate: reset"),this.destructor();var n=this._config,a=n.device,i=void 0;if(!(a&&n[a]&&n[a][e]))return e;i=n[a][e],this._stateConfig=i;var u=i.timeout||{},v=u.duration,_=u.action,g=void 0===_?"ignore-remove":_;v&&(this._timeout=l.default.requestTimeout(this._signal.bind(this,g,{}),v)),d.default.alter("true"===i.restrictViewport),this._invite=function(e,t,n){var a;e.frame&&e.frame.css&&T(o.default.IFRAME_POST_MESSAGE.SET_IFRAME_CSS,e.frame.css,!0);var i=void 0,u=void 0,d=void 0;if(e.appleBusinessChat&&b()){var f=m,v=f.enabled,_=f.businessId,g=f.theme,y=f.intentId,S=f.groupId;if(v&&_){var O,w=(I(O={},r.default.APPLE_BUSINESS_CHAT.ATTRIBUTES.CLASS_NAME,r.default.APPLE_BUSINESS_CHAT.REQUIRED_CLASS),I(O,r.default.APPLE_BUSINESS_CHAT.ATTRIBUTES.BUSINESS_ID,_),I(O,r.default.APPLE_BUSINESS_CHAT.ATTRIBUTES.THEME,g),O),C=p.default.getFunctionReference(y);if(C){var k=C(t);k&&"string"==typeof k&&(w[r.default.APPLE_BUSINESS_CHAT.ATTRIBUTES.INTENT_ID]=k)}var R=p.default.getFunctionReference(S);if(R){var N=R(t);N&&"string"==typeof N&&(w[r.default.APPLE_BUSINESS_CHAT.ATTRIBUTES.GROUP_ID]=N)}return A((0,c.default)({},e.appleBusinessChat,{attributes:w}),{name:"applebusinesschat",tag:"div",inviteId:t})}}if(e.lightbox&&"true"===e.lightbox.show){var D=r.default.LIGHTBOX_CSS;e.lightbox.css&&(D=(0,c.default)({},D,{css:e.lightbox.css})),A(D,{name:"lightbox",tag:"div",parent:u=A({},{name:"wrapper",tag:"div",inviteId:t}),inviteId:t}),i=A(e.container,{name:"container",tag:"div",parent:u,inviteId:t}),d=u}else i=A(e.container,{name:"container",tag:"div",inviteId:t}),d=i;A(e.viewBackground?(0,c.default)({},e.viewBackground,{attributes:I({},r.default.VIEW_ENABLED_ATTRIBUTE,!0)}):void 0,{name:"view",tag:"div",parent:i,inviteId:t}),A(e.decorative,{name:"decorative",tag:"div",parent:i,inviteId:t});var M=A(e.content,{name:"content",tag:"div",parent:i,inviteId:t});if(A(e.badge?(0,c.default)({},e.badge,{css:{display:"none"},attributes:(a={},I(a,r.default.BADGE_ENABLED_ATTRIBUTE,!0),I(a,r.default.BADGE_HINT_ATTRIBUTE,e.badge.hintText),a)}):void 0,{name:"badge",tag:"div",parent:M,inviteId:t,signal:n}),A(e.context,{name:"context",tag:"div",parent:M,inviteId:t}),A(e.action,{name:"action",tag:"button",parent:M,inviteId:t,signal:n}),e.touchMove){var L=new h.default(d),P=void 0,x=function(){s.default.setStyle(d,e.container.css,!0)};L.on("sort",function(e){var t=e.start,n=e.end,a=t.x-P.left,i=t.y-P.top,r=Math.max(Math.min(n.y-i,window.innerHeight-P.height),0),o=Math.max(Math.min(n.x-a,window.innerWidth-P.width),0);s.default.setStyle(d,{top:r+"px",left:o+"px",right:"auto",bottom:"auto",transform:"initial",position:"fixed",webkitTapHighlightColor:"rgba(0,0,0,0)"})}),L.on("sortgrab",function(){P=d.getBoundingClientRect(),s.default.setStyle(d,{opacity:"0.8"}),s.default.addClass(d,"tfs-animate"),l.default.requestTimeout(function(){s.default.removeClass(d,"tfs-animate")},500)}),L.on("sortend",function(){P=void 0,s.default.setStyle(d,{opacity:"1"})}),window.addEventListener("orientationchange",x),E.default.isPhone||E.default.isTablet||window.addEventListener("resize",x)}return d}(i,n.inviteId,this._signal),"true"===n.cssReset&&s.default.addClass(this._invite,"tfs-reset-css"),this._lastWidgetUpdate&&this.widgetUpdate(this._lastWidgetUpdate);var S=y.querySelector(i.selector||"body");return this._invite&&S&&(S.insertBefore(this._invite,S.firstChild),b()&&AppleBusinessChat.setUpButtons()),t&&this._signal(r.default.ACTION.OFFER,{event:{state:e}}),e}},{key:"widgetUpdate",value:function(e){var t=e.unreadMessageCount,n=e.widgetView;if(this._invite){var a=this._invite.querySelector("["+r.default.BADGE_ENABLED_ATTRIBUTE+"=true]");if(a&&t){var i=a.getAttribute(r.default.BADGE_HINT_ATTRIBUTE);a.setAttribute("aria-label",t+" "+i),a.textContent=t,a.style.display="block"}var o=this._invite.querySelector("["+r.default.VIEW_ENABLED_ATTRIBUTE+"=true]");if(o&&this._stateConfig&&this._stateConfig.viewBackground){this._viewBackground||(this._viewBackground=o.style.background);var u=this._stateConfig.viewBackground[n]||this._viewBackground;o.style.background=u}}else this._lastWidgetUpdate={unreadMessageCount:t,widgetView:n}}},{key:"destructor",value:function(){try{var e=this._invite;return e&&e.parentNode.removeChild(e),this._clearTimeout(),this._invite=void 0,d.default.alter(!1),!0}catch(e){return!1}}}]),e}();t.default=w},391:function(e,t,n){var a,i,r;i=this,r=function(e){e.animate=function(e,n,a,i,r,o){if("number"==typeof e&&"number"==typeof n&&"number"==typeof a&&"function"==typeof i){"string"==typeof r&&t[r]&&(r=t[r]),"function"!=typeof r&&(r=t.linear),"function"!=typeof o&&(o=function(){});var u=window.requestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},s=!1,l=n-e;i(e);var d=window.performance&&window.performance.now?window.performance.now():+new Date;return u(function t(c){if(!s){var f=(c||+new Date)-d;f>=0&&i(r(f,e,l,a)),f>=0&&f>=a?(i(n),o()):u(t)}}),{cancel:function(){s=!0}}}},e.animateCSS=function(t,n,a,i,r,o,u,s){return e.animate(i,r,o,function(e){t.style[n]=e+a},u,s)},e.cancel=function(e){e&&e.cancel()};var t=e.easings={};t.linear=function(e,t,n,a){return n*e/a+t},t.easeInQuad=function(e,t,n,a){return n*(e/=a)*e+t},t.easeOutQuad=function(e,t,n,a){return-n*(e/=a)*(e-2)+t},t.easeInOutQuad=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},t.easeInCubic=function(e,t,n,a){return n*(e/=a)*e*e+t},t.easeOutCubic=function(e,t,n,a){return n*((e=e/a-1)*e*e+1)+t},t.easeInOutCubic=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},t.easeInQuart=function(e,t,n,a){return n*(e/=a)*e*e*e+t},t.easeOutQuart=function(e,t,n,a){return-n*((e=e/a-1)*e*e*e-1)+t},t.easeInOutQuart=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},t.easeInQuint=function(e,t,n,a){return n*(e/=a)*e*e*e*e+t},t.easeOutQuint=function(e,t,n,a){return n*((e=e/a-1)*e*e*e*e+1)+t},t.easeInOutQuint=function(e,t,n,a){return(e/=a/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},t.easeInSine=function(e,t,n,a){return-n*Math.cos(e/a*(Math.PI/2))+n+t},t.easeOutSine=function(e,t,n,a){return n*Math.sin(e/a*(Math.PI/2))+t},t.easeInOutSine=function(e,t,n,a){return-n/2*(Math.cos(Math.PI*e/a)-1)+t},t.easeInExpo=function(e,t,n,a){return 0==e?t:n*Math.pow(2,10*(e/a-1))+t},t.easeOutExpo=function(e,t,n,a){return e==a?t+n:n*(1-Math.pow(2,-10*e/a))+t},t.easeInOutExpo=function(e,t,n,a){return 0==e?t:e==a?t+n:(e/=a/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(2-Math.pow(2,-10*--e))+t},t.easeInCirc=function(e,t,n,a){return-n*(Math.sqrt(1-(e/=a)*e)-1)+t},t.easeOutCirc=function(e,t,n,a){return n*Math.sqrt(1-(e=e/a-1)*e)+t},t.easeInOutCirc=function(e,t,n,a){return(e/=a/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},t.easeInElastic=function(e,t,n,a){var i=0,r=n;if(0==e)return t;if(1==(e/=a))return t+n;if(i||(i=.3*a),r<Math.abs(n)){r=n;var o=i/4}else o=i/(2*Math.PI)*Math.asin(n/r);return-r*Math.pow(2,10*(e-=1))*Math.sin((e*a-o)*(2*Math.PI)/i)+t},t.easeOutElastic=function(e,t,n,a){var i=0,r=n;if(0==e)return t;if(1==(e/=a))return t+n;if(i||(i=.3*a),r<Math.abs(n)){r=n;var o=i/4}else o=i/(2*Math.PI)*Math.asin(n/r);return r*Math.pow(2,-10*e)*Math.sin((e*a-o)*(2*Math.PI)/i)+n+t},t.easeInOutElastic=function(e,t,n,a){var i=0,r=n;if(0==e)return t;if(2==(e/=a/2))return t+n;if(i||(i=a*(.3*1.5)),r<Math.abs(n)){r=n;var o=i/4}else o=i/(2*Math.PI)*Math.asin(n/r);return e<1?r*Math.pow(2,10*(e-=1))*Math.sin((e*a-o)*(2*Math.PI)/i)*-.5+t:r*Math.pow(2,-10*(e-=1))*Math.sin((e*a-o)*(2*Math.PI)/i)*.5+n+t},t.easeInBack=function(e,t,n,a,i){return void 0==i&&(i=1.70158),n*(e/=a)*e*((i+1)*e-i)+t},t.easeOutBack=function(e,t,n,a,i){return void 0==i&&(i=1.70158),n*((e=e/a-1)*e*((i+1)*e+i)+1)+t},t.easeInOutBack=function(e,t,n,a,i){return void 0==i&&(i=1.70158),(e/=a/2)<1?n/2*(e*e*((1+(i*=1.525))*e-i))+t:n/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},t.easeInBounce=function(e,n,a,i){return a-t.easeOutBounce(i-e,0,a,i)+n},t.easeOutBounce=function(e,t,n,a){return(e/=a)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},t.easeInOutBounce=function(e,n,a,i){return e<i/2?.5*t.easeInBounce(2*e,0,a,i)+n:.5*t.easeOutBounce(2*e-i,0,a,i)+.5*a+n}},void 0===(a=function(e){r(i.TinyAnimate=e)}.apply(t,[t]))||(e.exports=a)},392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=o(n(7)),r=o(n(15));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.touch=!1,this.action=!1,this.diffX=0,this.diffY=0,this.endX=0,this.endY=0,this.scroll=!1,this.sort=!1,this.startX=0,this.startY=0,this.swipe=!1,this._element=t,this._onEndBound=this.onEnd.bind(this),this._onMoveBound=this.onMove.bind(this),this._onStartBound=this.onStart.bind(this),this._element.addEventListener("touchstart",this._onStartBound),this._element.addEventListener("mousedown",this._onStartBound),this._element.addEventListener("touchmove",this._onMoveBound),this._element.addEventListener("touchend",this._onEndBound),this._element.addEventListener("touchcancel",this._onEndBound),this._onTap=r.default.noop,this._onSwipe=r.default.noop,this._onSwipeEnd=r.default.noop,this._onSort=r.default.noop,this._onSortEnd=r.default.noop,this._onSortGrab=r.default.noop}return a(e,[{key:"testTouch",value:function(e){if("touchstart"===e.type)this.touch=!0;else if(this.touch)return this.touch=!1,!1;return!0}},{key:"getCoord",value:function(e,t){return/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]["page"+t]:e["page"+t]}},{key:"onStart",value:function(e){var t=this;this.testTouch(e)&&!this.action&&(this.action=!0,this.startX=this.getCoord(e,"X"),this.startY=this.getCoord(e,"Y"),this.diffX=0,this.diffY=0,this.sortTimer=i.default.requestTimeout(function(){t.sort=!0,t._onSortGrab()},200),"mousedown"===e.type&&(document.addEventListener("mousemove",this._onMoveBound),document.addEventListener("mouseup",this._onEndBound)))}},{key:"onMove",value:function(e){this.action&&(this.endX=this.getCoord(e,"X"),this.endY=this.getCoord(e,"Y"),this.diffX=this.endX-this.startX,this.diffY=this.endY-this.startY,this.sort||this.swipe||this.scroll||(Math.abs(this.diffY)>10?this.scroll=!0:Math.abs(this.diffX)>7&&(this.swipe=!0)),this.swipe&&(e.preventDefault(),this._onSwipe({start:{x:this.startX,y:this.startY},end:{x:this.endX,y:this.endY}})),this.sort&&(e.preventDefault(),this._onSort({start:{x:this.startX,y:this.startY},end:{x:this.endX,y:this.endY}})),(Math.abs(this.diffX)>5||Math.abs(this.diffY)>5)&&i.default.clearRequestTimeout(this.sortTimer))}},{key:"onEnd",value:function(e){this.action&&(this.action=!1,this.swipe?this._onSwipeEnd():this.sort?this._onSortEnd():!this.scroll&&Math.abs(this.diffX)<5&&Math.abs(this.diffY)<5&&("touchend"===e.type&&e.preventDefault(),this._onTap()),this.swipe=!1,this.sort=!1,this.scroll=!1,i.default.clearRequestTimeout(this.sortTimer),"mouseup"===e.type&&(document.removeEventListener("mousemove",this._onMoveBound),document.removeEventListener("mouseup",this._onEndBound)))}},{key:"on",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.default.noop;switch(e){case"swipe":this._onSwipe=t;break;case"swipeend":this._onSwipeEnd=t;break;case"sort":this._onSort=t;break;case"sortend":this._onSortEnd=t;break;case"sortgrab":this._onSortGrab=t;break;case"tap":this._onTap=t}}}]),e}();t.default=u},393:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=s(n(91)),r=s(n(15)),o=s(n(21)),u=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}var l=document;var d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=this._processConfig(t),this._signal=n;var a=this._config.device;u.default.notEmpty(a,"device");var r=this._config[a].selector;u.default.notEmpty(r,"Selector '"+r+"'"),this._element=l.querySelector(r),u.default.isObject(this._element,r),this._actionListener=function(e,t){var n=t.currentTarget.getAttribute(i.default.ACTION_ATTRIBUTE);n&&e(n,{})}.bind(this,n),this._element.addEventListener("click",this._actionListener)}return a(e,[{key:"_processConfig",value:function(e){var t={};Object.keys(e).map(function(n){return r.default.setValueWithPath(t,".",n,e[n])});var n=t[t.device];return t.classes=[],Object.keys(n).map(function(e){var a=n[e];return a&&a.class&&t.classes.push(a.class),e.class}),t}},{key:"_searchAndReplace",value:function(e){for(var t=this._config.classes,n=this._element,a=0;a<t.length;a+=1)t[a]&&o.default.hasClass(n,t[a])&&o.default.removeClass(n,t[a]);e&&o.default.addClass(n,e)}},{key:"setState",value:function(e,t){u.default.notEmpty(e,"ClientManagedInviteTemplate: state"),u.default.isBoolean(t,"ClientManagedInviteTemplate: reset");var n=this._config,a=n.device,r=void 0;if(!(a&&n[a]&&n[a][e]))return e;(r=n[a][e]).action?this._element.setAttribute(i.default.ACTION_ATTRIBUTE,r.action):this._element.removeAttribute(i.default.ACTION_ATTRIBUTE),t&&this._signal(i.default.ACTION.OFFER,{event:{state:e}});var o=this._config[a].eventName?this._config[a].eventName:i.default.CUSTOM_EVENT_NAME,s=new CustomEvent(o,{detail:{inviteState:e,inviteId:this._config.inviteId}});return this._element.dispatchEvent(s),this._searchAndReplace(r.class),e}},{key:"destructor",value:function(){this._element.removeEventListener("click",this._actionListener)}}]),e}();t.default=d},394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=o(n(3)),r=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._signal=n}return a(e,[{key:"setState",value:function(e,t){var n=this;return i.default.notEmpty(e,"DirectInviteTemplate: state"),i.default.isBoolean(t,"DirectInviteTemplate: reset"),t&&(this._signal("offer-accept",{event:{state:e}}),r.default.requestTimeout(function(){n._signal("remove")},1)),e}},{key:"destructor",value:function(){}}]),e}();t.default=u},395:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={URL_PARAMS:{CONTEXT_INFO:"contextInfo",CLIENT_KEY:"clientKey",APP_ID:"appId",RULE_ID:"ruleId",INVITE_ID:"inviteId",LOAD_CUSTOMSCRIPT:"loadCustom",FIRE_LINK_PROPERTY:"fireLinkProperty",FIRE_TARGET_DETERMINATION:"fireTargetDetermination",IS_POPUP:"isPopup"},EXTENSIBLE:{SCRIPT_ID:"tfs-tie-extensible",PATH:"/psp/platform/",DOMAIN_PROD:"d1af033869koo7.cloudfront.net",DOMAIN_STAGE:"d2j8jkom7xmn9n.cloudfront.net",SCRIPT:"247pxe.js",SCRIPT_DEBUG:"247pxe.debug.js"},TYPE_BUTTON:"BUTTON",LOCAL_STORAGE_KEY:"tfs-directchat",DEBUG_KEY:"debug",WIDGET_STATE:{WIDGET_LOADING:"widgetLoading",WIDGET_LOADED:"widgetLoaded",CHAT_REQUESTED:"chatRequested",CHAT_CONNECTING:"chatConnecting",CHAT_RECONCILING:"chatReconciling",CHAT_STARTED:"chatStarted",CHAT_INTERACTIVE:"chatInteractive",CHAT_ENDED:"chatEnded",MINIMIZED:"minimized",MAXIMIZED:"maximized",WIDGET_CLOSED:"widgetClosed"},EVENTS:{TARGET_DETERMINATION:"TargetDeterminationEvent",LINK_PROPERTY:"LinkPropertyEvent",CONNECTION_TO_AGENT:"OnlineInteractionConnectionToAgentEvent"},IVR:{ANI:"ani",PHONE_NUMBER:"phoneNumber"},STATE_CHANGE_EVENT:"stateChange",WINDOW:{TITLE:"Chat",NAME:"Chat"},PRIVATE_BROWSING_MESSAGE:"To enable chat, open this web page in a new window that isn't using Private/Incognito mode."}},396:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=R(n(338)),o=R(n(79)),u=R(n(107)),s=R(n(687)),l=R(n(12)),d=R(n(19)),c=R(n(147)),f=R(n(153)),p=R(n(152)),v=R(n(21)),h=R(n(43)),E=R(n(7)),_=R(n(339)),g=R(n(3)),I=R(n(122)),y=R(n(689)),T=R(n(154)),m=R(n(690)),S=R(n(28)),b=R(n(123)),A=R(n(9)),O=R(n(336)),w=R(n(121)),C=R(n(33)),k=R(n(14));function R(e){return e&&e.__esModule?e:{default:e}}var N=void 0,D=void 0,M=!1,L=void 0,P=void 0,x=void 0,F=void 0,U=void 0,B=document,j=document.domain,Y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"init",value:function(e){x=e.metaData,U=e.securityRestrictions,T.default.init(U),p.default.init(U)}},{key:"updateState",value:function(e,t){m.default.updateState(e,t),s.default.setState(e,t)}},{key:"start",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=arguments[3];if(g.default.notEmpty(e,"appId"),r.default.setInteractionActive(!0),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll){o.default.update(e,i),F=o.default.get(e),f.default.isWidgetLoaded()||(u.default.browser.set(l.default.CONFIG_APP_ID,e),F.workflowConfig.chat&&u.default.browser.set(l.default.QUEUE,F.workflowConfig.chat.assistQueue)),(L=f.default.getInitialState()).app.displayMode=A.default.isUndefinedorNull(p)?m.default.getDisplayModeSetting(U):l.default.DISPLAY_MODE.FULLSCREEN,u.default.browser.get(l.default.DISPLAY_MODE_KEY)!==l.default.DISPLAY_MODE.NONE||I.default.isPopup()||O.default.getStorageType()!==l.default.STORAGE_TYPES.CUSTOM||(L.app.displayMode=l.default.DISPLAY_MODE.NONE),f.default.update(l.default.INITIAL_STATE,L);var T=F.i18n,R=T.locale,Y=T.uiStrings;if(u.default.browser.get(l.default.QUEUE)&&F.workflowConfig.chat&&(F.workflowConfig.chat.assistQueue=u.default.browser.get(l.default.QUEUE)),B.getElementById(l.default.TFS_CONTAINER_ID)){var G=u.default.tab.get(l.default.APP_SESSION_KEY),H=void 0;switch(G&&(H=G.minimized),H){case!0:return _.default.send(d.default.STATE_CHANGE,l.default.WIDGET_STATE.MAXIMIZED),void u.default.tab.set({app:{minimized:!1}});case!1:return;default:f.default.cleanUp()}}var V=v.default.createElement("nottoshow",{id:l.default.TFS_HIDE_COBROWSE_ID});P=v.default.createElement("div",{id:l.default.TFS_CONTAINER_ID,class:"tfs-reset-css"});var W=void 0;L.app.displayMode===l.default.DISPLAY_MODE.FULLSCREEN||U.frameInFrame||(W=v.default.createElement("div",{id:l.default.TFS_DRAG_ID,class:"tfs-reset-css"}),P.appendChild(W)),N=v.default.createElement("iframe",{id:l.default.TFS_IFRAME_ID,src:"about:blank",class:"tfs-reset-css",frameborder:"0",title:F.windowTitle,style:"height: 100%; width: 100%; border: 0; background-color: transparent; overflow: hidden;",allow:"autoplay"}),P.appendChild(N);var K=s.default.initialize({appConfig:F,securityRestrictions:U,dockId:t,maximizeWidget:function(){_.default.send(d.default.STATE_CHANGE,l.default.WIDGET_STATE.MAXIMIZED)}}),q=void 0,X=u.default.browser.get(l.default.APP_SESSION_KEY);q=A.default.isUndefinedorNull(X)||A.default.isUndefinedorNull(X.context)||A.default.isEmptyorNull(X.context.frameView)?I.default.isPopup()?l.default.FRAME_VIEW.POPUP:l.default.FRAME_VIEW.INPAGE:X.context.frameView,S.default.refreshContext({dockId:K?t:"",frameView:q});var z=p||B.body;if(m.default.initialize({config:F,securityRestrictions:U,container:P,parentElement:p,dragHandle:W,hasCustomMinimize:K}),U.frameInFrame&&b.default.init(m.default.isFullScreen()),u.default.browser.get(l.default.DISPLAY_MODE_KEY)!==l.default.DISPLAY_MODE.NONE||I.default.isPopup()?this.updateState(l.default.STYLE_STATE.MAXIMIZED):this.updateState(l.default.STYLE_STATE.HIDDEN),V?(V.appendChild(P),z.appendChild(V)):z.appendChild(P),U.thirdPartyFrame)_.default.initIntercom(h.default.parseUrl(x.path).origin,N.contentWindow),N.src=x.path+"/renderer.html#parentOrigin="+location.origin;else{_.default.initIntercom(location.origin,N.contentWindow);try{D=N.contentWindow.document}catch(e){M=!0,N.src="javascript:var d=document.open();d.domain='"+j+"';void(0);",D=N.contentWindow.document}D.open()._load=function(e,t){M&&(D.domain=e);var n=t+"/js/renderer"+(y.default?".min":".polyfill.min")+".js";D.body.appendChild(v.default.createElement("script",{id:l.default.TFS_SCRIPT_ID},"'use strict';/** * 24/7 Customer, Inc. Confidential, Do Not Distribute. This is an * unpublished, proprietary work which is fully protected under * copyright law. This code may only be used pursuant to a valid * license from 24/7 Customer, Inc. *//** * PreRender module * @module loader/pre-render */(function () {var _doc = document;var _htmlLoadingTemplate = '<style type=\\'text/css\\'>body {background-color: transparent;overflow: hidden;}body * {box-sizing: border-box;}#tfs_loading_container {font-family: \\'Helvetica Neue\\', Helvetica, Arial, sans-serif;position: absolute;top: 50%;left: 50%;width: 160px;background: #fafafa;border: 1px solid #d6d6d6;border-radius: 10px;padding: 10px;transform: translate(-50%, -50%);-webkit-transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);-moz-transform: translate(-50%, -50%);text-align: center;margin-top: 15px;}#tfs_loading_container * {user-select: none;-moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;}#tfs_loading_spinner {height: 60px; width: 100%;}#tfs_loading_text {font-size: 14px;color: #737373;}#tfs_loading_text:focus {outline: none;}#tfs_loading_close_button {display: none;line-height: 34px;border: none;background: #737373;color: #fafafa;border-radius: 5px;font-size: 13px;margin: 10px auto 0px;padding: 0px 20px;font-weight: bold;cursor: pointer;vertical-align: middle;outline: none;}</style><div id=\\'tfs_loading_container\\' class=\\'tfs_status_default\\'><div id=\\'tfs_loading_spinner\\'><svg width=\\'60\\' height=\\'60\\' viewBox=\\'0 0 60 60\\' stroke=\\'#bbb\\'><g fill=\\'none\\' fill-rule=\\'evenodd\\'><g stroke-width=\\'2.5\\'><circle stroke-opacity=\\'.3\\' cx=\\'50%\\' cy=\\'50%\\' r=\\'18\\'/><path d=\\'\\'></path></g></g></svg></div><div id=\\'tfs_loading_text\\' aria-live=\\'polite\\' tabindex=\\'-1\\'>\x3c!-- PRE_RENDER_LOADING --\x3e</div><button id=\\'tfs_loading_close_button\\' type=\\'button\\'>\x3c!-- PRE_RENDER_CLOSE --\x3e</button></div>';function startAnimation() {var container = _doc.getElementById('tfs_loading_spinner');var startAngle = 0;var step = function step() {var path = container.getElementsByTagName('path')[0];if (path) {path.setAttribute('d', _describeArc(30, 30, 18, startAngle, startAngle + 90));startAngle += 2;setTimeout(step, 5);}};step();}function _polarToCartesian(centerX, centerY, radius, angleInDegrees) {var angleInRadians = (angleInDegrees - 90) * Math.PI / 180.0;return {x: centerX + radius * Math.cos(angleInRadians),y: centerY + radius * Math.sin(angleInRadians)};}function _describeArc(x, y, radius, startAngle, endAngle) {var start = _polarToCartesian(x, y, radius, endAngle);var end = _polarToCartesian(x, y, radius, startAngle);var arcSweep = endAngle - startAngle <= 180 ? '0' : '1';var d = ['M', start.x, start.y, 'A', radius, radius, 0, arcSweep, 0, end.x, end.y].join(' ');return d;}_doc.getElementById('tfs_container_root_pre').innerHTML = _htmlLoadingTemplate;_doc.getElementById('tfs_loading_text').focus();startAnimation();})();".replace("\x3c!-- PRE_RENDER_CLOSE --\x3e",v.default.reduceTags(Y[R].PRE_RENDER_CLOSE)).replace("\x3c!-- PRE_RENDER_LOADING --\x3e",v.default.reduceTags(Y[R].PRE_RENDER_LOADING)))),U.frameInFrame&&k.default.safariVersion&&(v.default.removeClass(P,"tfs-reset-css"),E.default.requestTimeout(function(){v.default.addClass(P,"tfs-reset-css")},10)),function(e){var t=F,n=t.frontendsService,i=t.appId,r=c.default.CONFIG_API_ACTION.WIDGET_LOADING,u=S.default.getContext();u.appInteractionId&&w.default.setAppInteractionId(u.appInteractionId);n.opts.configuration?o.default.requestConfig(n,i,u,r,function(t,n){n&&(F=o.default.get(i)),t&&w.default.logInteraction({logLevel:C.default.LOG_LEVEL.INFO,message:C.default.LOG_EVENTS.SYSTEM_ERROR,logData:a({action:"API_ERROR"},t)},!0),e()},function(e){w.default.logInteraction({logLevel:C.default.LOG_LEVEL.INFO,message:C.default.LOG_EVENTS.SYSTEM_DEBUG,logData:a({action:"API_PERF"},e)},!0)}):e()}(function(){u.default.browser.get(l.default.INITIAL_WORKFLOW)||u.default.browser.set(l.default.INITIAL_WORKFLOW,F.workflow),v.default.injectScript(n,function(e){w.default.logInteraction({logLevel:C.default.LOG_LEVEL.INFO,message:C.default.LOG_EVENTS.SYSTEM_DEBUG,logData:{action:"SCRIPT_LOAD_RENDERER",url:n,status:e}},!0);var t=D.getElementById("tfs_loading_spinner"),a=D.getElementById("tfs_loading_text"),i=D.getElementById("tfs_loading_close_button");switch(e){case"error":t&&v.default.hide(t),a&&(a.innerHTML="\n                    <h3>\n                      <strong>"+v.default.reduceTags(Y[R].PRE_RENDER_FAILED_TITLE)+"</strong>\n                    </h3>\n                    <div>"+v.default.reduceTags(Y[R].PRE_RENDER_FAILED_DESC)+"</div>\n                  ",i&&(v.default.show(i),i.addEventListener("click",function(){P.parentNode.removeChild(P)})));break;case"timeout":a&&(a.innerHTML=v.default.reduceTags(Y[R].PRE_RENDER_TIMEOUT))}},D,{id:l.default.TFS_RENDERER_SCRIPT_ID},3e4)})},D.write("<!DOCTYPE html>\n        <html lang="+R+'>\n          <head>\n            <meta charset="utf-8">\n            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\n          </head>\n          <body\n            style=\'position:relative;height:100%;height:100vh;margin:0 auto;overflow:hidden;\'\n            onload=\'document._load("'+j+'", "'+x.path+"\");'>\n            <div id="+l.default.TFS_CONTAINER_ROOT_ID+"></div>\n            <div id="+l.default.TFS_CONTAINER_ROOT_PRE_ID+"></div>\n          </body>\n        </html>"),D.close(),u.default.browser.set(l.default.WIDGET_LOADED,!0),u.default.browser.set(l.default.SHOW_ON_RELOAD,!0),I.default.isPopup()&&u.default.browser.set(l.default.DISPLAY_MODE_KEY,l.default.DISPLAY_MODE.NONE),f.default.handleStateChange({widgetState:l.default.WIDGET_STATE.WIDGET_LOADING})}}else E.default.requestTimeout(function(){n.start(e,t,i,p)},50)}},{key:"stop",value:function(){var e=B.getElementById(l.default.TFS_HIDE_COBROWSE_ID);return!!e&&(e.parentNode.removeChild(e),m.default.terminate(),s.default.terminate(),w.default.unsetAppInteractionId(),r.default.setInteractionActive(!1),f.default.handleStateChange({widgetState:l.default.WIDGET_STATE.WIDGET_CLOSED}),P=void 0,!0)}},{key:"widgetNotification",value:function(e){s.default.widgetNotification(e)}}]),e}();t.default=new Y},40:function(e,t){var n=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?a:n)(e)}},41:function(e,t,n){"use strict";var a=n(11);e.exports=function(e,t){return!!e&&a(function(){t?e.call(null,function(){},1):e.call(null)})}},42:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(3),o=(a=r)&&a.__esModule?a:{default:a};var u=/^([a-z0-9.+-]+:)/i,s=/(https?:)\/\/([^/]+)(\/.*)*$/i,l=/(https?:\/\/[^/]+)(?:\/.+)*$/i,d=/^\s*$/,c=/\/(?!.*\/).*/,f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"normalizeUrl",value:function(e){o.default.notEmpty(e,"url");var t=window.location;return u.test(e)?e:/^\/\/.+/.test(e)?t.protocol+e:/^\/.+/.test(e)?t.origin+e:t.origin+t.pathname.replace(/\/[^/]+$/,"/")+e}},{key:"getOriginFromUrl",value:function(e){o.default.assert(e,"url");var t=void 0;if(e.protocol&&e.hostname){if(!(t=e.origin)){var n=e.port,a="";n&&"80"!==n&&"443"!==n&&(a=":"+n),t=e.protocol+"//"+e.hostname+a}}else o.default.notEmpty(e,"url"),t=this.normalizeUrl(e).replace(l,"$1");return t}},{key:"formatUrl",value:function(e){o.default.isObject(e,"urlObj"),o.default.notEmpty(e.origin,"urlObj.origin");var t=[e.origin];return e.pathname&&t.push(e.pathname),e.search&&t.push(e.search),e.hash&&t.push(e.hash),t.join("")}},{key:"parseUrl",value:function(e){var t=this;o.default.notEmpty(e,"url");var n=this.normalizeUrl(e),a=s.exec(n);if(!a)return{};var i=a[1],r=a[2],u=r.split(":");if(d.test(u[0]))return{};var l="",f="",p="",v=void 0;if(a[3]){var h=a[3].split("?");if(h.length>1)p=h[0],l="?"+(v=h[1].split("#"))[0],v.length>1&&(f="#"+v[1]);else{var E=a[3].split("#");p=E[0],E.length>1&&(f="#"+E[1])}}var _=function(e){return e},g=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&",i=arguments[4];o.default.isObject(n,"params"),o.default.assert(void 0===i||"boolean"==typeof i,"invalid encodeParams value");var r=i?encodeURIComponent:_,u=[];return e.length&&u.push(e.substring(1)),Object.keys(n).map(function(e){return u.push(e+"="+(void 0===e?"":r(n[e])))}),t+u.join(a)},I={protocol:i,host:r,hostname:u[0],port:u[1]?u[1]:"",origin:i+"//"+r,pathname:p,search:l,hash:f,href:n,replaceResource:function(e){if(c.test(I.pathname)){var n=c.exec(I.pathname)[0];I.pathname=I.pathname.replace(n,"/"+e)}return I.href=t.formatUrl(I),I},secure:function(){var e=/http:/i;return I.origin=I.origin.replace(e,"https:"),I.protocol=I.protocol.replace(e,"https:"),I.href=I.href.replace(e,"https:"),I},appendToHash:function(e,n,a){return I.hash=g(I.hash,"#",e,n,a),I.href=t.formatUrl(I),I},appendToSearch:function(e,n,a){return I.search=g(I.search,"?",e,n,a),I.href=t.formatUrl(I),I}};return I}},{key:"parseUrlParams",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?";o.default.notEmpty(e,"url"),o.default.assert(void 0===t||"?"===t||"#"===t,"invalid separator value");var n={},a=e.split(t);a.length>2&&(a[1]=a.splice(1,a.length-1).join(t));var i=void 0,r=void 0,u=void 0,s=void 0,l=void 0;if(a.length>1)for(i=a[1].split("&"),u=0;u<i.length;u+=1)s=(r=i[u].split("="))[0],r.splice(0,1),l=r.join("")||null,n[s]=decodeURIComponent(l);return n}}]),e}();t.default=new f},44:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isObject=function(e){return"object"===(void 0===e?"undefined":a(e))&&null!==e&&!t.isArray(e)},this.isString=function(e){return"string"==typeof e},this.isNumber=function(e){return"number"==typeof e},this.isArray=Array.isArray,this.isBoolean=function(e){return"boolean"==typeof e},this.isFunction=function(e){return"function"==typeof e}}},46:function(e,t){var n=0,a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+a).toString(36))}},47:function(e,t,n){var a=n(10);e.exports=function(e,t){if(!a(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!a(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!a(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!a(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},50:function(e,t,n){var a=n(35);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==a(e)?e.split(""):Object(e)}},51:function(e,t){e.exports=!1},52:function(e,t,n){var a=n(17)("unscopables"),i=Array.prototype;void 0==i[a]&&n(29)(i,a,{}),e.exports=function(e){i[a][e]=!0}},55:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t){var n=arguments;if(void 0===t||"object"!==(void 0===t?"undefined":a(t)))return t;for(var i=t,r=arguments.length<=1?0:arguments.length-1,o=function(t){var r=n.length<=t+1?void 0:n[t+1];void 0!==r&&"object"===(void 0===r?"undefined":a(r))&&Object.keys(r).map(function(t){return Object.prototype.hasOwnProperty.call(r,t)&&(void 0!==r[t]&&r[t].constructor&&r[t].constructor===Object?(void 0===i[t]&&(i[t]={}),"object"!==a(i[t])?i[t]=r[t]:e(i[t],r[t])):r[t]&&r[t].constructor===Array?i[t]=r[t].slice(0):i[t]=r[t]),0})},u=0;u<r;u+=1)o(u);return i}},61:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=s(n(3)),r=s(n(14)),o=s(n(43)),u=s(n(15));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"createRequest",value:function(e,t){var n=new XMLHttpRequest,a="onreadystatechange";return"withCredentials"in n?(n.open(e,t,!0),""===n.responseType&&(a="onload")):"undefined"!=typeof XDomainRequest?((n=new XDomainRequest).open(e,t),a="onload"):n=null,{xhr:n,onloadHandler:a}}},{key:"makeRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"get",t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u.default.noop,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u.default.noop,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:u.default.noop,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:u.default.noop,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:u.default.noop,p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:u.default.noop;i.default.isFunction(s,"success"),i.default.isFunction(l,"error");var v=t;if("get"===e.toLowerCase()&&null!=a){var h=Object.keys(a).map(function(e){return e+"="+encodeURIComponent(a[e])}).join("&");v=v+"?"+h}9===r.default.ieVersion&&(n.Authorization&&(v=o.default.parseUrl(v).appendToSearch({api_key:n.Authorization}).href),v=v.replace(/(http(s?):)\/\//,"//"));var E=this.createRequest(e,v),_=E.xhr,g=E.onloadHandler;if(_){_.requestBeginTs=(new Date).getTime(),_.timeout=d||3e4,Object.keys(n).map(function(e){return _.setRequestHeader&&_.setRequestHeader(e,n[e]),0});var I=function(){_.requestDoneTs=(new Date).getTime(),l({url:v,errorMsg:_.statusText||"CORS error",errorInfo:_.responseText})};_[g]=function(){if("onreadystatechange"!==g||4===_.readyState){var e=void 0;try{e=_.status}catch(t){e=0}if(0===e)I();else if(_.responseText||204===e){if(204===e){var t={code:204,statusText:_.statusText};s(JSON.stringify(t))}else s(_.responseText);_.requestDoneTs=(new Date).getTime(),void 0===_.onloadstart&&void 0===_.onloadend&&p({url:v,statusCode:_.status,loadTime:-1,turnTime:_.requestDoneTs-_.requestBeginTs})}else I()}},"ontimeout"in _&&(_.ontimeout=I),_.addEventListener("progress",c,!1),_.addEventListener("error",I,!1),_.addEventListener("abort",f,!1),_.addEventListener("loadstart",function(){_.requestStartTs=(new Date).getTime()},!1),_.addEventListener("loadend",function(){_.requestEndTs=(new Date).getTime(),p({url:v,statusCode:_.status,loadTime:_.requestEndTs-_.requestStartTs,turnTime:_.requestDoneTs-_.requestBeginTs})},!1),_.onerror=I,_.send(a)}}}]),e}();t.default=l},62:function(e,t,n){var a=n(16),i=n(8),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:a.version,mode:n(51)?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},63:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={STATES:{INIT:"INIT",INVITED:"INVITED",INITIALIZED:"INITIALIZED",TIMEOUT:"TIMEOUT",STARTED:"STARTED",JOINED:"JOINED",ENDED:"ENDED"},COMMANDS:{USER_CLOSE:"USER_CLOSE",AGENT_CLOSE:"AGENT_CLOSE"},MODES:{COBROWSE:"cobrowse",COVIEW:"coview"}}},65:function(e,t,n){n(97),e.exports=n(16).Array.find},679:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function e(t,n,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,a)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(a):void 0},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.default=function(e){return e?new H:new G};var o=R(n(12)),u=R(n(33)),s=R(n(106)),l=R(n(336)),d=R(n(152)),c=R(n(15)),f=R(n(14)),p=R(n(122)),v=R(n(107)),h=R(n(3)),E=R(n(121)),_=R(n(337)),g=R(n(386)),I=R(n(89)),y=R(n(79)),T=R(n(153)),m=R(n(338)),S=R(n(28)),b=R(n(9)),A=R(n(21)),O=R(n(43)),w=R(n(693)),C=R(n(694)),k=R(n(695));function R(e){return e&&e.__esModule?e:{default:e}}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var L=document,P={LISTENERS:["dispatchAction"]},x={},F=!1,U=void 0;function B(){if(F=!0,x.initdone){var e=c.default.getFunctionReference(x.initdone);"function"==typeof e&&e()}}function j(e){var t=y.default.get(e),n=S.default.getContext();E.default.init(x.key||"default",t.frontendsService,{vi:n.vi,tabId:v.default.getTabId(),userAgent:navigator.userAgent,browser:n.browser||void 0,device:n.device_id||void 0,os:n.os||void 0}),E.default.setAppId(e),_.default.configure({channelSessionId:n.vi+"::"+n.asid,events:t.events,onTrackEvent:t.apis.onTrackEvent?c.default.getFunctionReference(t.apis.onTrackEvent):void 0,logger:function(e){E.default.logInteraction({logLevel:u.default.LOG_LEVEL.INFO,message:u.default.LOG_EVENTS.SYSTEM_ERROR,logData:r({},e)},!0)}});var a=function(e){h.default.isArray(e,"securityRestrictions");var t={frameInFrame:!1,thirdPartyFrame:!1};return e.forEach(function(e){switch(e){case s.default.SECURITY.FRAME_IN_FRAME:t.frameInFrame=!0;break;case s.default.SECURITY.THIRD_PARTY_FRAME:t.thirdPartyFrame=!0}}),t}(t.securityRestrictions);a===s.default.SECURITY.FRAME_IN_FRAME&&d.default.changeBodyStyle(s.default.IFRAME_BODY);var i=c.default.getFunctionReference(t.apis.onStateChange)||c.default.noop;T.default.init({metaData:x,securityRestrictions:a,onStateChange:i,appId:e,storageType:l.default.getStorageType(),windowName:t.windowName}),m.default.init({supportHours:t.supportHours,timeZoneOffset:t.timeZoneOffset,securityRestrictions:a,onStateChange:i,appleBusinessChat:t.appleBusinessChat,disableBackgroundInvite:t.disableBackgroundInvite,appId:e}),g.default.init(t.journey,a,x.currentpagedata);var p=v.default.browser.get(o.default.PRECHAT_DATA_KEYS.VISITOR_ID);if(b.default.isEmptyorNull(p)?v.default.browser.set(o.default.PRECHAT_DATA_KEYS.VISITOR_ID,U):U!==p&&(E.default.logInteraction({logLevel:u.default.LOG_LEVEL.INFO,message:u.default.LOG_EVENTS.SYSTEM_ERROR,logData:{action:"VISITOR_ID_CHANGED",prevVisitorId:p,nextVisitorId:U,widgetLoaded:T.default.isWidgetLoaded(),storage:l.default.getStorageType()}},!0),_.default.log({event:"visitorIdChanged",eventData:{eventType:"VISITOR_ID_CHANGED",eventSource:"UDE",nextVi:U,prevVi:p,version:"ude-1.25.3",tabId:v.default.getTabId()}}),v.default.browser.set(o.default.PRECHAT_DATA_KEYS.VISITOR_ID,U)),E.default.logInteraction({logLevel:u.default.LOG_LEVEL.INFO,message:u.default.LOG_EVENTS.PAGE_INIT,logData:{storage:l.default.getStorageType(),storageReason:l.default.getStorageTypeReasons(),ieVersion:f.default.ieVersion||void 0,safariVersion:f.default.safariVersion||void 0,chromeVersion:f.default.chromeVersion||void 0,isMobileSafari:f.default.isMobileSafari||void 0,isAndroidTablet:f.default.isAndroidTablet||void 0,isIpad:f.default.isIpad||void 0,isTablet:f.default.isTablet||void 0,iosVersion:f.default.iosVersion||void 0,isPhone:f.default.isPhone||void 0,path:""+location.origin+location.pathname,compatMode:L.compatMode}},!0),L.compatMode,t.appleBusinessChat.enabled&&(f.default.isMac||f.default.isMobileSafari&&f.default.iosVersion>10)){var I=t.appleBusinessChat,O=I.scriptUrl,w=I.businessId;h.default.notEmpty(O,"appleBusinessChat.scriptUrl"),h.default.notEmpty(w,"appleBusinessChat.businessId"),A.default.injectScript(O,function(e){E.default.logInteraction({logLevel:u.default.LOG_LEVEL.INFO,message:u.default.LOG_EVENTS.SYSTEM_DEBUG,logData:{action:"SCRIPT_LOAD_ABC",url:O,status:e}},!0),B()},L,{id:o.default.APPLE_SCRIPT_ID},3e4)}else B()}var Y=function(){function e(){var t=this;M(this,e);var n=document.getElementById(o.default.WIDGET_LOADER_ID),a=O.default.parseUrl(n.src);n.setAttribute("data-path",a.origin+a.pathname.match(/(.*)\/js\/.*/)[1]),n.setAttribute("data-origin",a.origin),x=n.dataset;var i={};try{i=JSON.parse(decodeURIComponent(x.prechatdata))}catch(e){}if(i.clientId=x.key,S.default.refreshContext(i),U=i.vi,delete x.prechatdata,y.default.init({metaData:x}),"true"===x.auto){var s=x.appId;if(p.default.isPopup()){var l=p.default.getWindowParams();l&&l.appId&&(s=l.appId),l&&l.context&&S.default.refreshContext(l.context)}y.default.fetch(s,{},function(e){e.appId&&t.init(e.appId),e.err&&E.default.logInteraction({logLevel:u.default.LOG_LEVEL.INFO,message:u.default.LOG_EVENTS.SYSTEM_ERROR,logData:r({action:"API_ERROR"},e.err)},!0)},function(e){E.default.logInteraction({logLevel:u.default.LOG_LEVEL.INFO,message:u.default.LOG_EVENTS.SYSTEM_DEBUG,logData:r({action:"API_PERF"},e)})})}}return i(e,[{key:"init",value:function(e){var t=void 0;if(c.default.isString(e))t=e;else{var n=e;t=n.appId,y.default.set(n)}var a=y.default.get(t),i=!p.default.isPopup()&&a.forceCrossOrigin;l.default.init({initCallback:function(e){!function(e,t){var n=y.default.get(e),a=c.default.getObjectReference("workflowConfig.chat.assistAccountClientKeyMap",n),i=Array.isArray(a)&&a.length>1,s=S.default.getContext()[o.default.PRECHAT_DATA_KEYS.ACTIVE_SESSION];v.default.init({storage:t,activeSession:s,interLobEnabled:i,onStoreUpdate:T.default.updateState.bind(T.default)});var l=v.default.browser.get(o.default.APP_SESSION_KEY);l&&l.context&&S.default.refreshContext(l.context);var d=v.default.browser.get(o.default.CONFIG_APP_ID);d?y.default.fetch(d,{},function(e){e.appId&&j(e.appId),e.err&&E.default.logInteraction({logLevel:u.default.LOG_LEVEL.INFO,message:u.default.LOG_EVENTS.SYSTEM_ERROR,logData:r({action:"API_ERROR"},e.err)},!0)},function(e){E.default.logInteraction({logLevel:u.default.LOG_LEVEL.INFO,message:u.default.LOG_EVENTS.SYSTEM_DEBUG,logData:r({action:"API_PERF"},e)})}):j(e)}(t,e)},clientId:x.key,xdPath:x.path,getData:a.apis.getData?c.default.getFunctionReference(a.apis.getData):void 0,setData:a.apis.setData?c.default.getFunctionReference(a.apis.setData):void 0,forceCrossOrigin:i})}},{key:"startInteraction",value:function(e,t){if(!F)return!1;var n=t,a=e,i=n&&n.appId;return a&&a.prechatData&&(S.default.refreshContext(a.prechatData),a.prechatData.queue&&(n||(n={}),n.fallbackQueue=e.prechatData.queue),delete a.prechatData),y.default.fetch(i,a,function(e){e.appId&&(E.default.setAppId(e.appId),m.default.triggerInvite(e.appId,n)),e.err&&E.default.logInteraction({logLevel:u.default.LOG_LEVEL.INFO,message:u.default.LOG_EVENTS.SYSTEM_ERROR,logData:r({action:"API_ERROR"},e.err)},!0)},function(e){E.default.logInteraction({logLevel:u.default.LOG_LEVEL.INFO,message:u.default.LOG_EVENTS.SYSTEM_DEBUG,logData:r({action:"API_PERF"},e)})}),!0}},{key:"endInteraction",value:function(e){return m.default.removeInvite(e)}},{key:"sendContext",value:function(e){T.default.sendContext(e)}},{key:"pushJourneyUrl",value:function(e,t){var n,a,i;h.default.notEmpty(e,"pushJourneyUrl: Title"),h.default.notEmpty(t,"pushJourneyUrl: Url"),g.default.pushUrl(e,t),T.default.sendContext((n={},a=o.default.JOURNEY,i=g.default.getJourneyEncoded(),a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n))}},{key:"sendSystemMessage",value:function(e,t){h.default.notEmpty(e,"sendSystemMessage: content is not string or empty"),void 0!==t&&h.default.notEmpty(t,"sendSystemMessage: type is not string or empty"),T.default.sendSystemMessage({content:e,type:t})}},{key:"isWithinSupportHours",value:function(e){if(!F)return!1;var t=v.default.browser.get(o.default.CONFIG_APP_ID),n=y.default.get(t||"default");return new I.default(n.supportHours,e).isWithinSupportHours()}},{key:"isInteractionActive",value:function(){return T.default.isWidgetLoaded()}},{key:"login",value:function(e){return!!F&&(T.default.login(e),!0)}},{key:"logout",value:function(){return!!F&&(T.default.logout(),!0)}},{key:"setUserProfile",value:function(e){return!!F&&(T.default.setUserProfile(e),!0)}},{key:"getSessionContext",value:function(){return!!F&&T.default.getSessionContext()}},{key:"sendCustomCardResponse",value:function(e,t,n,a){return!!F&&T.default.sendCustomCardResponse(e,t,n,a)}}]),e}(),G=function(e){function t(){return M(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return D(t,Y),i(t,[{key:"init",value:function(e){F||w.default&&C.default&&k.default&&a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}}]),t}(),H=function(e){function t(){M(this,t);var e=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return T.default.addExtensibleListener(P.LISTENERS),e}return D(t,Y),i(t,[{key:"init",value:function(e,n){F||(b.default.isUndefinedorNull(n)||T.default.setParentElement(n),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e))}},{key:"reconfigure",value:function(e,n){b.default.isUndefinedorNull(n)||T.default.setParentElement(n),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this,e)}},{key:"cleanUp",value:function(e){return T.default.cleanUp(e)}},{key:"dispatchAction",value:function(e,t){T.default.dispatchAction(e,t)}}]),t}()},68:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"onChange",value:function(e){var t="hidden",n=function(n){var a=n||window.event,i={focus:!0,focusin:!0,pageshow:!0,blur:!1,focusout:!1,pagehide:!1};a.type in i?e(i[a.type]):e(!document[t])};if(void 0===document.hidden){var a=["moz","webkit","ms"];Object.keys(a).forEach(function(e){var i=a[e].concat("Hidden");i in document&&(t=i,document.addEventListener(a[e].concat("visibilitychange"),n))}),"onfocusin"in document?(document.onfocusin=n,document.onfocusout=n):(window.onpageshow=n,window.onpagehide=n,window.onfocus=n,window.onblur=n)}else document.addEventListener("visibilitychange",n)}}],[{key:"documentHasFocus",value:function(){return document.hasFocus?document.hasFocus():"hidden"in document?!document.hidden:!document.visibilityState||"visible"===document.visibilityState}}]),e}();t.default=i},680:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(158);var i=s(n(3)),r=s(n(121)),o=s(n(33)),u=s(n(682));function s(e){return e&&e.__esModule?e:{default:e}}var l=s(n(12)).default.STORAGE_KEY_NAMES.USER_SESSION+".",d="Session data length exceeded 500",c="CustomStorage::get - failed to get",f="CustomStorage::set - failed to set",p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._getData=t.getData,this._setData=t.setData}return a(e,[{key:"_log",value:function(e){r.default.logInteraction({logLevel:o.default.LOG_LEVEL.INFO,message:o.default.LOG_EVENTS.SYSTEM_ERROR,logData:{errorMsg:e}},!0)}},{key:"_checkDataLength",value:function(e,t){e.length>500&&this._log(t+" "+d)}},{key:"set",value:function(e){var t=this,n=e;i.default.isObject(e,"CustomStorage::set data");try{0;var a=u.default.encode(n);Object.keys(a).map(function(e){var n=a[e];return t._checkDataLength(JSON.stringify(n),e),t._setData(""+l+e,n),0})}catch(e){var r=f+": "+e;this._log(r)}}},{key:"get",value:function(e){var t=this;i.default.isFunction(e,"callback");var n={},a=u.default.getBuckets().reduce(function(e,t){return e[t]=!1,e},{});u.default.getBuckets().map(function(i){return t._getData(""+l+i,function(r,o){var s=o;try{n[r.substr(l.length)]=s}catch(e){var d=c+' "'+r+'" "'+JSON.stringify(s)+'": '+e;t._log(d)}a[i]=!0,!0===Object.keys(a).reduce(function(e,t){return e=e&&a[t]},!0)&&e(u.default.decode(n))}),0})}}]),e}();t.default=p},681:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(15),o=(a=r)&&a.__esModule?a:{default:a};var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"formatDate",value:function(e){var t=e.getFullYear(),n=o.default.lpad(e.getMonth()+1,2),a=o.default.lpad(e.getDate(),2),i=o.default.lpad(e.getHours(),2),r=o.default.lpad(e.getMinutes(),2),u=o.default.lpad(e.getSeconds(),2),s=o.default.lpad(e.getMilliseconds(),3),l=e.getTimezoneOffset();return t+"-"+n+"-"+a+" "+i+":"+r+":"+u+"."+s+" "+(""+(l>0?"-":"+")+o.default.lpad(Math.floor(Math.abs(l)/60),2)+o.default.lpad(Math.abs(l)%60,2))}}]),e}();t.default=new u},682:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=u(n(683)),r=u(n(6)),o=u(n(312));function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"encode",value:function(e){var t=this.getBuckets().reduce(function(e,t){return e[t]={},e},{}),n=i.default.flatten(e),a=o.default.KEY_MAP;return Object.keys(n).map(function(e){var i=a.find(function(t){return t.key===e});if(i){var o=n[e];"boolean"===i.type&&(o=!0===n[e]?1:0),t=(0,r.default)({},t,s({},i.bucket,s({},i.short,o)))}return 0}),t}},{key:"decode",value:function(e){var t={},n=i.default.flatten(e);return o.default.KEY_MAP.map(function(e){var a=e.bucket+"."+e.short;if(void 0!==n[a]){var i=n[a];"boolean"===e.type?i=1===n[a]:"number"===e.type&&(i=""===n[a]?void 0:n[a]),t=(0,r.default)({},t,s({},e.key,i))}return 0}),i.default.unflatten(t)}},{key:"getBuckets",value:function(){return o.default.BUCKETS}}]),e}();t.default=new l},683:function(e,t,n){var a=n(684);function i(e,t){var n=(t=t||{}).delimiter||".",i=t.maxDepth,r={};return function e(o,u,s){s=s||1,Object.keys(o).forEach(function(l){var d=o[l],c=t.safe&&Array.isArray(d),f=Object.prototype.toString.call(d),p=a(d),v=u?u+n+l:l;if(!c&&!p&&("[object Object]"===f||"[object Array]"===f)&&Object.keys(d).length&&(!t.maxDepth||s<i))return e(d,v,s+1);r[v]=d})}(e),r}e.exports=i,i.flatten=i,i.unflatten=function e(t,n){n=n||{};var i=n.delimiter||".";var r=n.overwrite||!1;var o={};var u=a(t);if(u||"[object Object]"!==Object.prototype.toString.call(t))return t;function s(e){var t=Number(e);return isNaN(t)||-1!==e.indexOf(".")||n.object?e:t}var l=Object.keys(t).sort(function(e,t){return e.length-t.length});l.forEach(function(a){for(var u=a.split(i),l=s(u.shift()),d=s(u[0]),c=o;void 0!==d;){var f=Object.prototype.toString.call(c[l]),p="[object Object]"===f||"[object Array]"===f;if(!r&&!p&&void 0!==c[l])return;(r&&!p||!r&&null==c[l])&&(c[l]="number"!=typeof d||n.object?{}:[]),c=c[l],u.length>0&&(l=s(u.shift()),d=s(u[0]))}c[l]=e(t[a],n)});return o}},684:function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},685:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=l(n(3)),o=l(n(12)),u=l(n(43)),s=l(n(385));function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t,n,a,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.default.isFunction(t,"XDStorage: successCallback"),r.default.isFunction(n,"XDStorage: errorCallback"),r.default.isFunction(a,"XDStorage: updateCallback"),r.default.notEmpty(i.storageKey,"XDStorage: options.storageKey"),r.default.notEmpty(i.sessionKey,"XDStorage: options.sessionKey"),r.default.notEmpty(i.path,"XDStorage: options.path"),this._storageKey=i.storageKey,this._sessionKey=i.sessionKey,this._successCallback=t,this._errorCallback=n,this._updateCallback=a;var o=void 0;o=i.path+"/xd.html",this._xdOrigin=u.default.parseUrl(o).secure().appendToHash({origin:location.origin,storageKey:this._storageKey},void 0,!0),this._xdUrl=this._xdOrigin.href,r.default.notEmpty(this._xdUrl,"xdUrl"),this._loadXdHtml(this._xdUrl)}return i(e,[{key:"_loadXdHtml",value:function(e){var t=null;(t=document.createElement("iframe")).id="tfsxdframe",t.src=e,document.getElementsByTagName("head")[0].appendChild(t),this._communicator=new s.default({origin:this._xdOrigin.origin,listener:this._messageHandler.bind(this),destinationWindow:t.contentWindow})}},{key:"_messageHandler",value:function(e){var t={};if(e.origin===this._xdOrigin.origin){try{t=JSON.parse(e.data)}catch(e){return}switch(t.queryCommand){case o.default.XD_COMMANDS.INITIALIZE:"object"===a(t.data)&&this._updateCallback(t.data),this._successCallback(o.default.STORAGE_TYPES.XD,this);break;case o.default.XD_COMMANDS.INITIALIZE_ERROR:this._errorCallback("XDSTORAGE_"+t.error);break;case o.default.XD_COMMANDS.UPDATE:if(t.data.key!==this._storageKey)break;var n={oldValue:t.data.oldValue,newValue:t.data.newValue};this._updateCallback(n)}}}},{key:"get",value:function(){}},{key:"set",value:function(e,t,n){this._sendCommand(o.default.XD_COMMANDS.SET,e,t,n)}},{key:"addStorageListener",value:function(){}},{key:"remove",value:function(e,t){this._sendCommand(o.default.XD_COMMANDS.REMOVE,e,t)}},{key:"_sendCommand",value:function(e,t,n,a){var i={command:e,key:t,value:n,opts:a};this._communicator.sendMessage(JSON.stringify(i))}}]),e}();t.default=d},686:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=v(n(79)),r=v(n(395)),o=v(n(12)),u=v(n(122)),s=v(n(7)),l=v(n(153)),d=v(n(107)),c=v(n(43)),f=v(n(28)),p=v(n(336));function v(e){return e&&e.__esModule?e:{default:e}}var h=void 0,E=void 0,_=void 0;var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"init",value:function(e){h=e.metaData,E=e.storageType}},{key:"getPopupWindowConfig",value:function(e,t){var n,a,s=i.default.get(e),l=function(e){var t={};switch(e.popupWindow.windowPosition){case o.default.POSITION.TOP_LEFT:t.left=0,t.top=0;break;case o.default.POSITION.TOP_RIGHT:t.left=window.screen.width-e.windowWidth,t.top=0;break;case o.default.POSITION.BOTTOM_LEFT:t.left=0,t.top=window.screen.height-e.windowHeight;break;case o.default.POSITION.BOTTOM_RIGHT:t.left=window.screen.width-e.windowWidth,t.top=window.screen.height-e.windowHeight;break;default:t.left=0,t.top=0}return t}(s),d=(n=void 0,a=[r.default.URL_PARAMS.CLIENT_KEY+"="+h.key,r.default.URL_PARAMS.IS_POPUP+"=true"].join("&"),n=h.path+"/apploader.html",(n=c.default.parseUrl(n).secure().href)+"?"+a),p={appId:e,overrideConfig:t,context:f.default.getContext(),storageType:E};return{windowUrl:d,windowName:u.default.generateSecureWindowName(p),windowFeatures:["width="+s.popupWindow.windowWidth,"height="+s.popupWindow.windowHeight,"resizeable=yes","left="+l.left,"top="+l.top].join(",")}}},{key:"start",value:function(e,t){var n=this;if(_)_.focus();else{var a=this.getPopupWindowConfig(e,t),i=a.windowUrl,r=a.windowName,u=a.windowFeatures;if(_=parent.window.open(i,r,u),d.default.browser.set(o.default.DISPLAY_MODE_KEY,o.default.DISPLAY_MODE.NONE),d.default.addListener(o.default.VISITOR_SESSION_ID_KEY,function(e,t){!!t&&(l.default.update(o.default.INITIAL_STATE,{chat:{visitorSessionId:t}}),l.default.reconcileWidget())}),d.default.addListener(o.default.VA_TURNS_ID_KEY,function(e,t){!!t&&(l.default.update(o.default.INITIAL_STATE,{va:{turnsId:t}}),l.default.reconcileWidget())}),d.default.addListener(o.default.DOMAIN_ALIASES_KEY,function(e,t){var a=t;n.update(o.default.INITIAL_STATE,{chat:{domainAliases:a}})}),p.default.getStorageType()===o.default.STORAGE_TYPES.CUSTOM)var c=s.default.requestInterval(function(){_.closed&&(l.default.cleanUp(),s.default.clearRequestInterval(c))},1e3)}}},{key:"resetPopupWindow",value:function(){_=void 0}}]),e}();t.default=new g},687:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=l(n(156)),r=l(n(91)),o=l(n(12)),u=l(n(123)),s=l(n(14));function l(e){return e&&e.__esModule?e:{default:e}}var d=void 0,c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"initialize",value:function(e){var t=e.appConfig,n=e.dockId,a=void 0===n?"":n,o=e.securityRestrictions,l=e.maximizeWidget;if(d)return!0;var c=(t.minimizedDock.customDocks||[]).filter(function(e){return e.dockId===a})[0];if(!c)return!1;c.device=s.default.getDevice(),c.inviteId=a;var f=i.default.getTemplate(c.template),p=void 0;o.frameInFrame&&(p=u.default.sendMessage);try{d=new f(c,function(e){r.default.STIMULI_TYPE.ACTION+"_"+e===r.default.STIMULI.INVITE_ACCEPTED&&l()},p)}catch(e){return!1}return!!d}},{key:"setState",value:function(e){var t=e!==o.default.STYLE_STATE.MINIMIZED?r.default.STATE.MAXIMIZED:r.default.STATE.MINIMIZED;try{d&&d.setState(t,!1)}catch(e){}}},{key:"terminate",value:function(){try{d&&d.destructor()}catch(e){}d=void 0}},{key:"widgetNotification",value:function(e){try{d&&d.widgetUpdate(e)}catch(e){}}}]),e}();t.default=c},688:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=d(n(339)),r=d(n(63)),o=d(n(7)),u=d(n(19)),s=d(n(21)),l=d(n(6));function d(e){return e&&e.__esModule?e:{default:e}}var c=void 0,f=void 0,p={CHAT_COBROWSE_IN_PROGRESS:"You are sharing this page.",CHAT_COBROWSE_STOP:"Stop sharing"},v=new(d(n(68)).default),h=window,E=document,_=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e){e&&t.cobrowseSessionData&&t.cobrowseContinueSession(t.cobrowseSessionData)}.bind(this);v.onChange(n)}return a(e,[{key:"cobrowseCreateSession",value:function(e,t,n){var a=this;p=(0,l.default)({},p,n),window.isInit&&"function"==typeof window.CreateSession?window.CreateSession(e,function(e){i.default.send(u.default.COBROWSE,{state:r.default.STATES.INITIALIZED,adminUrl:e})},function(e){i.default.send(u.default.COBROWSE,{state:r.default.STATES.STARTED,cookieData:e}),a.cobrowseSessionData=e.cookieData,a.addSharingProgressDock()},null,t):o.default.requestTimeout(function(){a.cobrowseCreateSession(e)},1e3)}},{key:"disconnectCobrowse",value:function(){h.disconnect&&(this.cobrowseSessionData=null,h.disconnect(),this.removeSharingProgressDock())}},{key:"userClickedEndCobrowse",value:function(){i.default.send(u.default.COBROWSE,{state:r.default.COMMANDS.USER_CLOSE}),this.disconnectCobrowse(),this.removeSharingProgressDock()}},{key:"resumeCobrowse",value:function(e){var t=this;p=(0,l.default)({},p,e.uiStrings),s.default.injectScript(e.url,function(n){var a=void 0;"timeout"===n||"error"===n||(a=e.cobrowseId+";"+e.mode,t.cobrowseContinueSession(a))},document,{id:"tfs-screenshare-js"},3e4)}},{key:"cobrowseContinueSession",value:function(e){var t=this;this.cobrowseSessionData=e,window.isInit&&"function"==typeof window.CreateSession?(window.ContinueSession(e),this.addSharingProgressDock()):o.default.requestTimeout(function(){t.cobrowseContinueSession(e)},1e3)}},{key:"addSharingProgressDock",value:function(){this.removeSharingProgressDock(),f=s.default.createElement("span",{id:"tfs-cobrowse-dock-cancel"},"<svg xmlns='http://www.w3.org/2000/svg' width='10' height='9' viewBox='0 0 10 10'>\n          <rect width='10' height='10' fill='#FFFFFF' fill-rule='evenodd' rx='2'/>\n        </svg>\n        <span>"+p.CHAT_COBROWSE_STOP+"</span>"),c=s.default.createElement("div",{id:"tfs-cobrowse-dock",class:"cobrowse-boundary"},[s.default.createElement("span",{id:"tfs-cobrowse-dock-span-2"},p.CHAT_COBROWSE_IN_PROGRESS),f,s.default.createElement("style",{id:"tfs-cobrowse-dock-style"},"#tfs-cobrowse-dock {\n          position: fixed;\n          top: 0px;\n          text-align: center;\n          font-size: 12px;\n          padding: 2px;\n          color: white;\n          background: rgb(0,128,0);\n          z-index: 1000000;\n          left: 50%;\n          transform: translateX(-50%);\n          -ms-transform: translateX(-50%);\n          border-radius: 0px 0px 5px 5px;\n          -ms-border-radius: 0px 0px 5px 5px;\n          margin: 0;\n          user-select: none;\n          cursor: default;\n          font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n        }\n        #tfs-cobrowse-dock-cancel {\n          display: inline-block;\n          height: 20px;\n          padding: 0px 10px 0px 10px;\n          line-height: 20px;\n          border-radius: 4px;\n          -ms-border-radius: 4px;\n          cursor: pointer;\n        }\n        #tfs-cobrowse-dock-cancel:hover {\n          background-color: rgba(0,0,0,0.2);\n        }\n        #tfs-cobrowse-dock-span-2 {\n          margin: 0 50px 0 10px;\n        }")]),this.userClickedEndCobrowseBound=this.userClickedEndCobrowse.bind(this),f.addEventListener("click",this.userClickedEndCobrowseBound),E.body.appendChild(c)}},{key:"removeSharingProgressDock",value:function(){c=E.getElementById("tfs-cobrowse-dock"),f=E.getElementById("tfs-cobrowse-dock-cancel"),c&&(c.parentNode.removeChild(c),c=null,f.removeEventListener("click",this.userClickedEndCobrowseBound),f=null)}}]),e}();t.default=new _},689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){try{window.eval("var test = (x) => x + 1")}catch(e){return!1}return!0}()},690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=f(n(21)),i=f(n(12)),r=f(n(152)),o=f(n(691)),u=f(n(14)),s=f(n(692)),l=f(n(122)),d=f(n(9)),c=f(n(107));function f(e){return e&&e.__esModule?e:{default:e}}var p=window,v=document.documentElement,h=u.default.isAndroid?800:300,E=(0,o.default)(function(e){["resize","orientationchange"].indexOf(e.type)>-1&&D(!1),F(i.default.STYLE_TRANSITION.SCROLL)},h),_=(0,o.default)(function(){c.default.tab.set("position",k)},1e3),g=!1,I=void 0,y=void 0,T=void 0,m=void 0,S=void 0,b=void 0,A=void 0,O=void 0,w=void 0,C={x:0,y:0},k={x:0,y:0},R={x:100,y:100};function N(){p.removeEventListener("scroll",E),p.removeEventListener("orientationchange",E),p.removeEventListener("resize",E),s.default.remove(),g=!1}function D(e){var t=void 0,n=void 0,a=c.default.tab.get("position");if(a&&e){var i=P(a.x,a.y);t=i.offsetX,n=i.offsetY}else{var r=P(M()?0:100,100);t=r.offsetX,n=r.offsetY,t+=M()?O:-O}Y(t,n)}function M(){return m===i.default.POSITION.BOTTOM_LEFT}function L(){return!d.default.isUndefinedorNull(A)}function P(e,t){var n=K();return G(e/100*n.screenWidth,t/100*n.screenHeight)}function x(e,t){switch(I){case i.default.STYLE_STATE.MAXIMIZED:case i.default.STYLE_STATE.CARD:j(e,t)}F(i.default.STYLE_TRANSITION.IMMEDIATE)}function F(e){var t,n,a,o,s;b.frameInFrame?(t=H(),n=t.frameWidth,a=t.frameHeight,o=V()&&U(),s=!V()&&U(),r.default.setStyle(y,{bottom:"0",right:s?q(O):"0",width:o?"100%":q(n),height:o?"100%":q(a),position:"fixed",backgroundColor:"transparent",zIndex:"214783647",boxShadow:"none",display:"block"},!0)):V()&&U()?function(e){r.default.setStyle(y,{top:"0px",left:"0px",right:"0px",width:"100%",height:"100%",position:"fixed",display:"block",margin:"0 0 0 0",transition:B(e)})}(e):L()?r.default.setStyle(y,{width:"100%",height:"100%"}):function(e){var t=function(){var e=C.x,t=C.y,n=K(),a=n.screenWidth,r=n.screenHeight,o=function(){var e=w.desktop;u.default.isPhone?e=w.phone:u.default.isTablet&&(e=w.tablet);return e}(),s=o.offsetX,l=o.offsetY;switch(I){case i.default.STYLE_STATE.MAXIMIZED:break;case i.default.STYLE_STATE.MINIMIZED:e=M()?s:a-R.x-s,t=r-R.y-l;break;case i.default.STYLE_STATE.CARD:m!==i.default.POSITION.BOTTOM_LEFT&&(e-=S.width-30);break;case i.default.STYLE_STATE.PLUSCARD:e=35,t=35}return G(e,t)}(),n=t.offsetX,a=t.offsetY,o=t.correctionX,s=t.correctionY,l=function(e,t){return{offsetLeft:p.pageXOffset+e,offsetTop:p.pageYOffset+t}}(n,a),d=l.offsetTop,c=l.offsetLeft,f=H(),v=f.frameWidth,h=f.frameHeight;j(o,s),r.default.setStyle(y,{top:q(d),left:q(c),right:"auto",width:q(v),height:q(h),position:"absolute",display:I===i.default.STYLE_STATE.HIDDEN?"none":"block",margin:"auto",transition:B(e)}),T&&r.default.setStyle(T,{display:I===i.default.STYLE_STATE.MINIMIZED?"none":"block"})}(e)}function U(){return I===i.default.STYLE_STATE.MAXIMIZED||I===i.default.STYLE_STATE.CARD||I===i.default.STYLE_STATE.PLUSCARD}function B(e){switch(e){case i.default.STYLE_TRANSITION.SCROLL:return"top 800ms cubic-bezier(0.22, 0.95, 0.1, 0.88), left 800ms cubic-bezier(0.22, 0.95, 0.1, 0.88)";case i.default.STYLE_TRANSITION.RESIZE:return"top 100ms, left 100ms, height 100ms, width 100ms";default:return""}}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(e||t)&&Y(C.x+e,C.y+t)}function Y(e,t){C.x=e,C.y=t;var n=K(),a=n.screenWidth,i=n.screenHeight;0!==a&&0!==i&&(k.x=Math.round(e/a*100),k.y=Math.round(t/i*100),_())}function G(e,t){var n=e,a=t,i=0,r=0,o=K(),u=o.screenWidth,s=o.screenHeight,l=H(),d=l.frameWidth,c=l.frameHeight;return n+d>u?i=u-(n+d):n<0&&(i=-n),n+=i,a+c>s?r=s-(a+c):a<0&&(r=-a),{offsetX:n,offsetY:a+=r,correctionX:i,correctionY:r}}function H(){var e=void 0,t=void 0;if(b.frameInFrame)e=Number.MAX_VALUE,t=Number.MAX_VALUE;else{var n=K();e=n.screenWidth,t=n.screenHeight}var a=0,r=0,o=S,u=o.width,s=o.height;switch(I){case i.default.STYLE_STATE.MAXIMIZED:a=u>e?e:u,r=s>t?t:s;break;case i.default.STYLE_STATE.MINIMIZED:a=R.x,r=R.y;break;case i.default.STYLE_STATE.CARD:var l=2*u-30;a=l>e?e:l,r=s>t?t:s;break;case i.default.STYLE_STATE.PLUSCARD:a=e-2*O,r=t-2*O}return{frameWidth:a,frameHeight:r}}function V(){return W()===i.default.DISPLAY_MODE.FULLSCREEN}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;return u.default.isPhone||l.default.isPopup()||u.default.isTablet&&e.frameInFrame?i.default.DISPLAY_MODE.FULLSCREEN:i.default.DISPLAY_MODE.FLOATING}function K(){return{screenHeight:v.clientHeight-a.default.getKeyboardHeight(),screenWidth:v.clientWidth}}function q(e){return Math.round(e)+"px"}t.default={initialize:function(e){var t=e.config,n=e.container,r=e.dragHandle,o=e.securityRestrictions,u=e.hasCustomMinimize,l=e.parentElement;N(),function(e,t,n,a,r){I=i.default.STYLE_STATE.MAXIMIZED,y=t,T=n,b=a,A=r;var o=e.windowPosition,u=e.windowWidth,s=e.windowHeight,l=e.windowOffset,d=e.minimizedDock;m=o,S={width:u,height:s},O=l,w=d}(t,n,r,o,l),L()||(D(!0),p.addEventListener("scroll",E),p.addEventListener("orientationchange",E),p.addEventListener("resize",E)),function(){var e=b.frameInFrame?{height:"100%",width:"100%",backgroundColor:"transparent",position:"fixed"}:{backgroundColor:"transparent",zIndex:"2147483647"};if(L()&&(e={height:"100%",width:"100%"}),a.default.setStyle(y,e),T){var t={position:"absolute",top:"10px",right:"90px",height:"34px",zIndex:"10",width:S.width-134+"px",cursor:"move"};a.default.setStyle(T,t),s.default.add(y,T,x,!0)}}(),u&&(R.x=0,R.y=0),g=!0},terminate:N,updateState:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];g&&(I=e,F(t?i.default.STYLE_TRANSITION.IMMEDIATE:i.default.STYLE_TRANSITION.RESIZE))},isFullScreen:V,getDisplayModeSetting:W}},691:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var a=this,i=void 0;return function(){for(var r=arguments.length,o=Array(r),u=0;u<r;u++)o[u]=arguments[u];var s=a,l=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(s,o)},t),l&&e.apply(s,o)}}},692:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(3),o=(a=r)&&a.__esModule?a:{default:a};var u=void 0,s=void 0,l=void 0,d=void 0,c=.8,f="position: absolute; width: 100%; height: 100%;",p=document;function v(e){return{x:e.pageX?e.pageX:e.changedTouches[0].pageX,y:e.pageY?e.pageY:e.changedTouches[0].pageY}}function h(e){e.preventDefault(),e.stopPropagation(),s.style.cssText=f;var t=v(e),n=t.x,a=t.y;u.lastXPosition=n,u.lastYPosition=a,p.addEventListener("selectstart",E),p.addEventListener("dragstart",E),p.addEventListener("mousemove",_),p.addEventListener("mouseup",g),p.addEventListener("touchmove",_),p.addEventListener("touchend",g)}function E(){return!1}function _(e){u.style.opacity=c;var t=void 0,n=void 0;try{var a=v(e);t=a.x,n=a.y}catch(e){return}var i=t-u.lastXPosition,r=n-u.lastYPosition;l(i,r),u.lastXPosition=t,u.lastYPosition=n}function g(){p.removeEventListener("selectstart",E),p.removeEventListener("dragstart",E),p.removeEventListener("mousemove",_),p.removeEventListener("mouseup",g),p.removeEventListener("touchmove",_),p.removeEventListener("touchend",g),u.style.opacity=1,s.style.cssText=d}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"add",value:function(e,t,n){o.default.isObject(e,"element"),o.default.isObject(t,"handle"),this.remove(),u=e,s=t,d=t.style.cssText,l=n,s.addEventListener("mousedown",h),s.addEventListener("touchstart",h)}},{key:"remove",value:function(){s&&(s.removeEventListener("mousedown",h),s.removeEventListener("touchstart",h))}}]),e}();t.default=new I},693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=!1,t=[1],n=void 0;try{n=t.map(function(e){return e+1}),e=t[0]+1===n[0]}catch(e){}return e}()},694:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=!1;try{e="a"===Object.keys({a:1})[0]}catch(e){}return e}()},695:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=!1,t=[1],n=[];try{t.forEach(function(e,t){n[t]=e+1}),e=t[0]+1===n[0]}catch(e){}return e}()},7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=arguments,o=n(14),u=(a=o)&&a.__esModule?a:{default:a};var s=function(e){return window.setTimeout(e,1e3/60)},l=void 0,d=0;function c(e,t){do{d===e?d=0:d+=1}while(Object.prototype.hasOwnProperty.call(t,d));return d}var f=function(){var e=void 0;if(window.Worker&&window.Blob&&!u.default.ieVersion)try{var t={},n=new Blob(["\n        var fakeIdToId = {};\n        onmessage = function (event) {\n          var data = event.data,\n            name = data.name,\n            fakeId = data.fakeId,\n            time;\n          if(data.hasOwnProperty('time')) {\n            time = data.time;\n          }\n          switch (name) {\n            case 'setInterval':\n              fakeIdToId[fakeId] = setInterval(function() {\n                postMessage({fakeId: fakeId});\n              }, time);\n              break;\n            case 'clearInterval':\n              if (fakeIdToId.hasOwnProperty (fakeId)) {\n                clearInterval(fakeIdToId[fakeId]);\n                delete fakeIdToId[fakeId];\n              }\n              break;\n            case 'setTimeout':\n              fakeIdToId[fakeId] = setTimeout(function() {\n                postMessage({fakeId: fakeId});\n                if (fakeIdToId.hasOwnProperty (fakeId)) {\n                  delete fakeIdToId[fakeId];\n                }\n              }, time);\n              break;\n            case 'clearTimeout':\n              if (fakeIdToId.hasOwnProperty (fakeId)) {\n                clearTimeout(fakeIdToId[fakeId]);\n                delete fakeIdToId[fakeId];\n              }\n              break;\n          }\n        };\n      "]),a=window.URL.createObjectURL(n);(l=new Worker(a)).onmessage=function(e){var n=e.data.fakeId,a=void 0,i=void 0,r=void 0;Object.prototype.hasOwnProperty.call(t,n)&&(r=(a=t[n]).callback,i=a.parameters,Object.prototype.hasOwnProperty.call(a,"isTimeout")&&a.isTimeout&&delete t[n]),"function"==typeof r&&r.apply(window,i)},l.onerror=function(e){},e={setInterval:function(e,n){var a=c(2147483647,t);return t[a]={callback:e,parameters:Array.prototype.slice.call(r,2)},l.postMessage({name:"setInterval",fakeId:a,time:n}),a},clearInterval:function(e){Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],l.postMessage({name:"clearInterval",fakeId:e}))},setTimeout:function(e,n){var a=c(2147483647,t);return t[a]={callback:e,parameters:Array.prototype.slice.call(r,2),isTimeout:!0},l.postMessage({name:"setTimeout",fakeId:a,time:n}),a},clearTimeout:function(e){Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],l.postMessage({name:"clearTimeout",fakeId:e}))}}}catch(e){}return e}(),p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||s,v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"requestInterval",value:function(e,t){if(f)return f.setInterval(e,t);if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setInterval(e,t);var n=(new Date).getTime(),a={};return a.value=p(function i(){(new Date).getTime()-n>=t&&(e.call(),n=(new Date).getTime()),a.value=p(i)}),a}},{key:"clearRequestInterval",value:function(e){f?f.clearInterval(e):window.cancelAnimationFrame?window.cancelAnimationFrame(e.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e.value):window.clearInterval(e)}},{key:"requestTimeout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(f)return f.setTimeout(e,t);if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setTimeout(e,t);var n=(new Date).getTime(),a={};return a.value=p(function i(){(new Date).getTime()-n>=t?e.call():a.value=p(i)}),a}},{key:"clearRequestTimeout",value:function(e){f?f.clearTimeout(e):window.cancelAnimationFrame?window.cancelAnimationFrame(e.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e.value):window.clearTimeout(e)}}]),e}();t.default=new v},70:function(e,t,n){var a=n(35);e.exports=Array.isArray||function(e){return"Array"==a(e)}},703:function(e,t,n){"use strict";var a=r(n(679)),i=r(n(6));function r(e){return e&&e.__esModule?e:{default:e}}var o=(0,a.default)(!1);window._tfs&&(0,i.default)(o,window._tfs),window._tfs=o},79:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=f(n(3)),r=f(n(301)),o=f(n(12)),u=f(n(6)),s=f(n(61)),l=f(n(116)),d=f(n(28)),c=f(n(302));function f(e){return e&&e.__esModule?e:{default:e}}var p=new s.default,v={},h={},E=void 0,_=o.default.DEFAULT_CONFIG;function g(e){return e===o.default.DEFAULT_CONFIG?_:e}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=this.get(e).appId;this.update(a,t),n({appId:a})}function y(e){var t,n,a,i,o=e;return o.i18n.locale=("auto"!==(t=o.i18n.locale)?t:document.documentElement.lang?document.documentElement.lang:"undefined"==typeof navigator?"en":navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||"en").toLowerCase().split("-")[0],"auto"!==o.i18n.locale&&(o.i18n.uiStrings=(0,u.default)({},o.i18n.uiStrings,(n={},a=o.i18n.locale,i={},a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n))),Object.keys(o.i18n.uiStrings).forEach(function(e){o.i18n.uiStrings[e]=(0,u.default)({},c.default,o.i18n.uiStrings[e])}),0===o.supportHours.length&&(o.supportHours=r.default.supportHours),o}function T(e,t,n){var a=function(e){var t=void 0;if(i.default.notEmpty(e,"appId"),E.configroot)t=E.configroot;else{var n=E.key;t=[E.origin,o.default.CONTENT_PATH,n].join("/")}return[t,e,o.default.UDE_CONFIG_JSON].join("/")}(e);p.makeRequest("GET",a,void 0,void 0,function(e){var n=void 0;try{n=JSON.parse(e),t(void 0,n)}catch(e){t({url:a,errorMsg:e.message,errorStack:e.stack})}},function(e){return t(e)},void 0,void 0,void 0,n)}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"init",value:function(e){E=e.metaData}},{key:"get",value:function(e){var t=v[g(e)];return t?(0,u.default)({},t):void 0}},{key:"set",value:function(e){var t=l.default.transform(e),n=y((0,u.default)({},r.default,t)),a=n.appId;v[a]=n,h[a]=(0,u.default)({},v[a])}},{key:"reset",value:function(e){var t=g(e);v[t]=h[t]}},{key:"update",value:function(e,t){var n=g(e),a=v[n];if(a){var i=y((0,u.default)(a,t));v[n]=i}}},{key:"fetch",value:function(e,t,n,a){var i=this,r=e||o.default.DEFAULT_CONFIG;this.get(r)?I.call(this,r,t,n):T(r,function(e,a){e?n({err:e}):(i.set(a),r===o.default.DEFAULT_CONFIG&&a.appId&&(_=a.appId),I.call(i,r,t,n))},a)}},{key:"requestConfig",value:function(e,t,n,a,i,r){var u=this,s=t;t||(s=o.default.DEFAULT_CONFIG);var c=E&&E.key?E.key:e.clientId,f=e.baseUrl+"/clients/"+c+"/applications/"+s+"/configuration";!function(e,t,n,a,i,r){var o={};o.action=a,o.requestData=n,p.makeRequest("post",e,{Accept:"application/json","Content-type":"application/json",Authorization:t},JSON.stringify(o),function(e){return i(void 0,e)},function(e){return i(e)},void 0,void 0,void 0,r)}(f,e.apiKey,n,a,function(e,t){if(e)i(e);else{var n={};try{n=JSON.parse(t),(n=l.default.transform(n)).prechatData&&(d.default.refreshContext(n.prechatData),delete n.prechatData)}catch(e){i({url:f,errorMsg:e.message,errorStack:e.stack})}u.update(s,n),i(void 0,n)}},r)}}]),e}();t.default=new m},8:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},82:function(e,t,n){var a=n(10),i=n(8).document,r=a(i)&&a(i.createElement);e.exports=function(e){return r?i.createElement(e):{}}},83:function(e,t,n){var a=n(110);e.exports=function(e,t){return new(a(e))(t)}},85:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},89:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(65);var i=o(n(9)),r=o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}var u=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function s(e){var t=new Date,n=e,a=60*(t.getTimezoneOffset()-n)*1e3,i=t.getTime()+a;return new Date(i)}function l(e,t,n){for(var a=[],i=0;i<e.length;i+=1){var r=e[i],o=r.start,u=r.end;o=d(o,t,n),u=d(u,t,n),a.push({start:o,end:u})}return a}function d(e,t,n){var a=parseInt(e,10),i=t.getFullYear(),r=t.getMonth(),o=t.getDate()+n,u=parseInt(a/100,10);return new Date(i,r,o,u,a%100)}function c(e,t){var n=Math.abs(e-t),a=new Date(n);return{days:a.getUTCDate()-1,hours:a.getUTCHours(),minutes:a.getUTCMinutes()}}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=void 0,o=void 0;return t.forEach(function(e){e.queue===n&&(a=e),"default"===e.queue&&(o=e)}),r.default.isObject(o,"SupportHours:default queue object"),a||(a=o),this.timeZoneOffset=i.default.get(["timeZoneOffset"],a,0),this.supportRange=function(e){r.default.isNumber(e.timeZoneOffset,"SupportHours::timeZoneOffset");for(var t=[],n=s(e.timeZoneOffset),a=n.getDay(),i=a;i<=a+u.length;i+=1){var o=i-a,d=l(e[u[i%7]]||[{start:"0000",end:"2359"}],n,o);t.push(d)}return t}(a),0}return a(e,[{key:"isWithinSupportHours",value:function(){var e=this.getNextAvailableTime();return e.days+e.hours+e.minutes===0}},{key:"getNextAvailableTime",value:function(){for(var e=this.supportRange,t=s(this.timeZoneOffset),n=0;n<e.length;n+=1)for(var a=0;a<e[n].length;a+=1){var i=e[n][a];if(t>=i.start&&t<=i.end)return c(t,t);if(t<=i.start)return c(i.start,t)}return 0}}]),e}();t.default=f},9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.isUndefinedorNull(t)||this.isUndefinedorNull(t[e[0]])?n:1===e.length?t[e[0]]:this.get(e.slice(1),t[e[0]],n)}},{key:"isUndefinedorNull",value:function(e){return void 0===e||null===e}},{key:"isEmptyorNull",value:function(e){return this.isUndefinedorNull(e)||""===e}},{key:"createNestedObject",value:function(e,t,n){var a=e,i=t.pop();return t.map(function(e){return a[e]=a[e]||{},a=a[e],0}),a[i]=n,a=a[i]}},{key:"extractRequiredAttributes",value:function(e,t){for(var n={},a=0;a<t.length;a+=1){var i=t[a];if(i.indexOf(".")>0){var r=i.split("."),o=this.get(r,e,void 0);this.createNestedObject(n,r,o)}else this.isUndefinedorNull(e[i])||(n[i]=e[i])}return n}},{key:"removeEmpty",value:function(e){var t=this,n=e;return Object.keys(n).forEach(function(e){t.isEmptyorNull(n[e])&&delete n[e]}),n}},{key:"removeSpecificKeys",value:function(e,t){var n=e;return t.map(function(e){return delete n[e]}),n}}]),e}();t.default=new i},91:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={INVITE_PREFIX:"tfs_invite_",STATE:{MAXIMIZED:"maximized",MINIMIZED:"minimized",BUSY:"busy",OFFLINE:"offline",ENGAGED:"engaged"},STIMULI_TYPE:{AVAILABILITY:"availability",INTERACTION:"interaction",ACTION:"action"},ACTION:{OFFER:"offer",ACCEPT:"accept",DECLINE:"decline",IGNORE:"ignore",MINIMIZE:"minimize",REMOVE:"remove"},STIMULI:{AGENT_AVAILABLE:"availability_true",AGENT_UNAVAILABLE:"availability_false",INTERACTION_STARTED:"interaction_true",INTERACTION_ENDED:"interaction_false",INVITE_OFFERED:"action_offer",INVITE_ACCEPTED:"action_accept",INVITE_DECLINED:"action_decline",INVITE_IGNORED:"action_ignore",INVITE_MINIMIZED:"action_minimize",INVITE_REMOVED:"action_remove"},EVENT:{INVITE_OFFERED:"inviteOffered",INVITE_ACCEPTED:"inviteAccepted",INVITE_DECLINED:"inviteDeclined",INVITE_IGNORED:"inviteIgnored",QUEUE_AFTER_HOURS:"queueAfterHours",CA_CHECK_FAIL:"caCheckFail"},AVAILABILITY_CHECK:{NONE:"none",REPEAT:"repeat",ONCE:"once",TILL_AVAILABLE:"till_available"},TRACK_INTERACTION:{AVAILABILITY_CHECK:"AVAILABILITY_CHECK",INVITE_REQUESTED:"INVITE_REQUESTED",INVITE_OFFERED:"INVITE_OFFERED",INVITE_ACCEPTED:"INVITE_ACCEPTED",INVITE_DECLINED:"INVITE_DECLINED",INVITE_IGNORED:"INVITE_IGNORED",INVITE_ALREADY_MAXIMIZED:"INVITE_ALREADY_MAXIMIZED",INVITE_PAGE_BACKGROUND:"INVITE_PAGE_BACKGROUND",INVITE_INITIALIZATION_ERROR:"INVITE_INITIALIZATION_ERROR",INVITE_SET_STATE_ERROR:"INVITE_SET_STATE_ERROR"},ACTION_ATTRIBUTE:"data-tfs-action",QUEUE_ATTRIBUTE:"data-tfs-queue",SKILL_ATTRIBUTE:"data-tfs-skill",BADGE_ENABLED_ATTRIBUTE:"data-badge",BADGE_HINT_ATTRIBUTE:"data-hint",VIEW_ENABLED_ATTRIBUTE:"data-view",CUSTOM_EVENT_NAME:"tfsInviteStateChange",APPLE_BUSINESS_CHAT:{ATTRIBUTES:{CLASS_NAME:"class",BUSINESS_ID:"data-apple-business-id",INTENT_ID:"data-apple-business-intent-id",GROUP_ID:"data-apple-business-group-id",THEME:"data-apple-button-theme"},DEFAULT_THEME:"dark",REQUIRED_CLASS:"apple-business-chat-button-container"},LIGHTBOX_CSS:{css:{backgroundColor:"#000000",position:"fixed",left:"0",top:"0",width:"100%",height:"100%",opacity:"0.85",zIndex:"2147483647"}},LOADER_CSS_ID:"tfs_loader_css",LOADER_CSS:".tfs-reset-css,.tfs-reset-css * {\n    background:none;\n    border:none;\n    bottom:auto;\n    clear:none;\n    cursor:default;\n    display:block;\n    float:none;\n    font-family:Arial, Helvetica, sans-serif;\n    font-size:medium;\n    font-style:normal;\n    font-weight:normal;\n    height:auto;\n    left:auto;\n    letter-spacing:normal;\n    line-height:normal;\n    margin:0;\n    max-height:none;\n    max-width:none;\n    min-height:0;\n    min-width:0;\n    overflow:visible;\n    outline:none;\n    position:static;\n    padding:0;\n    right:auto;\n    text-align:left;\n    text-decoration:none;\n    text-indent:0;\n    text-transform:none;\n    top:auto;\n    user-select:none;\n    -ms-user-select:none;\n    -webkit-user-select:none;\n    visibility:visible;\n    white-space:normal;\n    width:auto;\n    z-index:auto;\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n  } .tfs-animate {\n    -webkit-animation-duration: 500ms;\n    animation-duration: 500ms;\n    -webkit-animation-name: tfsRubberBand;\n    animation-name: tfsRubberBand;\n  } @-webkit-keyframes tfsRubberBand {\n  from {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n\n  30% {\n    -webkit-transform: scale3d(1.25, 0.75, 1);\n    transform: scale3d(1.25, 0.75, 1);\n  }\n\n  40% {\n    -webkit-transform: scale3d(0.75, 1.25, 1);\n    transform: scale3d(0.75, 1.25, 1);\n  }\n\n  50% {\n    -webkit-transform: scale3d(1.15, 0.85, 1);\n    transform: scale3d(1.15, 0.85, 1);\n  }\n\n  65% {\n    -webkit-transform: scale3d(0.95, 1.05, 1);\n    transform: scale3d(0.95, 1.05, 1);\n  }\n\n  75% {\n    -webkit-transform: scale3d(1.05, 0.95, 1);\n    transform: scale3d(1.05, 0.95, 1);\n  }\n\n  to {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n}\n\n@keyframes tfsRubberBand {\n  from {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n\n  30% {\n    -webkit-transform: scale3d(1.25, 0.75, 1);\n    transform: scale3d(1.25, 0.75, 1);\n  }\n\n  40% {\n    -webkit-transform: scale3d(0.75, 1.25, 1);\n    transform: scale3d(0.75, 1.25, 1);\n  }\n\n  50% {\n    -webkit-transform: scale3d(1.15, 0.85, 1);\n    transform: scale3d(1.15, 0.85, 1);\n  }\n\n  65% {\n    -webkit-transform: scale3d(0.95, 1.05, 1);\n    transform: scale3d(0.95, 1.05, 1);\n  }\n\n  75% {\n    -webkit-transform: scale3d(1.05, 0.95, 1);\n    transform: scale3d(1.05, 0.95, 1);\n  }\n\n  to {\n    -webkit-transform: scale3d(1, 1, 1);\n    transform: scale3d(1, 1, 1);\n  }\n}"}},92:function(e,t,n){e.exports=!n(18)&&!n(11)(function(){return 7!=Object.defineProperty(n(82)("div"),"a",{get:function(){return 7}}).a})},97:function(e,t,n){"use strict";var a=n(2),i=n(38)(5),r=!0;"find"in[]&&Array(1).find(function(){r=!1}),a(a.P+a.F*r,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(52)("find")},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"encode",value:function(e){try{return window.btoa(unescape(encodeURIComponent(e)))}catch(e){}}},{key:"decode",value:function(e){try{return decodeURIComponent(escape(window.atob(e)))}catch(e){}}},{key:"parse",value:function(e,t){var n=/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*?)$/i.exec(e);if(null!==n){var a=n[1],i=";base64"===n[3]?this.decode(n[4]):void 0;return t===a?i:void 0}}}]),e}();t.default=new i}});